{"version":3,"sources":["webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/core-js/modules/_typed-array.js","webpack:///./node_modules/core-js/modules/_typed-buffer.js","webpack:///./node_modules/core-js/modules/es6.date.to-json.js","webpack:///./node_modules/core-js/modules/_to-index.js","webpack:///./node_modules/core-js/modules/_typed.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./node_modules/core-js/modules/_string-html.js","webpack:///./node_modules/codemirror/lib/codemirror.js","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./node_modules/core-js/modules/es6.string.anchor.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/core-js/modules/es6.array.last-index-of.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/core-js/modules/_array-copy-within.js","webpack:///./node_modules/core-js/modules/es6.number.constructor.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/logic/types.ts","webpack:///./src/logic/parser.ts","webpack:///./src/components/PredicateLogic.tsx","webpack:///./node_modules/parsimmon/build/parsimmon.umd.min.js"],"names":["toString","module","exports","Array","isArray","arr","call","LIBRARY","global","fails","$export","$typed","$buffer","ctx","anInstance","propertyDesc","hide","redefineAll","toInteger","toLength","toIndex","toAbsoluteIndex","toPrimitive","has","classof","isObject","toObject","isArrayIter","create","getPrototypeOf","gOPN","f","getIterFn","uid","wks","createArrayMethod","createArrayIncludes","speciesConstructor","ArrayIterators","Iterators","$iterDetect","setSpecies","arrayFill","arrayCopyWithin","$DP","$GOPD","dP","gOPD","RangeError","TypeError","Uint8Array","ArrayProto","$ArrayBuffer","ArrayBuffer","$DataView","DataView","arrayForEach","arrayFilter","arraySome","arrayEvery","arrayFind","arrayFindIndex","arrayIncludes","arrayIndexOf","arrayValues","values","arrayKeys","keys","arrayEntries","entries","arrayLastIndexOf","lastIndexOf","arrayReduce","reduce","arrayReduceRight","reduceRight","arrayJoin","join","arraySort","sort","arraySlice","slice","arrayToString","arrayToLocaleString","toLocaleString","ITERATOR","TAG","TYPED_CONSTRUCTOR","DEF_CONSTRUCTOR","ALL_CONSTRUCTORS","CONSTR","TYPED_ARRAY","TYPED","VIEW","$map","O","length","allocate","LITTLE_ENDIAN","Uint16Array","buffer","FORCED_SET","set","toOffset","it","BYTES","offset","validate","C","speciesFromList","list","fromList","index","result","addGetter","key","internal","get","this","_d","$from","source","i","step","iterator","aLen","arguments","mapfn","undefined","mapping","iterFn","next","done","push","value","$of","TO_LOCALE_BUG","$toLocaleString","apply","proto","copyWithin","target","start","every","callbackfn","fill","filter","find","predicate","findIndex","forEach","indexOf","searchElement","includes","separator","map","reverse","middle","Math","floor","some","comparefn","subarray","begin","end","$begin","byteOffset","BYTES_PER_ELEMENT","$slice","$set","arrayLike","src","len","$iterators","isTAIndex","String","$getDesc","$setDesc","desc","configurable","writable","enumerable","S","F","getOwnPropertyDescriptor","defineProperty","$TypedArrayPrototype$","constructor","KEY","wrapper","CLAMPED","NAME","GETTER","SETTER","TypedArray","Base","TAC","FORCED","ABV","TypedArrayPrototype","addElement","that","data","v","o","getter","round","setter","$offset","$length","byteLength","klass","$len","b","l","e","iter","Function","prototype","concat","$nativeIterator","CORRECT_ITER_NAME","name","$iterator","G","W","of","from","P","DESCRIPTORS","setToStringTag","Infinity","BaseBuffer","abs","pow","log","LN2","$BUFFER","$LENGTH","$OFFSET","packIEEE754","mLen","nBytes","m","c","eLen","eMax","eBias","rt","s","unpackIEEE754","nBits","NaN","unpackI32","bytes","packI8","packI16","packI32","packF64","packF32","view","isLittleEndian","intIndex","store","_b","pack","conversion","ArrayBufferProto","j","$setInt8","setInt8","getInt8","setUint8","bufferLength","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","Date","toJSON","toISOString","pv","isFinite","number","Typed","TypedArrayConstructors","split","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","Arr","_byteLength","curByte","revLookup","charCodeAt","fromByteArray","uint8","extraBytes","parts","len2","encodeChunk","lookup","code","Error","num","output","init","endPos","defined","quot","createHTML","string","tag","attribute","p1","replace","exec","test","toLowerCase","userAgent","navigator","platform","gecko","ie_upto10","ie_11up","edge","ie","ie_version","document","documentMode","webkit","qtwebkit","chrome","presto","safari","vendor","mac_geMountainLion","phantom","ios","android","mobile","mac","chromeOS","windows","presto_version","match","Number","flipCtrlCmd","captureRightClick","classTest","cls","RegExp","range","rmClass","node","current","className","after","removeChildren","count","childNodes","removeChild","firstChild","removeChildrenAndAdd","parent","appendChild","elt","content","style","createElement","cssText","createTextNode","eltP","setAttribute","contains","child","nodeType","parentNode","host","activeElt","activeElement","body","shadowRoot","addClass","joinClasses","a","as","createRange","endNode","r","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","select","bind","args","copyObj","obj","overwrite","prop","hasOwnProperty","countColumn","tabSize","startIndex","startValue","search","n","nextTab","selectionStart","selectionEnd","_e","Delayed","id","time","handler","onTimeout","array","self","setTimeout","ms","clearTimeout","Pass","sel_dontScroll","scroll","sel_mouse","origin","sel_move","findColumn","goal","pos","col","skipped","min","spaceStrs","spaceStr","lst","out","nothing","createObj","base","props","inst","Object","nonASCIISingleCaseWordChar","isWordCharBasic","ch","toUpperCase","isWordChar","helper","isEmpty","extendingChars","isExtendingChar","skipExtendingChars","str","dir","charAt","findFirst","pred","to","midF","mid","ceil","bidiOther","getBidiPartAt","order","sticky","found","cur","bidiOrdering","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","level","direction","outerType","types","i$1","prev","type","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","i$5","cur$1","type$4","i$6","end$1","before","replace$1","j$1","i$7","at","isRTL","j$2","splice","nstart","unshift","getOrder","line","text","noHandlers","on","emitter","addEventListener","attachEvent","_handlers","getHandlers","off","removeEventListener","detachEvent","signal","handlers","signalDOMEvent","cm","override","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","e_preventDefault","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_stop","e_target","srcElement","e_button","which","button","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","offsetHeight","offsetWidth","hasBadBidiRects","txt","r0","getBoundingClientRect","r1","left","right","splitLinesAuto","nl","hasSelection","window","getSelection","te","ownerDocument","selection","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","modes","mimeModes","defineMode","mode","dependencies","resolveMode","spec","getMode","options","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","state","nstate","val","innerMode","info","startState","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","getLine","doc","first","size","chunk","lines","children","sz","chunkSize","getBetween","getLines","updateLineHeight","height","diff","lineNo","no","_lineAtHeight","h","outer","lh","isLine","lineNumberFor","lineNumberFormatter","firstLineNumber","Pos","cmp","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","max","_clipPos","last","linelen","clipToLen","clipPosArray","eol","sol","peek","eat","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","indentation","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","inner","lookAhead","oracle","baseToken","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","overlay","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","precise","display","minindent","minline","lim","indented","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","nextLine","startAt","stream","callBlankLine","readToken","blankLine","token","copy","Token","takeToken","asArray","tokens","extractLineClasses","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","sawReadOnlySpans","sawCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","stretchSpansOverChange","change","full","oldFirst","markedSpans","oldLast","startCh","endCh","isInsert","old","nw","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansBefore","startsBefore","markedSpansAfter","sameLine","span$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","detachMarkedSpans","detachLine","attachMarkedSpans","attachLine","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineNo","lineN","vis","visualLineEndNo","lastLine","lineIsHidden","widgetNode","lineIsHiddenInner","_heightAtLine","lineObj","p","lineLength","found$1","findMaxLine","d","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","getOption","rest","addToken","buildToken","buildTokenBadBidi","insertLineContent","externalMeasured","maps","caches","lastChild","querySelector","defaultSpecialCharPlaceholder","title","startStyle","endStyle","css","attributes","displayText","trailingBefore","spaceBefore","special","specialChars","mustWrap","createDocumentFragment","lastIndex","txt$1","tabWidth","specialCharPlaceholder","fullStyle","attr","part","buildCollapsedSpan","ignoreWidget","widget","input","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","foundBookmarks","endStyles","upto","tokenText","LineView","visualLineContinued","hidden","buildViewArray","nextPos","operationGroup","orphanDelayedCallbacks","signalLater","delayedCallbacks","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","getLineContent","ext","built","background","wrap","insertBefore","updateLineBackground","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","markers","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","lineNumInnerWidth","k","gutterSpecs","gutterWidth","alignable","isWidget","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","width","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","gutters","clientWidth","eventInWidget","getAttribute","sizer","mover","paddingTop","lineSpace","offsetTop","paddingVert","paddingH","cachedPaddingH","getComputedStyle","currentStyle","parseInt","paddingRight","isNaN","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","clientHeight","barHeight","mapFromLineView","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","lineMeasure","updateExternalMeasurement","rect","hasHeights","prepared","varHeight","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","bottom","top","ensureLineHeights","place","nodeAndOffsetInLineMap","coverStart","coverEnd","getUsefulRect","screen","logicalXDPI","deviceXDPI","normal","fromRange","hasBadZoomedRects","scaleX","scaleY","logicalYDPI","deviceYDPI","maybeUpdateRectForZooming","rSpan","charWidth","nullRect","rtop","rbot","bot","bogus","singleCursorHeightPerLine","rbottom","measureCharInner","measureText","mStart","mEnd","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","widgetTopHeight","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","_charCoords","_cursorCoords","preparedMeasure","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","_coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","wrappedLineExtentChar","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","ref","closestDist","endX","dist","textHeight","anchor","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","estHeight","posFromMouse","liberal","forRect","space","clientX","clientY","colDiff","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","sel","ranges","primIndex","empty","showCursorWhenSelecting","drawSelectionCursor","head","drawSelectionRange","cursor","cursorHeight","otherCursor","cmpCoords","fragment","padding","leftSide","rightSide","sizerWidth","docLTR","add","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","iterateBidiSections","fromPos","toPos","openStart","openEnd","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","leftEnd","rightStart","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","ensureFocus","focus","onFocus","delayBlurEvent","delayingBlurEvent","onBlur","readOnly","selForContextMenu","reset","receivedFocus","shift","updateHeightsInViewport","prevBottom","lineDiv","updateWidgetHeight","chWidth","w","visibleLines","viewport","ensure","ensureFrom","ensureTo","calculateScrollPos","snapMargin","screentop","docBottom","atTop","atBottom","newTop","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","getCursor","scrollToPos","margin","cursorScrollMargin","scrollToCoords","scrollToCoordsRange","sPos","updateScrollTop","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","setScrollLeft","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","update","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","pointerEvents","bar","delay","maybeDisable","elementFromPoint","clear","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","initScrollbars","scrollbarStyle","axis","nextOpId","_startOperation","op","updateInput","typing","changeObjs","cursorActivityCalled","selectionChanged","updateMaxLine","ops","ownsGroup","_endOperation","endCb","group","callbacks","fireCallbacksForOps","finishOperation","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","endOperations","scrollbarsClipped","marginBottom","borderRightWidth","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","doScroll","innerHeight","scrollNode","scrollIntoView","maybeScrollWindow","limit","changed","endCoords","scrollPos","startTop","startLeft","scrollPosIntoView","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","operation","methodOp","docMethodOp","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","force","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","adjustView","toUpdate","selSnapshot","hasFocus","active","anchorNode","extend","anchorOffset","focusNode","focusOffset","selectionSnapshot","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","patchDisplay","snapshot","removeAllRanges","addRange","restoreSelection","selectionDiv","reportedViewFrom","reportedViewTo","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","draggable","wheelDX","wheelDY","activeTouch","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","somethingSelected","normalizeSelection","mayTouch","selectionsMayTouch","prim","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","updateLine","linesFor","firstLine","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","History","startGen","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","pop","addChangeToHistory","selAfter","opId","hist","history","historyEventDelay","lastChangeEvent","pushSelectionToHistory","addSelectionToHistory","selectionEventCanBeMerged","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","mergeOldSpans","getOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","event","newChanges","extendRange","posBefore","extendSelection","setSelection","extendSelections","heads","replaceOneSelection","setSimpleSelection","setSelectionReplaceHistory","setSelectionNoUndo","filterSelectionChange","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","mark","mk","newParts","dfrom","dto","removeReadOnlyRanges","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","returned","shiftDoc","distance","removed","recomputeMaxLength","checkWidthStart","retreatFrontier","changesHandler","changeHandler","makeChangeSingleDocInEditor","_replaceRange","assign","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","ok","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","oldHeight","remaining","leaf","maybeSpill","me","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","this$1","oldH","nextMarkerId","TextMarker","_markText","cloneNode","isParent","SharedTextMarker","markTextShared","replacedWith","addToHistory","curLine","addMarkedSpan","clearOnEnter","clearHistory","withOp","visual","dHeight","findSharedMarkers","findMarks","clipPos","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","getValue","lineSeparator","setValue","replaceRange","getRange","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","listSelections","setCursor","extendSelectionsBy","setSelections","addSelection","getSelections","replaceSelection","dup","replaceSelections","newSel","hint","oldPrev","newPrev","computeReplacedSel","undo","redo","undoSelection","redoSelection","setExtending","getExtending","historySize","markClean","changeGeneration","forceSplit","isClean","gen","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","addLineWidget","insertAt","aboveVisible","removeLineWidget","markText","setBookmark","realOpts","findMarksAt","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","mFrom","mTo","subMark","copySharedMarkers","unlinkDoc","CodeMirror","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","markAsReadAndPasteIfAllFilesAreRead","t","readTextFromFile","file","allowDropFileTypes","reader","onerror","onload","readAsText","draggingText","text$1","getData","selected","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","resizeTimer","onResize","setSize","keyNames","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","fromCharCode","keyMap","normalizeKeyName","alt","ctrl","cmd","mod","normalizeKeyMap","keymap","keyname","lookupKey","getKeyMap","fallthrough","isModifierKey","keyCode","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","kill","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","prep","targetTop","basic","pcDefault","emacsy","macDefault","commands","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","charCoords","coordsChar","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","visualLineEnd","lineEnd","goLineRight","cursorCoords","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentSelection","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","execCommand","transposeChars","newlineAndIndent","sels","indentLine","openLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","keyMaps","extraKeys","lookupKeyForEditor","handleKeyBinding","motion","lastStoppedKey","onKeyDown","handled","up","showCrossHair","onKeyUp","onKeyPress","charCode","handleCharBinding","lastClick","lastDoubleClick","PastClick","onMouseDown","supportsTouch","clickInGutter","repeat","now","compare","clickRepeat","selectingText","handleMappedButton","contained","behavior","option","unit","addNew","moveOnDrag","configureMouse","dragDrop","moved","dragEnd","mouseMove","dragStart","e2","leftButtonStartDrag","ourRange","ourIndex","startSel","rangeForUnit","lastPos","extendTo","startCol","posCol","leftPos","oldRange","ranges$1","anchorLine","boundary","headIndex","usePart","bidiSimplify","editorSize","counter","move","buttons","curCount","leftButtonSelect","leftButtonDown","onContextMenu","findWordAt","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","theme","Init","defaults","optionHandlers","dragDropChanged","funcs","dragFunctions","toggle","enter","over","leave","drop","wrappingChanged","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","word","getField","touchFinished","prevTouch","finishTouch","farAway","touch","radiusX","radiusY","isMouseLikeTouchEvent","pageX","pageY","frag","onDragOver","setData","effectAllowed","setDragImage","img","_top","onDragStart","inp","registerEventHandlers","finishInit","initHooks","textRendering","how","aggressive","indent","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","spellcheck","autocorrect","autocapitalize","hiddenTextarea","border","_findPosH","origDir","lineDir","moveOnce","boundToLine","bidi","mv","getWrappedLineExtent","moveInStorageOrder","searchInVisualLine","getRes","res","nextCh","moveVisually","sawType","getHelper","hitSide","_findPosV","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","badPos","bad","domToPos","lineNode","locateNodeInLineView","textNode","topNode","nodeValue","curNode","textContent","previousSibling","dist$1","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","updateFromDOM","readFromDOMSoon","forceCompositionEnd","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","blur","pollSelection","pollInterval","poll","scan","isInGutter","triggerOnKeyDown","pollContent","fromIndex","fromNode","toNode","newText","closing","extraLinebreak","close","addText","walk","cmText","markerID","isBlock","nodeName","domTextBetween","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","contentEditable","readOnlyChanged","resetPosition","TextareaInput","prevInput","pollingFast","createField","textarea","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","moveInputWithCursor","headPos","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","scrollY","scrollTo","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","deflt","notOnInit","defineOption","newBreaks","refresh","getInputField","detach","attach","integer","defineOptions","helpers","setOption","getDoc","addKeyMap","removeKeyMap","addOverlay","score","priority","insertSorted","modeSpec","removeOverlay","newRanges","getTokenAt","getLineTokens","getTokenTypeAt","getHelpers","help","_global","getStateAfter","lineAtHeight","heightAtLine","defaultTextHeight","defaultCharWidth","getViewport","addWidget","vspace","hspace","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","findPosH","amount","rtlMoveVisually","findPosV","goalColumn","goals","startChar","check","getScrollInfo","scrollToRange","interpret","startOperation","endOperation","swapDoc","phrase","phraseText","phrases","getWrapperElement","getScrollerElement","getGutterElement","registerHelper","registerGlobalHelper","addEditorMethods","dontDelegate","method","defineMIME","mime","defineExtension","func","defineDocExtension","fromTextArea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","cmpPos","addLegacyProps","version","factory","isLE","write","toIObject","$native","NEGATIVE_ZERO","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","__proto__","arg","encodingOrOffset","allocUnsafe","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","fromString","isBuffer","checked","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","hexWrite","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","typedArraySupport","poolSize","_augment","Symbol","species","allocUnsafeSlow","_isBuffer","swap16","swap32","swap64","inspect","thisStart","thisEnd","thisCopy","targetCopy","_arr","ret","toHex","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","trim","stringtrim","base64clean","dst","inc","cof","inheritIfRequired","$trim","$Number","BROKEN_COF","TRIM","toNumber","argument","third","radix","maxCode","digits","valueOf","LogicExpressionTypes","expressionToken","Parsimmon","regexp","unaryOperator","thru","binaryOperator","propositionExpression","identifier","logicExpressionType","LOGIC_PROPOSITION","referenceExpression","digit","atLeast","tie","lineNumberString","LOGIC_REFERENCE","atomicExpression","lazy","expression","unaryExpression","seqMap","operator","operand","LOGIC_UNARY","binaryExpression","operand0","operand1","LOGIC_BINARY","operands","statement","proof","sepBy","newline","many","statements","optWhitespace","Wrapper","PredicateLogic","initialContent","useState","setContent","handleContentChange","useCallback","newContent","onContentChange","EditablePanel","editorRef","useRef","domRef","updatePropNumber","editor","propNumber","propNumberElement","innerHTML","useEffect","Codemirror","eventEditor","EditablePanelWrapper","editablePanelStyle","backgroundColor","ResultPanel","parseResult","parse","status","expected","ResultPanelWrapper","message","JSON","stringify","u","__esModule","_","coll","E","furthest","B","L","z","R","U","I","D","N","J","T","X","V","or","Q","then","H","K","Y","Z","$","nn","tn","tryParse","assert","chain","tieWith","times","atMost","contramap","promap","rn","sepBy1","lookahead","notFollowedBy","fallback","ap","en","un","fn","an","cn","sn","ln","hn","pn","dn","vn","gn","mn","all","any","cr","createLanguage","crlf","custom","eof","fail","formatError","isParser","letter","letters","lf","makeFailure","makeSuccess","noneOf","oneOf","Parser","regex","seqObj","succeed","takeWhile","whitespace","Binary","bitSeq","bitSeqObj","encodedString","uintBE","uint8BE","uint16BE","uint32BE","uintLE","uint8LE","uint16LE","uint32LE","intBE","int8BE","int16BE","int32BE","intLE","int8LE","int16LE","int32LE","floatBE","floatLE","doubleBE","doubleLE"],"mappings":"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","file":"16-9f83b528c14086ce5c14.js","sourcesContent":["require(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};","'use strict';\nif (require('./_descriptors')) {\n  var LIBRARY = require('./_library');\n  var global = require('./_global');\n  var fails = require('./_fails');\n  var $export = require('./_export');\n  var $typed = require('./_typed');\n  var $buffer = require('./_typed-buffer');\n  var ctx = require('./_ctx');\n  var anInstance = require('./_an-instance');\n  var propertyDesc = require('./_property-desc');\n  var hide = require('./_hide');\n  var redefineAll = require('./_redefine-all');\n  var toInteger = require('./_to-integer');\n  var toLength = require('./_to-length');\n  var toIndex = require('./_to-index');\n  var toAbsoluteIndex = require('./_to-absolute-index');\n  var toPrimitive = require('./_to-primitive');\n  var has = require('./_has');\n  var classof = require('./_classof');\n  var isObject = require('./_is-object');\n  var toObject = require('./_to-object');\n  var isArrayIter = require('./_is-array-iter');\n  var create = require('./_object-create');\n  var getPrototypeOf = require('./_object-gpo');\n  var gOPN = require('./_object-gopn').f;\n  var getIterFn = require('./core.get-iterator-method');\n  var uid = require('./_uid');\n  var wks = require('./_wks');\n  var createArrayMethod = require('./_array-methods');\n  var createArrayIncludes = require('./_array-includes');\n  var speciesConstructor = require('./_species-constructor');\n  var ArrayIterators = require('./es6.array.iterator');\n  var Iterators = require('./_iterators');\n  var $iterDetect = require('./_iter-detect');\n  var setSpecies = require('./_set-species');\n  var arrayFill = require('./_array-fill');\n  var arrayCopyWithin = require('./_array-copy-within');\n  var $DP = require('./_object-dp');\n  var $GOPD = require('./_object-gopd');\n  var dP = $DP.f;\n  var gOPD = $GOPD.f;\n  var RangeError = global.RangeError;\n  var TypeError = global.TypeError;\n  var Uint8Array = global.Uint8Array;\n  var ARRAY_BUFFER = 'ArrayBuffer';\n  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;\n  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\n  var PROTOTYPE = 'prototype';\n  var ArrayProto = Array[PROTOTYPE];\n  var $ArrayBuffer = $buffer.ArrayBuffer;\n  var $DataView = $buffer.DataView;\n  var arrayForEach = createArrayMethod(0);\n  var arrayFilter = createArrayMethod(2);\n  var arraySome = createArrayMethod(3);\n  var arrayEvery = createArrayMethod(4);\n  var arrayFind = createArrayMethod(5);\n  var arrayFindIndex = createArrayMethod(6);\n  var arrayIncludes = createArrayIncludes(true);\n  var arrayIndexOf = createArrayIncludes(false);\n  var arrayValues = ArrayIterators.values;\n  var arrayKeys = ArrayIterators.keys;\n  var arrayEntries = ArrayIterators.entries;\n  var arrayLastIndexOf = ArrayProto.lastIndexOf;\n  var arrayReduce = ArrayProto.reduce;\n  var arrayReduceRight = ArrayProto.reduceRight;\n  var arrayJoin = ArrayProto.join;\n  var arraySort = ArrayProto.sort;\n  var arraySlice = ArrayProto.slice;\n  var arrayToString = ArrayProto.toString;\n  var arrayToLocaleString = ArrayProto.toLocaleString;\n  var ITERATOR = wks('iterator');\n  var TAG = wks('toStringTag');\n  var TYPED_CONSTRUCTOR = uid('typed_constructor');\n  var DEF_CONSTRUCTOR = uid('def_constructor');\n  var ALL_CONSTRUCTORS = $typed.CONSTR;\n  var TYPED_ARRAY = $typed.TYPED;\n  var VIEW = $typed.VIEW;\n  var WRONG_LENGTH = 'Wrong length!';\n\n  var $map = createArrayMethod(1, function (O, length) {\n    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);\n  });\n\n  var LITTLE_ENDIAN = fails(function () {\n    // eslint-disable-next-line no-undef\n    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;\n  });\n\n  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {\n    new Uint8Array(1).set({});\n  });\n\n  var toOffset = function (it, BYTES) {\n    var offset = toInteger(it);\n    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');\n    return offset;\n  };\n\n  var validate = function (it) {\n    if (isObject(it) && TYPED_ARRAY in it) return it;\n    throw TypeError(it + ' is not a typed array!');\n  };\n\n  var allocate = function (C, length) {\n    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {\n      throw TypeError('It is not a typed array constructor!');\n    } return new C(length);\n  };\n\n  var speciesFromList = function (O, list) {\n    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);\n  };\n\n  var fromList = function (C, list) {\n    var index = 0;\n    var length = list.length;\n    var result = allocate(C, length);\n    while (length > index) result[index] = list[index++];\n    return result;\n  };\n\n  var addGetter = function (it, key, internal) {\n    dP(it, key, { get: function () { return this._d[internal]; } });\n  };\n\n  var $from = function from(source /* , mapfn, thisArg */) {\n    var O = toObject(source);\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var iterFn = getIterFn(O);\n    var i, length, values, result, step, iterator;\n    if (iterFn != undefined && !isArrayIter(iterFn)) {\n      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {\n        values.push(step.value);\n      } O = values;\n    }\n    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);\n    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {\n      result[i] = mapping ? mapfn(O[i], i) : O[i];\n    }\n    return result;\n  };\n\n  var $of = function of(/* ...items */) {\n    var index = 0;\n    var length = arguments.length;\n    var result = allocate(this, length);\n    while (length > index) result[index] = arguments[index++];\n    return result;\n  };\n\n  // iOS Safari 6.x fails here\n  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });\n\n  var $toLocaleString = function toLocaleString() {\n    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);\n  };\n\n  var proto = {\n    copyWithin: function copyWithin(target, start /* , end */) {\n      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    every: function every(callbackfn /* , thisArg */) {\n      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars\n      return arrayFill.apply(validate(this), arguments);\n    },\n    filter: function filter(callbackfn /* , thisArg */) {\n      return speciesFromList(this, arrayFilter(validate(this), callbackfn,\n        arguments.length > 1 ? arguments[1] : undefined));\n    },\n    find: function find(predicate /* , thisArg */) {\n      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    findIndex: function findIndex(predicate /* , thisArg */) {\n      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    forEach: function forEach(callbackfn /* , thisArg */) {\n      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    indexOf: function indexOf(searchElement /* , fromIndex */) {\n      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    includes: function includes(searchElement /* , fromIndex */) {\n      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    join: function join(separator) { // eslint-disable-line no-unused-vars\n      return arrayJoin.apply(validate(this), arguments);\n    },\n    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars\n      return arrayLastIndexOf.apply(validate(this), arguments);\n    },\n    map: function map(mapfn /* , thisArg */) {\n      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduce.apply(validate(this), arguments);\n    },\n    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduceRight.apply(validate(this), arguments);\n    },\n    reverse: function reverse() {\n      var that = this;\n      var length = validate(that).length;\n      var middle = Math.floor(length / 2);\n      var index = 0;\n      var value;\n      while (index < middle) {\n        value = that[index];\n        that[index++] = that[--length];\n        that[length] = value;\n      } return that;\n    },\n    some: function some(callbackfn /* , thisArg */) {\n      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    sort: function sort(comparefn) {\n      return arraySort.call(validate(this), comparefn);\n    },\n    subarray: function subarray(begin, end) {\n      var O = validate(this);\n      var length = O.length;\n      var $begin = toAbsoluteIndex(begin, length);\n      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(\n        O.buffer,\n        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,\n        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)\n      );\n    }\n  };\n\n  var $slice = function slice(start, end) {\n    return speciesFromList(this, arraySlice.call(validate(this), start, end));\n  };\n\n  var $set = function set(arrayLike /* , offset */) {\n    validate(this);\n    var offset = toOffset(arguments[1], 1);\n    var length = this.length;\n    var src = toObject(arrayLike);\n    var len = toLength(src.length);\n    var index = 0;\n    if (len + offset > length) throw RangeError(WRONG_LENGTH);\n    while (index < len) this[offset + index] = src[index++];\n  };\n\n  var $iterators = {\n    entries: function entries() {\n      return arrayEntries.call(validate(this));\n    },\n    keys: function keys() {\n      return arrayKeys.call(validate(this));\n    },\n    values: function values() {\n      return arrayValues.call(validate(this));\n    }\n  };\n\n  var isTAIndex = function (target, key) {\n    return isObject(target)\n      && target[TYPED_ARRAY]\n      && typeof key != 'symbol'\n      && key in target\n      && String(+key) == String(key);\n  };\n  var $getDesc = function getOwnPropertyDescriptor(target, key) {\n    return isTAIndex(target, key = toPrimitive(key, true))\n      ? propertyDesc(2, target[key])\n      : gOPD(target, key);\n  };\n  var $setDesc = function defineProperty(target, key, desc) {\n    if (isTAIndex(target, key = toPrimitive(key, true))\n      && isObject(desc)\n      && has(desc, 'value')\n      && !has(desc, 'get')\n      && !has(desc, 'set')\n      // TODO: add validation descriptor w/o calling accessors\n      && !desc.configurable\n      && (!has(desc, 'writable') || desc.writable)\n      && (!has(desc, 'enumerable') || desc.enumerable)\n    ) {\n      target[key] = desc.value;\n      return target;\n    } return dP(target, key, desc);\n  };\n\n  if (!ALL_CONSTRUCTORS) {\n    $GOPD.f = $getDesc;\n    $DP.f = $setDesc;\n  }\n\n  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {\n    getOwnPropertyDescriptor: $getDesc,\n    defineProperty: $setDesc\n  });\n\n  if (fails(function () { arrayToString.call({}); })) {\n    arrayToString = arrayToLocaleString = function toString() {\n      return arrayJoin.call(this);\n    };\n  }\n\n  var $TypedArrayPrototype$ = redefineAll({}, proto);\n  redefineAll($TypedArrayPrototype$, $iterators);\n  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);\n  redefineAll($TypedArrayPrototype$, {\n    slice: $slice,\n    set: $set,\n    constructor: function () { /* noop */ },\n    toString: arrayToString,\n    toLocaleString: $toLocaleString\n  });\n  addGetter($TypedArrayPrototype$, 'buffer', 'b');\n  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');\n  addGetter($TypedArrayPrototype$, 'byteLength', 'l');\n  addGetter($TypedArrayPrototype$, 'length', 'e');\n  dP($TypedArrayPrototype$, TAG, {\n    get: function () { return this[TYPED_ARRAY]; }\n  });\n\n  // eslint-disable-next-line max-statements\n  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {\n    CLAMPED = !!CLAMPED;\n    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + KEY;\n    var SETTER = 'set' + KEY;\n    var TypedArray = global[NAME];\n    var Base = TypedArray || {};\n    var TAC = TypedArray && getPrototypeOf(TypedArray);\n    var FORCED = !TypedArray || !$typed.ABV;\n    var O = {};\n    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];\n    var getter = function (that, index) {\n      var data = that._d;\n      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);\n    };\n    var setter = function (that, index, value) {\n      var data = that._d;\n      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;\n      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);\n    };\n    var addElement = function (that, index) {\n      dP(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n    if (FORCED) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME, '_d');\n        var index = 0;\n        var offset = 0;\n        var buffer, byteLength, length, klass;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new $ArrayBuffer(byteLength);\n        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          buffer = data;\n          offset = toOffset($offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - offset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (TYPED_ARRAY in data) {\n          return fromList(TypedArray, data);\n        } else {\n          return $from.call(TypedArray, data);\n        }\n        hide(that, '_d', {\n          b: buffer,\n          o: offset,\n          l: byteLength,\n          e: length,\n          v: new $DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);\n      hide(TypedArrayPrototype, 'constructor', TypedArray);\n    } else if (!fails(function () {\n      TypedArray(1);\n    }) || !fails(function () {\n      new TypedArray(-1); // eslint-disable-line no-new\n    }) || !$iterDetect(function (iter) {\n      new TypedArray(); // eslint-disable-line no-new\n      new TypedArray(null); // eslint-disable-line no-new\n      new TypedArray(1.5); // eslint-disable-line no-new\n      new TypedArray(iter); // eslint-disable-line no-new\n    }, true)) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME);\n        var klass;\n        // `ws` module bug, temporarily remove validation length for Uint8Array\n        // https://github.com/websockets/ws/pull/645\n        if (!isObject(data)) return new Base(toIndex(data));\n        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          return $length !== undefined\n            ? new Base(data, toOffset($offset, BYTES), $length)\n            : $offset !== undefined\n              ? new Base(data, toOffset($offset, BYTES))\n              : new Base(data);\n        }\n        if (TYPED_ARRAY in data) return fromList(TypedArray, data);\n        return $from.call(TypedArray, data);\n      });\n      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {\n        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);\n      });\n      TypedArray[PROTOTYPE] = TypedArrayPrototype;\n      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;\n    }\n    var $nativeIterator = TypedArrayPrototype[ITERATOR];\n    var CORRECT_ITER_NAME = !!$nativeIterator\n      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);\n    var $iterator = $iterators.values;\n    hide(TypedArray, TYPED_CONSTRUCTOR, true);\n    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);\n    hide(TypedArrayPrototype, VIEW, true);\n    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);\n\n    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {\n      dP(TypedArrayPrototype, TAG, {\n        get: function () { return NAME; }\n      });\n    }\n\n    O[NAME] = TypedArray;\n\n    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);\n\n    $export($export.S, NAME, {\n      BYTES_PER_ELEMENT: BYTES\n    });\n\n    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {\n      from: $from,\n      of: $of\n    });\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);\n\n    $export($export.P, NAME, proto);\n\n    setSpecies(NAME);\n\n    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });\n\n    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);\n\n    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;\n\n    $export($export.P + $export.F * fails(function () {\n      new TypedArray(1).slice();\n    }), NAME, { slice: $slice });\n\n    $export($export.P + $export.F * (fails(function () {\n      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();\n    }) || !fails(function () {\n      TypedArrayPrototype.toLocaleString.call([1, 2]);\n    })), NAME, { toLocaleString: $toLocaleString });\n\n    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;\n    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);\n  };\n} else module.exports = function () { /* empty */ };\n","'use strict';\nvar global = require('./_global');\nvar DESCRIPTORS = require('./_descriptors');\nvar LIBRARY = require('./_library');\nvar $typed = require('./_typed');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar fails = require('./_fails');\nvar anInstance = require('./_an-instance');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar toIndex = require('./_to-index');\nvar gOPN = require('./_object-gopn').f;\nvar dP = require('./_object-dp').f;\nvar arrayFill = require('./_array-fill');\nvar setToStringTag = require('./_set-to-string-tag');\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length!';\nvar WRONG_INDEX = 'Wrong index!';\nvar $ArrayBuffer = global[ARRAY_BUFFER];\nvar $DataView = global[DATA_VIEW];\nvar Math = global.Math;\nvar RangeError = global.RangeError;\n// eslint-disable-next-line no-shadow-restricted-names\nvar Infinity = global.Infinity;\nvar BaseBuffer = $ArrayBuffer;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\nvar BUFFER = 'buffer';\nvar BYTE_LENGTH = 'byteLength';\nvar BYTE_OFFSET = 'byteOffset';\nvar $BUFFER = DESCRIPTORS ? '_b' : BUFFER;\nvar $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;\nvar $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nfunction packIEEE754(value, mLen, nBytes) {\n  var buffer = new Array(nBytes);\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var i = 0;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  var e, m, c;\n  value = abs(value);\n  // eslint-disable-next-line no-self-compare\n  if (value != value || value === Infinity) {\n    // eslint-disable-next-line no-self-compare\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if (value * (c = pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n}\nfunction unpackIEEE754(buffer, mLen, nBytes) {\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = eLen - 7;\n  var i = nBytes - 1;\n  var s = buffer[i--];\n  var e = s & 127;\n  var m;\n  s >>= 7;\n  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n}\n\nfunction unpackI32(bytes) {\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n}\nfunction packI8(it) {\n  return [it & 0xff];\n}\nfunction packI16(it) {\n  return [it & 0xff, it >> 8 & 0xff];\n}\nfunction packI32(it) {\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n}\nfunction packF64(it) {\n  return packIEEE754(it, 52, 8);\n}\nfunction packF32(it) {\n  return packIEEE754(it, 23, 4);\n}\n\nfunction addGetter(C, key, internal) {\n  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });\n}\n\nfunction get(view, bytes, index, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n}\nfunction set(view, bytes, index, conversion, value, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = conversion(+value);\n  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n}\n\nif (!$typed.ABV) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    this._b = arrayFill.call(new Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH];\n    var offset = toInteger(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if (!fails(function () {\n    $ArrayBuffer(1);\n  }) || !fails(function () {\n    new $ArrayBuffer(-1); // eslint-disable-line no-new\n  }) || fails(function () {\n    new $ArrayBuffer(); // eslint-disable-line no-new\n    new $ArrayBuffer(1.5); // eslint-disable-line no-new\n    new $ArrayBuffer(NaN); // eslint-disable-line no-new\n    return $ArrayBuffer.name != ARRAY_BUFFER;\n  })) {\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new BaseBuffer(toIndex(length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);\n    }\n    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\n\n$export($export.P + $export.F * require('./_fails')(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n}), 'Date', {\n  // eslint-disable-next-line no-unused-vars\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n","// https://tc39.github.io/ecma262/#sec-toindex\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toInteger(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length!');\n  return length;\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar uid = require('./_uid');\nvar TYPED = uid('typed_array');\nvar VIEW = uid('view');\nvar ABV = !!(global.ArrayBuffer && global.DataView);\nvar CONSTR = ABV;\nvar i = 0;\nvar l = 9;\nvar Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile (i < l) {\n  if (Typed = global[TypedArrayConstructors[i++]]) {\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV: ABV,\n  CONSTR: CONSTR,\n  TYPED: TYPED,\n  VIEW: VIEW\n};\n","'use strict';\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nexports.byteLength = byteLength;\nexports.toByteArray = toByteArray;\nexports.fromByteArray = fromByteArray;\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array;\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n} // Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\n\n\nrevLookup['-'.charCodeAt(0)] = 62;\nrevLookup['_'.charCodeAt(0)] = 63;\n\nfunction getLens(b64) {\n  var len = b64.length;\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4');\n  } // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n\n\n  var validLen = b64.indexOf('=');\n  if (validLen === -1) validLen = len;\n  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n  return [validLen, placeHoldersLen];\n} // base64 is 4/3 + up to two characters of the original data\n\n\nfunction byteLength(b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction _byteLength(b64, validLen, placeHoldersLen) {\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\n\nfunction toByteArray(b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n  var curByte = 0; // if there are placeholders, only get up to the last complete 4 chars\n\n  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n  var i;\n\n  for (i = 0; i < len; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = tmp >> 16 & 0xFF;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[curByte++] = tmp >> 8 & 0xFF;\n    arr[curByte++] = tmp & 0xFF;\n  }\n\n  return arr;\n}\n\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F];\n}\n\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16 & 0xFF0000) + (uint8[i + 1] << 8 & 0xFF00) + (uint8[i + 2] & 0xFF);\n    output.push(tripletToBase64(tmp));\n  }\n\n  return output.join('');\n}\n\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3; // if we have 1 byte left, pad 2 bytes\n\n  var parts = [];\n  var maxChunkLength = 16383; // must be multiple of 3\n  // go through the array every three bytes, we'll deal with trailing stuff later\n\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  } // pad the end with zeros, but make sure to not forget the extra bytes\n\n\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 0x3F] + '==');\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 0x3F] + lookup[tmp << 2 & 0x3F] + '=');\n  }\n\n  return parts.join('');\n}","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","require(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.string.anchor\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.array.find\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.search\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n// This is CodeMirror (https://codemirror.net), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.CodeMirror = factory());\n})(this, function () {\n  'use strict'; // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\//.test(userAgent);\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n  var ios = !edge && /AppleWebKit/.test(userAgent) && /Mobile\\/\\w+/.test(userAgent);\n  var android = /Android/.test(userAgent); // This is woefully incomplete. Suggestions for alternative methods welcome.\n\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n\n  if (presto_version) {\n    presto_version = Number(presto_version[1]);\n  }\n\n  if (presto_version && presto_version >= 15) {\n    presto = false;\n    webkit = true;\n  } // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n\n\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || ie && ie_version >= 9;\n\n  function classTest(cls) {\n    return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\");\n  }\n\n  var rmClass = function rmClass(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count) {\n      e.removeChild(e.firstChild);\n    }\n\n    return e;\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e);\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n\n    if (className) {\n      e.className = className;\n    }\n\n    if (style) {\n      e.style.cssText = style;\n    }\n\n    if (typeof content == \"string\") {\n      e.appendChild(document.createTextNode(content));\n    } else if (content) {\n      for (var i = 0; i < content.length; ++i) {\n        e.appendChild(content[i]);\n      }\n    }\n\n    return e;\n  } // wrapper for elt, which removes the elt from the accessibility tree\n\n\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e;\n  }\n\n  var range;\n\n  if (document.createRange) {\n    range = function range(node, start, end, endNode) {\n      var r = document.createRange();\n      r.setEnd(endNode || node, end);\n      r.setStart(node, start);\n      return r;\n    };\n  } else {\n    range = function range(node, start, end) {\n      var r = document.body.createTextRange();\n\n      try {\n        r.moveToElementText(node.parentNode);\n      } catch (e) {\n        return r;\n      }\n\n      r.collapse(true);\n      r.moveEnd(\"character\", end);\n      r.moveStart(\"character\", start);\n      return r;\n    };\n  }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      {\n        child = child.parentNode;\n      }\n\n    if (parent.contains) {\n      return parent.contains(child);\n    }\n\n    do {\n      if (child.nodeType == 11) {\n        child = child.host;\n      }\n\n      if (child == parent) {\n        return true;\n      }\n    } while (child = child.parentNode);\n  }\n\n  function activeElt() {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n\n    try {\n      activeElement = document.activeElement;\n    } catch (e) {\n      activeElement = document.body || null;\n    }\n\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement) {\n      activeElement = activeElement.shadowRoot.activeElement;\n    }\n\n    return activeElement;\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n\n    if (!classTest(cls).test(current)) {\n      node.className += (current ? \" \" : \"\") + cls;\n    }\n  }\n\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n\n    for (var i = 0; i < as.length; i++) {\n      if (as[i] && !classTest(as[i]).test(b)) {\n        b += \" \" + as[i];\n      }\n    }\n\n    return b;\n  }\n\n  var selectInput = function selectInput(node) {\n    node.select();\n  };\n\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    {\n      selectInput = function selectInput(node) {\n        node.selectionStart = 0;\n        node.selectionEnd = node.value.length;\n      };\n    } else if (ie) // Suppress mysterious IE10 errors\n    {\n      selectInput = function selectInput(node) {\n        try {\n          node.select();\n        } catch (_e) {}\n      };\n    }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function () {\n      return f.apply(null, args);\n    };\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) {\n      target = {};\n    }\n\n    for (var prop in obj) {\n      if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop))) {\n        target[prop] = obj[prop];\n      }\n    }\n\n    return target;\n  } // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n\n\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n\n      if (end == -1) {\n        end = string.length;\n      }\n    }\n\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n\n      if (nextTab < 0 || nextTab >= end) {\n        return n + (end - i);\n      }\n\n      n += nextTab - i;\n      n += tabSize - n % tabSize;\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function Delayed() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n\n    if (self.time <= +new Date()) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date());\n    }\n  };\n\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date() + ms;\n\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i) {\n      if (array[i] == elt) {\n        return i;\n      }\n    }\n\n    return -1;\n  } // Number of pixels added to scroller and sizer to hide scrollbar\n\n\n  var scrollerGap = 30; // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n\n  var Pass = {\n    toString: function toString() {\n      return \"CodeMirror.Pass\";\n    }\n  }; // Reused option objects for setSelection & friends\n\n  var sel_dontScroll = {\n    scroll: false\n  },\n      sel_mouse = {\n    origin: \"*mouse\"\n  },\n      sel_move = {\n    origin: \"+move\"\n  }; // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n\n      if (nextTab == -1) {\n        nextTab = string.length;\n      }\n\n      var skipped = nextTab - pos;\n\n      if (nextTab == string.length || col + skipped >= goal) {\n        return pos + Math.min(skipped, goal - col);\n      }\n\n      col += nextTab - pos;\n      col += tabSize - col % tabSize;\n      pos = nextTab + 1;\n\n      if (col >= goal) {\n        return pos;\n      }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n\n  function spaceStr(n) {\n    while (spaceStrs.length <= n) {\n      spaceStrs.push(lst(spaceStrs) + \" \");\n    }\n\n    return spaceStrs[n];\n  }\n\n  function lst(arr) {\n    return arr[arr.length - 1];\n  }\n\n  function map(array, f) {\n    var out = [];\n\n    for (var i = 0; i < array.length; i++) {\n      out[i] = f(array[i], i);\n    }\n\n    return out;\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0,\n        priority = score(value);\n\n    while (pos < array.length && score(array[pos]) <= priority) {\n      pos++;\n    }\n\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n\n    if (props) {\n      copyObj(props, inst);\n    }\n\n    return inst;\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" && (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch));\n  }\n\n  function isWordChar(ch, helper) {\n    if (!helper) {\n      return isWordCharBasic(ch);\n    }\n\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) {\n      return true;\n    }\n\n    return helper.test(ch);\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) {\n      if (obj.hasOwnProperty(n) && obj[n]) {\n        return false;\n      }\n    }\n\n    return true;\n  } // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n\n\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n\n  function isExtendingChar(ch) {\n    return ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n  } // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n\n\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) {\n      pos += dir;\n    }\n\n    return pos;\n  } // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n\n\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n\n    for (;;) {\n      if (from == to) {\n        return from;\n      }\n\n      var midF = (from + to) / 2,\n          mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n\n      if (mid == from) {\n        return pred(mid) ? from : to;\n      }\n\n      if (pred(mid)) {\n        to = mid;\n      } else {\n        from = mid + dir;\n      }\n    }\n  } // BIDI HELPERS\n\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) {\n      return f(from, to, \"ltr\", 0);\n    }\n\n    var found = false;\n\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n\n    if (!found) {\n      f(from, to, \"ltr\");\n    }\n  }\n\n  var bidiOther = null;\n\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n\n      if (cur.from < ch && cur.to > ch) {\n        return i;\n      }\n\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") {\n          found = i;\n        } else {\n          bidiOther = i;\n        }\n      }\n\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") {\n          found = i;\n        } else {\n          bidiOther = i;\n        }\n      }\n    }\n\n    return found != null ? found : bidiOther;\n  } // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n\n\n  var bidiOrdering = function () {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\"; // Character types for codepoints 0x600 to 0x6f9\n\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n\n    function charType(code) {\n      if (code <= 0xf7) {\n        return lowTypes.charAt(code);\n      } else if (0x590 <= code && code <= 0x5f4) {\n        return \"R\";\n      } else if (0x600 <= code && code <= 0x6f9) {\n        return arabicTypes.charAt(code - 0x600);\n      } else if (0x6ee <= code && code <= 0x8ac) {\n        return \"r\";\n      } else if (0x2000 <= code && code <= 0x200b) {\n        return \"w\";\n      } else if (code == 0x200c) {\n        return \"b\";\n      } else {\n        return \"L\";\n      }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/,\n        isStrong = /[LRr]/,\n        countsAsLeft = /[Lb1n]/,\n        countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from;\n      this.to = to;\n    }\n\n    return function (str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) {\n        return false;\n      }\n\n      var len = str.length,\n          types = [];\n\n      for (var i = 0; i < len; ++i) {\n        types.push(charType(str.charCodeAt(i)));\n      } // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n\n\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n\n        if (type == \"m\") {\n          types[i$1] = prev;\n        } else {\n          prev = type;\n        }\n      } // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n\n\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n\n        if (type$1 == \"1\" && cur == \"r\") {\n          types[i$2] = \"n\";\n        } else if (isStrong.test(type$1)) {\n          cur = type$1;\n\n          if (type$1 == \"r\") {\n            types[i$2] = \"R\";\n          }\n        }\n      } // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n\n\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3 + 1] == \"1\") {\n          types[i$3] = \"1\";\n        } else if (type$2 == \",\" && prev$1 == types[i$3 + 1] && (prev$1 == \"1\" || prev$1 == \"n\")) {\n          types[i$3] = prev$1;\n        }\n\n        prev$1 = type$2;\n      } // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n\n\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n\n        if (type$3 == \",\") {\n          types[i$4] = \"N\";\n        } else if (type$3 == \"%\") {\n          var end = void 0;\n\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n\n          var replace = i$4 && types[i$4 - 1] == \"!\" || end < len && types[end] == \"1\" ? \"1\" : \"N\";\n\n          for (var j = i$4; j < end; ++j) {\n            types[j] = replace;\n          }\n\n          i$4 = end - 1;\n        }\n      } // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n\n\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n\n        if (cur$1 == \"L\" && type$4 == \"1\") {\n          types[i$5] = \"L\";\n        } else if (isStrong.test(type$4)) {\n          cur$1 = type$4;\n        }\n      } // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n\n\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = void 0;\n\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n\n          var before = (i$6 ? types[i$6 - 1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? before ? \"L\" : \"R\" : outerType;\n\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) {\n            types[j$1] = replace$1;\n          }\n\n          i$6 = end$1 - 1;\n        }\n      } // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n\n\n      var order = [],\n          m;\n\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7,\n              at = order.length,\n              isRTL = direction == \"rtl\" ? 1 : 0;\n\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) {\n                order.splice(at, 0, new BidiSpan(1, pos, j$2));\n                at += isRTL;\n              }\n\n              var nstart = j$2;\n\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              at += isRTL;\n              pos = j$2;\n            } else {\n              ++j$2;\n            }\n          }\n\n          if (pos < i$7) {\n            order.splice(at, 0, new BidiSpan(1, pos, i$7));\n          }\n        }\n      }\n\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order;\n    };\n  }(); // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n\n\n  function getOrder(line, direction) {\n    var order = line.order;\n\n    if (order == null) {\n      order = line.order = bidiOrdering(line.text, direction);\n    }\n\n    return order;\n  } // EVENT HANDLING\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n\n  var noHandlers = [];\n\n  var on = function on(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers;\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers,\n          arr = map && map[type];\n\n      if (arr) {\n        var index = indexOf(arr, f);\n\n        if (index > -1) {\n          map[type] = arr.slice(0, index).concat(arr.slice(index + 1));\n        }\n      }\n    }\n  }\n\n  function signal(emitter, type\n  /*, values...*/\n  ) {\n    var handlers = getHandlers(emitter, type);\n\n    if (!handlers.length) {\n      return;\n    }\n\n    var args = Array.prototype.slice.call(arguments, 2);\n\n    for (var i = 0; i < handlers.length; ++i) {\n      handlers[i].apply(null, args);\n    }\n  } // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n\n\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\") {\n      e = {\n        type: e,\n        preventDefault: function preventDefault() {\n          this.defaultPrevented = true;\n        }\n      };\n    }\n\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore;\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n\n    if (!arr) {\n      return;\n    }\n\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n\n    for (var i = 0; i < arr.length; ++i) {\n      if (indexOf(set, arr[i]) == -1) {\n        set.push(arr[i]);\n      }\n    }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0;\n  } // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n\n\n  function eventMixin(ctor) {\n    ctor.prototype.on = function (type, f) {\n      on(this, type, f);\n    };\n\n    ctor.prototype.off = function (type, f) {\n      off(this, type, f);\n    };\n  } // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) {\n      e.preventDefault();\n    } else {\n      e.returnValue = false;\n    }\n  }\n\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    } else {\n      e.cancelBubble = true;\n    }\n  }\n\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false;\n  }\n\n  function e_stop(e) {\n    e_preventDefault(e);\n    e_stopPropagation(e);\n  }\n\n  function e_target(e) {\n    return e.target || e.srcElement;\n  }\n\n  function e_button(e) {\n    var b = e.which;\n\n    if (b == null) {\n      if (e.button & 1) {\n        b = 1;\n      } else if (e.button & 2) {\n        b = 3;\n      } else if (e.button & 4) {\n        b = 2;\n      }\n    }\n\n    if (mac && e.ctrlKey && b == 1) {\n      b = 3;\n    }\n\n    return b;\n  } // Detect drag-and-drop\n\n\n  var dragAndDrop = function () {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) {\n      return false;\n    }\n\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div;\n  }();\n\n  var zwspSupported;\n\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200B\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n\n      if (measure.firstChild.offsetHeight != 0) {\n        zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8);\n      }\n    }\n\n    var node = zwspSupported ? elt(\"span\", \"\\u200B\") : elt(\"span\", \"\\xA0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node;\n  } // Feature-detect IE's crummy client rect reporting for bidi text\n\n\n  var badBidiRects;\n\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) {\n      return badBidiRects;\n    }\n\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062EA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n\n    if (!r0 || r0.left == r0.right) {\n      return false;\n    } // Safari returns null in some cases (#2780)\n\n\n    return badBidiRects = r1.right - r0.right < 3;\n  } // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n\n\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0,\n        result = [],\n        l = string.length;\n\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n\n      if (nl == -1) {\n        nl = string.length;\n      }\n\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n\n    return result;\n  } : function (string) {\n    return string.split(/\\r\\n?|\\n/);\n  };\n  var hasSelection = window.getSelection ? function (te) {\n    try {\n      return te.selectionStart != te.selectionEnd;\n    } catch (e) {\n      return false;\n    }\n  } : function (te) {\n    var range;\n\n    try {\n      range = te.ownerDocument.selection.createRange();\n    } catch (e) {}\n\n    if (!range || range.parentElement() != te) {\n      return false;\n    }\n\n    return range.compareEndPoints(\"StartToEnd\", range) != 0;\n  };\n\n  var hasCopyEvent = function () {\n    var e = elt(\"div\");\n\n    if (\"oncopy\" in e) {\n      return true;\n    }\n\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\";\n  }();\n\n  var badZoomedRects = null;\n\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) {\n      return badZoomedRects;\n    }\n\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1;\n  } // Known modes, by name and by MIME\n\n\n  var modes = {},\n      mimeModes = {}; // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n\n  function defineMode(name, mode) {\n    if (arguments.length > 2) {\n      mode.dependencies = Array.prototype.slice.call(arguments, 2);\n    }\n\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  } // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n\n\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n\n      if (typeof found == \"string\") {\n        found = {\n          name: found\n        };\n      }\n\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\");\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\");\n    }\n\n    if (typeof spec == \"string\") {\n      return {\n        name: spec\n      };\n    } else {\n      return spec || {\n        name: \"null\"\n      };\n    }\n  } // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n\n\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n\n    if (!mfactory) {\n      return getMode(options, \"text/plain\");\n    }\n\n    var modeObj = mfactory(options, spec);\n\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) {\n          continue;\n        }\n\n        if (modeObj.hasOwnProperty(prop)) {\n          modeObj[\"_\" + prop] = modeObj[prop];\n        }\n\n        modeObj[prop] = exts[prop];\n      }\n    }\n\n    modeObj.name = spec.name;\n\n    if (spec.helperType) {\n      modeObj.helperType = spec.helperType;\n    }\n\n    if (spec.modeProps) {\n      for (var prop$1 in spec.modeProps) {\n        modeObj[prop$1] = spec.modeProps[prop$1];\n      }\n    }\n\n    return modeObj;\n  } // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n\n\n  var modeExtensions = {};\n\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : modeExtensions[mode] = {};\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) {\n      return state;\n    }\n\n    if (mode.copyState) {\n      return mode.copyState(state);\n    }\n\n    var nstate = {};\n\n    for (var n in state) {\n      var val = state[n];\n\n      if (val instanceof Array) {\n        val = val.concat([]);\n      }\n\n      nstate[n] = val;\n    }\n\n    return nstate;\n  } // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n\n\n  function innerMode(mode, state) {\n    var info;\n\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n\n      if (!info || info.mode == mode) {\n        break;\n      }\n\n      state = info.state;\n      mode = info.mode;\n    }\n\n    return info || {\n      mode: mode,\n      state: state\n    };\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true;\n  } // STRING STREAM\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n\n  var StringStream = function StringStream(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {\n    return this.pos >= this.string.length;\n  };\n\n  StringStream.prototype.sol = function () {\n    return this.pos == this.lineStart;\n  };\n\n  StringStream.prototype.peek = function () {\n    return this.string.charAt(this.pos) || undefined;\n  };\n\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length) {\n      return this.string.charAt(this.pos++);\n    }\n  };\n\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n\n    if (typeof match == \"string\") {\n      ok = ch == match;\n    } else {\n      ok = ch && (match.test ? match.test(ch) : match(ch));\n    }\n\n    if (ok) {\n      ++this.pos;\n      return ch;\n    }\n  };\n\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n\n    while (this.eat(match)) {}\n\n    return this.pos > start;\n  };\n\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) {\n      ++this.pos;\n    }\n\n    return this.pos > start;\n  };\n\n  StringStream.prototype.skipToEnd = function () {\n    this.pos = this.string.length;\n  };\n\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n\n    if (found > -1) {\n      this.pos = found;\n      return true;\n    }\n  };\n\n  StringStream.prototype.backUp = function (n) {\n    this.pos -= n;\n  };\n\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n  };\n\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0);\n  };\n\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function cased(str) {\n        return caseInsensitive ? str.toLowerCase() : str;\n      };\n\n      var substr = this.string.substr(this.pos, pattern.length);\n\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) {\n          this.pos += pattern.length;\n        }\n\n        return true;\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n\n      if (match && match.index > 0) {\n        return null;\n      }\n\n      if (match && consume !== false) {\n        this.pos += match[0].length;\n      }\n\n      return match;\n    }\n  };\n\n  StringStream.prototype.current = function () {\n    return this.string.slice(this.start, this.pos);\n  };\n\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n\n    try {\n      return inner();\n    } finally {\n      this.lineStart -= n;\n    }\n  };\n\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n);\n  };\n\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos);\n  }; // Find the line object corresponding to the given line number.\n\n\n  function getLine(doc, n) {\n    n -= doc.first;\n\n    if (n < 0 || n >= doc.size) {\n      throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\");\n    }\n\n    var chunk = doc;\n\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i],\n            sz = child.chunkSize();\n\n        if (n < sz) {\n          chunk = child;\n          break;\n        }\n\n        n -= sz;\n      }\n    }\n\n    return chunk.lines[n];\n  } // Get the part of a document between two positions, as an array of\n  // strings.\n\n\n  function getBetween(doc, start, end) {\n    var out = [],\n        n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n\n      if (n == end.line) {\n        text = text.slice(0, end.ch);\n      }\n\n      if (n == start.line) {\n        text = text.slice(start.ch);\n      }\n\n      out.push(text);\n      ++n;\n    });\n    return out;\n  } // Get the lines between from and to, as array of strings.\n\n\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) {\n      out.push(line.text);\n    }); // iter aborts when callback returns truthy value\n\n    return out;\n  } // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n\n\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n\n    if (diff) {\n      for (var n = line; n; n = n.parent) {\n        n.height += diff;\n      }\n    }\n  } // Given a line object, find its line number by walking up through\n  // its parent links.\n\n\n  function lineNo(line) {\n    if (line.parent == null) {\n      return null;\n    }\n\n    var cur = line.parent,\n        no = indexOf(cur.lines, line);\n\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) {\n          break;\n        }\n\n        no += chunk.children[i].chunkSize();\n      }\n    }\n\n    return no + cur.first;\n  } // Find the line at the given vertical position, using the height\n  // information in the document tree.\n\n\n  function _lineAtHeight(chunk, h) {\n    var n = chunk.first;\n\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1],\n            ch = child.height;\n\n        if (h < ch) {\n          chunk = child;\n          continue outer;\n        }\n\n        h -= ch;\n        n += child.chunkSize();\n      }\n\n      return n;\n    } while (!chunk.lines);\n\n    var i = 0;\n\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i],\n          lh = line.height;\n\n      if (h < lh) {\n        break;\n      }\n\n      h -= lh;\n    }\n\n    return n + i;\n  }\n\n  function isLine(doc, l) {\n    return l >= doc.first && l < doc.first + doc.size;\n  }\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber));\n  } // A Pos instance represents a position within the text.\n\n\n  function Pos(line, ch, sticky) {\n    if (sticky === void 0) sticky = null;\n\n    if (!(this instanceof Pos)) {\n      return new Pos(line, ch, sticky);\n    }\n\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  } // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n\n\n  function cmp(a, b) {\n    return a.line - b.line || a.ch - b.ch;\n  }\n\n  function equalCursorPos(a, b) {\n    return a.sticky == b.sticky && cmp(a, b) == 0;\n  }\n\n  function copyPos(x) {\n    return Pos(x.line, x.ch);\n  }\n\n  function maxPos(a, b) {\n    return cmp(a, b) < 0 ? b : a;\n  }\n\n  function minPos(a, b) {\n    return cmp(a, b) < 0 ? a : b;\n  } // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n\n\n  function clipLine(doc, n) {\n    return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1));\n  }\n\n  function _clipPos(doc, pos) {\n    if (pos.line < doc.first) {\n      return Pos(doc.first, 0);\n    }\n\n    var last = doc.first + doc.size - 1;\n\n    if (pos.line > last) {\n      return Pos(last, getLine(doc, last).text.length);\n    }\n\n    return clipToLen(pos, getLine(doc, pos.line).text.length);\n  }\n\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n\n    if (ch == null || ch > linelen) {\n      return Pos(pos.line, linelen);\n    } else if (ch < 0) {\n      return Pos(pos.line, 0);\n    } else {\n      return pos;\n    }\n  }\n\n  function clipPosArray(doc, array) {\n    var out = [];\n\n    for (var i = 0; i < array.length; i++) {\n      out[i] = _clipPos(doc, array[i]);\n    }\n\n    return out;\n  }\n\n  var SavedContext = function SavedContext(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function Context(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n\n    if (line != null && n > this.maxLookAhead) {\n      this.maxLookAhead = n;\n    }\n\n    return line;\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) {\n      return null;\n    }\n\n    while (this.baseTokens[this.baseTokenPos] <= n) {\n      this.baseTokenPos += 2;\n    }\n\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {\n      type: type && type.replace(/( |^)overlay .*/, \"\"),\n      size: this.baseTokens[this.baseTokenPos] - n\n    };\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n\n    if (this.maxLookAhead > 0) {\n      this.maxLookAhead--;\n    }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext) {\n      return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead);\n    } else {\n      return new Context(doc, copyState(doc.mode, saved), line);\n    }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state;\n  }; // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n\n\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen],\n        lineClasses = {}; // Compute the base array of styles\n\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) {\n      return st.push(end, style);\n    }, lineClasses, forceToEnd);\n    var state = context.state; // Run overlays, adjust style array.\n\n    var loop = function loop(o) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o],\n          i = 1,\n          at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i; // Ensure there's a token end at the current position, and that i points at it\n\n        while (at < end) {\n          var i_end = st[i];\n\n          if (i_end > end) {\n            st.splice(i, 1, end, st[i + 1], i_end);\n          }\n\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n\n        if (!style) {\n          return;\n        }\n\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start + 1];\n            st[start + 1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) {\n      loop(o);\n    }\n\n    return {\n      styles: st,\n      classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null\n    };\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n\n      if (resetState) {\n        context.state = resetState;\n      }\n\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n\n      if (result.classes) {\n        line.styleClasses = result.classes;\n      } else if (line.styleClasses) {\n        line.styleClasses = null;\n      }\n\n      if (updateFrontier === cm.doc.highlightFrontier) {\n        cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier);\n      }\n    }\n\n    return line.styles;\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc,\n        display = cm.display;\n\n    if (!doc.mode.startState) {\n      return new Context(doc, true, n);\n    }\n\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n\n    if (precise) {\n      doc.modeFrontier = context.line;\n    }\n\n    return context;\n  } // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n\n\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n\n    if (text == \"\") {\n      callBlankLine(mode, context.state);\n    }\n\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) {\n      return mode.blankLine(state);\n    }\n\n    if (!mode.innerMode) {\n      return;\n    }\n\n    var inner = innerMode(mode, state);\n\n    if (inner.mode.blankLine) {\n      return inner.mode.blankLine(inner.state);\n    }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) {\n        inner[0] = innerMode(mode, state).mode;\n      }\n\n      var style = mode.token(stream, state);\n\n      if (stream.pos > stream.start) {\n        return style;\n      }\n    }\n\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\");\n  }\n\n  var Token = function Token(stream, type, state) {\n    this.start = stream.start;\n    this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  }; // Utility for getTokenAt and getLineTokens\n\n\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc,\n        mode = doc.mode,\n        style;\n    pos = _clipPos(doc, pos);\n    var line = getLine(doc, pos.line),\n        context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context),\n        tokens;\n\n    if (asArray) {\n      tokens = [];\n    }\n\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n\n      if (asArray) {\n        tokens.push(new Token(stream, style, copyState(doc.mode, context.state)));\n      }\n    }\n\n    return asArray ? tokens : new Token(stream, style, context.state);\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) {\n      for (;;) {\n        var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n\n        if (!lineClass) {\n          break;\n        }\n\n        type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n        var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n\n        if (output[prop] == null) {\n          output[prop] = lineClass[2];\n        } else if (!new RegExp(\"(?:^|\\s)\" + lineClass[2] + \"(?:$|\\s)\").test(output[prop])) {\n          output[prop] += \" \" + lineClass[2];\n        }\n      }\n    }\n\n    return type;\n  } // Run the given mode's parser over a line, calling f for each token.\n\n\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n\n    if (flattenSpans == null) {\n      flattenSpans = cm.options.flattenSpans;\n    }\n\n    var curStart = 0,\n        curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context),\n        style;\n    var inner = cm.options.addModeClass && [null];\n\n    if (text == \"\") {\n      extractLineClasses(callBlankLine(mode, context.state), lineClasses);\n    }\n\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n\n        if (forceToEnd) {\n          processLine(cm, text, context, stream.pos);\n        }\n\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n\n      if (inner) {\n        var mName = inner[0].name;\n\n        if (mName) {\n          style = \"m-\" + (style ? mName + \" \" + style : mName);\n        }\n      }\n\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n\n        curStyle = style;\n      }\n\n      stream.start = stream.pos;\n    }\n\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  } // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n\n\n  function findStartLine(cm, n, precise) {\n    var minindent,\n        minline,\n        doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) {\n        return doc.first;\n      }\n\n      var line = getLine(doc, search - 1),\n          after = line.stateAfter;\n\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier)) {\n        return search;\n      }\n\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n\n    return minline;\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n\n    if (doc.highlightFrontier < n - 10) {\n      return;\n    }\n\n    var start = doc.first;\n\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter; // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break;\n      }\n    }\n\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  } // Optimize some code when these features are not used.\n\n\n  var sawReadOnlySpans = false,\n      sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  } // TEXTMARKER SPANS\n\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from;\n    this.to = to;\n  } // Search an array of spans for a span matching the given marker.\n\n\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) {\n      for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n\n        if (span.marker == marker) {\n          return span;\n        }\n      }\n    }\n  } // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n\n\n  function removeMarkedSpan(spans, span) {\n    var r;\n\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i] != span) {\n        (r || (r = [])).push(spans[i]);\n      }\n    }\n\n    return r;\n  } // Add a span to a line.\n\n\n  function addMarkedSpan(line, span) {\n    line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n    span.marker.attachLine(line);\n  } // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n\n\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n\n    if (old) {\n      for (var i = 0; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n\n        if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n          var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n        }\n      }\n    }\n\n    return nw;\n  }\n\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n\n    if (old) {\n      for (var i = 0; i < old.length; ++i) {\n        var span = old[i],\n            marker = span.marker;\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n\n        if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n          var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh);\n          (nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh, span.to == null ? null : span.to - endCh));\n        }\n      }\n    }\n\n    return nw;\n  } // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n\n\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) {\n      return null;\n    }\n\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n\n    if (!oldFirst && !oldLast) {\n      return null;\n    }\n\n    var startCh = change.from.ch,\n        endCh = change.to.ch,\n        isInsert = cmp(change.from, change.to) == 0; // Get the spans that 'stick out' on both sides\n\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert); // Next, merge those two ends\n\n    var sameLine = change.text.length == 1,\n        offset = lst(change.text).length + (sameLine ? startCh : 0);\n\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n\n          if (!found) {\n            span.to = startCh;\n          } else if (sameLine) {\n            span.to = found.to == null ? null : found.to + offset;\n          }\n        }\n      }\n    }\n\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n\n        if (span$1.to != null) {\n          span$1.to += offset;\n        }\n\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n\n          if (!found$1) {\n            span$1.from = offset;\n\n            if (sameLine) {\n              (first || (first = [])).push(span$1);\n            }\n          }\n        } else {\n          span$1.from += offset;\n\n          if (sameLine) {\n            (first || (first = [])).push(span$1);\n          }\n        }\n      }\n    } // Make sure we didn't create any zero-length spans\n\n\n    if (first) {\n      first = clearEmptySpans(first);\n    }\n\n    if (last && last != first) {\n      last = clearEmptySpans(last);\n    }\n\n    var newMarkers = [first];\n\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2,\n          gapMarkers;\n\n      if (gap > 0 && first) {\n        for (var i$2 = 0; i$2 < first.length; ++i$2) {\n          if (first[i$2].to == null) {\n            (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null));\n          }\n        }\n      }\n\n      for (var i$3 = 0; i$3 < gap; ++i$3) {\n        newMarkers.push(gapMarkers);\n      }\n\n      newMarkers.push(last);\n    }\n\n    return newMarkers;\n  } // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n\n\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false) {\n        spans.splice(i--, 1);\n      }\n    }\n\n    if (!spans.length) {\n      return null;\n    }\n\n    return spans;\n  } // Used to 'clip' out readOnly ranges when making a change.\n\n\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) {\n        for (var i = 0; i < line.markedSpans.length; ++i) {\n          var mark = line.markedSpans[i].marker;\n\n          if (mark.readOnly && (!markers || indexOf(markers, mark) == -1)) {\n            (markers || (markers = [])).push(mark);\n          }\n        }\n      }\n    });\n\n    if (!markers) {\n      return null;\n    }\n\n    var parts = [{\n      from: from,\n      to: to\n    }];\n\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i],\n          m = mk.find(0);\n\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) {\n          continue;\n        }\n\n        var newParts = [j, 1],\n            dfrom = cmp(p.from, m.from),\n            dto = cmp(p.to, m.to);\n\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom) {\n          newParts.push({\n            from: p.from,\n            to: m.from\n          });\n        }\n\n        if (dto > 0 || !mk.inclusiveRight && !dto) {\n          newParts.push({\n            from: m.to,\n            to: p.to\n          });\n        }\n\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n\n    return parts;\n  } // Connect or disconnect spans from a line.\n\n\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n\n    if (!spans) {\n      return;\n    }\n\n    for (var i = 0; i < spans.length; ++i) {\n      spans[i].marker.detachLine(line);\n    }\n\n    line.markedSpans = null;\n  }\n\n  function attachMarkedSpans(line, spans) {\n    if (!spans) {\n      return;\n    }\n\n    for (var i = 0; i < spans.length; ++i) {\n      spans[i].marker.attachLine(line);\n    }\n\n    line.markedSpans = spans;\n  } // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n\n\n  function extraLeft(marker) {\n    return marker.inclusiveLeft ? -1 : 0;\n  }\n\n  function extraRight(marker) {\n    return marker.inclusiveRight ? 1 : 0;\n  } // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n\n\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n\n    if (lenDiff != 0) {\n      return lenDiff;\n    }\n\n    var aPos = a.find(),\n        bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n\n    if (fromCmp) {\n      return -fromCmp;\n    }\n\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n\n    if (toCmp) {\n      return toCmp;\n    }\n\n    return b.id - a.id;\n  } // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n\n\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans,\n        found;\n\n    if (sps) {\n      for (var sp = void 0, i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n\n        if (sp.marker.collapsed && (start ? sp.from : sp.to) == null && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n          found = sp.marker;\n        }\n      }\n    }\n\n    return found;\n  }\n\n  function collapsedSpanAtStart(line) {\n    return collapsedSpanAtSide(line, true);\n  }\n\n  function collapsedSpanAtEnd(line) {\n    return collapsedSpanAtSide(line, false);\n  }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans,\n        found;\n\n    if (sps) {\n      for (var i = 0; i < sps.length; ++i) {\n        var sp = sps[i];\n\n        if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) && (!found || compareCollapsedMarkers(found, sp.marker) < 0)) {\n          found = sp.marker;\n        }\n      }\n    }\n\n    return found;\n  } // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n\n\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n\n    if (sps) {\n      for (var i = 0; i < sps.length; ++i) {\n        var sp = sps[i];\n\n        if (!sp.marker.collapsed) {\n          continue;\n        }\n\n        var found = sp.marker.find(0);\n        var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n        var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n\n        if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) {\n          continue;\n        }\n\n        if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) || fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0)) {\n          return true;\n        }\n      }\n    }\n  } // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n\n\n  function visualLine(line) {\n    var merged;\n\n    while (merged = collapsedSpanAtStart(line)) {\n      line = merged.find(-1, true).line;\n    }\n\n    return line;\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n    }\n\n    return line;\n  } // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n\n\n  function visualLineContinued(line) {\n    var merged, lines;\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n      (lines || (lines = [])).push(line);\n    }\n\n    return lines;\n  } // Get the line number of the start of the visual line that the\n  // given line number is part of.\n\n\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN),\n        vis = visualLine(line);\n\n    if (line == vis) {\n      return lineN;\n    }\n\n    return lineNo(vis);\n  } // Get the line number of the start of the next visual line after\n  // the given line.\n\n\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) {\n      return lineN;\n    }\n\n    var line = getLine(doc, lineN),\n        merged;\n\n    if (!lineIsHidden(doc, line)) {\n      return lineN;\n    }\n\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line;\n    }\n\n    return lineNo(line) + 1;\n  } // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n\n\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n\n    if (sps) {\n      for (var sp = void 0, i = 0; i < sps.length; ++i) {\n        sp = sps[i];\n\n        if (!sp.marker.collapsed) {\n          continue;\n        }\n\n        if (sp.from == null) {\n          return true;\n        }\n\n        if (sp.marker.widgetNode) {\n          continue;\n        }\n\n        if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp)) {\n          return true;\n        }\n      }\n    }\n  }\n\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker));\n    }\n\n    if (span.marker.inclusiveRight && span.to == line.text.length) {\n      return true;\n    }\n\n    for (var sp = void 0, i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to && (sp.to == null || sp.to != span.from) && (sp.marker.inclusiveLeft || span.marker.inclusiveRight) && lineIsHiddenInner(doc, line, sp)) {\n        return true;\n      }\n    }\n  } // Find the height above the given line.\n\n\n  function _heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n    var h = 0,\n        chunk = lineObj.parent;\n\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n\n      if (line == lineObj) {\n        break;\n      } else {\n        h += line.height;\n      }\n    }\n\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n\n        if (cur == chunk) {\n          break;\n        } else {\n          h += cur.height;\n        }\n      }\n    }\n\n    return h;\n  } // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n\n\n  function lineLength(line) {\n    if (line.height == 0) {\n      return 0;\n    }\n\n    var len = line.text.length,\n        merged,\n        cur = line;\n\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n\n    cur = line;\n\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n\n    return len;\n  } // Find the longest line in the document.\n\n\n  function findMaxLine(cm) {\n    var d = cm.display,\n        doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  } // LINE DATA STRUCTURE\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n\n\n  var Line = function Line(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () {\n    return lineNo(this);\n  };\n\n  eventMixin(Line); // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n\n    if (line.stateAfter) {\n      line.stateAfter = null;\n    }\n\n    if (line.styles) {\n      line.styles = null;\n    }\n\n    if (line.order != null) {\n      line.order = null;\n    }\n\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n\n    if (estHeight != line.height) {\n      updateLineHeight(line, estHeight);\n    }\n  } // Detach a line from the document tree and its markers.\n\n\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  } // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n\n\n  var styleToClassCache = {},\n      styleToClassCacheWithMode = {};\n\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) {\n      return null;\n    }\n\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] || (cache[style] = style.replace(/\\S+/g, \"cm-$&\"));\n  } // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n\n\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {\n      pre: eltP(\"pre\", [content], \"CodeMirror-line\"),\n      content: content,\n      col: 0,\n      pos: 0,\n      cm: cm,\n      trailingSpace: false,\n      splitSpaces: cm.getOption(\"lineWrapping\")\n    };\n    lineView.measure = {}; // Iterate over the logical lines that make up this visual line.\n\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line,\n          order = void 0;\n      builder.pos = 0;\n      builder.addToken = buildToken; // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction))) {\n        builder.addToken = buildTokenBadBidi(builder.addToken, order);\n      }\n\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass) {\n          builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\");\n        }\n\n        if (line.styleClasses.textClass) {\n          builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\");\n        }\n      } // Ensure at least a single node is present, for measuring.\n\n\n      if (builder.map.length == 0) {\n        builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure)));\n      } // Store the map and a cache object for the current logical line\n\n\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n        (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map);\n        (lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    } // See issue #2901\n\n\n    if (webkit) {\n      var last = builder.content.lastChild;\n\n      if (/\\bcm-tab\\b/.test(last.className) || last.querySelector && last.querySelector(\".cm-tab\")) {\n        builder.content.className = \"cm-tab-wrap-hack\";\n      }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n\n    if (builder.pre.className) {\n      builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\");\n    }\n\n    return builder;\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token;\n  } // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n\n\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) {\n      return;\n    }\n\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars,\n        mustWrap = false;\n    var content;\n\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n\n      if (ie && ie_version < 9) {\n        mustWrap = true;\n      }\n\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n\n          if (ie && ie_version < 9) {\n            content.appendChild(elt(\"span\", [txt]));\n          } else {\n            content.appendChild(txt);\n          }\n\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n\n        if (!m) {\n          break;\n        }\n\n        pos += skipped + 1;\n        var txt$1 = void 0;\n\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize,\n              tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240D\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n\n          if (ie && ie_version < 9) {\n            content.appendChild(elt(\"span\", [txt$1]));\n          } else {\n            content.appendChild(txt$1);\n          }\n\n          builder.col += 1;\n        }\n\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n\n    if (style || startStyle || endStyle || mustWrap || css) {\n      var fullStyle = style || \"\";\n\n      if (startStyle) {\n        fullStyle += startStyle;\n      }\n\n      if (endStyle) {\n        fullStyle += endStyle;\n      }\n\n      var token = elt(\"span\", [content], fullStyle, css);\n\n      if (attributes) {\n        for (var attr in attributes) {\n          if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\") {\n            token.setAttribute(attr, attributes[attr]);\n          }\n        }\n      }\n\n      return builder.content.appendChild(token);\n    }\n\n    builder.content.appendChild(content);\n  } // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n\n\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) {\n      return text;\n    }\n\n    var spaceBefore = trailingBefore,\n        result = \"\";\n\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32)) {\n        ch = \"\\xA0\";\n      }\n\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n\n    return result;\n  } // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n\n\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos,\n          end = start + text.length;\n\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = void 0;\n\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n\n          if (part.to > start && part.from <= start) {\n            break;\n          }\n        }\n\n        if (part.to >= end) {\n          return inner(builder, text, style, startStyle, endStyle, css, attributes);\n        }\n\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    };\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n\n    if (widget) {\n      builder.map.push(builder.pos, builder.pos + size, widget);\n    }\n\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget) {\n        widget = builder.content.appendChild(document.createElement(\"span\"));\n      }\n\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n\n    builder.pos += size;\n    builder.trailingSpace = false;\n  } // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n\n\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans,\n        allText = line.text,\n        at = 0;\n\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1 += 2) {\n        builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1 + 1], builder.cm.options));\n      }\n\n      return;\n    }\n\n    var len = allText.length,\n        pos = 0,\n        i = 1,\n        text = \"\",\n        style,\n        css;\n    var nextChange = 0,\n        spanStyle,\n        spanEndStyle,\n        spanStartStyle,\n        collapsed,\n        attributes;\n\n    for (;;) {\n      if (nextChange == pos) {\n        // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null;\n        nextChange = Infinity;\n        var foundBookmarks = [],\n            endStyles = void 0;\n\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j],\n              m = sp.marker;\n\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n\n            if (m.className) {\n              spanStyle += \" \" + m.className;\n            }\n\n            if (m.css) {\n              css = (css ? css + \";\" : \"\") + m.css;\n            }\n\n            if (m.startStyle && sp.from == pos) {\n              spanStartStyle += \" \" + m.startStyle;\n            }\n\n            if (m.endStyle && sp.to == nextChange) {\n              (endStyles || (endStyles = [])).push(m.endStyle, sp.to);\n            } // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n\n\n            if (m.title) {\n              (attributes || (attributes = {})).title = m.title;\n            }\n\n            if (m.attributes) {\n              for (var attr in m.attributes) {\n                (attributes || (attributes = {}))[attr] = m.attributes[attr];\n              }\n            }\n\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0)) {\n              collapsed = sp;\n            }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n\n        if (endStyles) {\n          for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2) {\n            if (endStyles[j$1 + 1] == nextChange) {\n              spanEndStyle += \" \" + endStyles[j$1];\n            }\n          }\n        }\n\n        if (!collapsed || collapsed.from == pos) {\n          for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2) {\n            buildCollapsedSpan(builder, 0, foundBookmarks[j$2]);\n          }\n        }\n\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos, collapsed.marker, collapsed.from == null);\n\n          if (collapsed.to == null) {\n            return;\n          }\n\n          if (collapsed.to == pos) {\n            collapsed = false;\n          }\n        }\n      }\n\n      if (pos >= len) {\n        break;\n      }\n\n      var upto = Math.min(len, nextChange);\n\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle, spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n\n          if (end >= upto) {\n            text = text.slice(upto - pos);\n            pos = upto;\n            break;\n          }\n\n          pos = end;\n          spanStartStyle = \"\";\n        }\n\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  } // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n\n\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line; // Continuing lines, if any\n\n    this.rest = visualLineContinued(line); // Number of logical lines in this visual line\n\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  } // Create a range of LineView objects for the given lines.\n\n\n  function buildViewArray(cm, from, to) {\n    var array = [],\n        nextPos;\n\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n\n    return array;\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks,\n        i = 0;\n\n    do {\n      for (; i < callbacks.length; i++) {\n        callbacks[i].call(null);\n      }\n\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n\n        if (op.cursorActivityHandlers) {\n          while (op.cursorActivityCalled < op.cursorActivityHandlers.length) {\n            op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm);\n          }\n        }\n      }\n    } while (i < callbacks.length);\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n\n    if (!group) {\n      return;\n    }\n\n    try {\n      fireCallbacksForOps(group);\n    } finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null; // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n\n  function signalLater(emitter, type\n  /*, values...*/\n  ) {\n    var arr = getHandlers(emitter, type);\n\n    if (!arr.length) {\n      return;\n    }\n\n    var args = Array.prototype.slice.call(arguments, 2),\n        list;\n\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n\n    var loop = function loop(i) {\n      list.push(function () {\n        return arr[i].apply(null, args);\n      });\n    };\n\n    for (var i = 0; i < arr.length; ++i) {\n      loop(i);\n    }\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n\n    for (var i = 0; i < delayed.length; ++i) {\n      delayed[i]();\n    }\n  } // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n\n\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n\n      if (type == \"text\") {\n        updateLineText(cm, lineView);\n      } else if (type == \"gutter\") {\n        updateLineGutter(cm, lineView, lineN, dims);\n      } else if (type == \"class\") {\n        updateLineClasses(cm, lineView);\n      } else if (type == \"widget\") {\n        updateLineWidgets(cm, lineView, dims);\n      }\n    }\n\n    lineView.changes = null;\n  } // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n\n\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n\n      if (lineView.text.parentNode) {\n        lineView.text.parentNode.replaceChild(lineView.node, lineView.text);\n      }\n\n      lineView.node.appendChild(lineView.text);\n\n      if (ie && ie_version < 8) {\n        lineView.node.style.zIndex = 2;\n      }\n    }\n\n    return lineView.node;\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n\n    if (cls) {\n      cls += \" CodeMirror-linebackground\";\n    }\n\n    if (lineView.background) {\n      if (cls) {\n        lineView.background.className = cls;\n      } else {\n        lineView.background.parentNode.removeChild(lineView.background);\n        lineView.background = null;\n      }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  } // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n\n\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built;\n    }\n\n    return buildLineContent(cm, lineView);\n  } // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n\n\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n\n    if (lineView.text == lineView.node) {\n      lineView.node = built.pre;\n    }\n\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n\n    if (lineView.line.wrapClass) {\n      ensureLineWrapped(lineView).className = lineView.line.wrapClass;\n    } else if (lineView.node != lineView.text) {\n      lineView.node.className = \"\";\n    }\n\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass, \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + dims.gutterTotalWidth + \"px\");\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n\n    var markers = lineView.line.gutterMarkers;\n\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", \"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n\n      if (lineView.line.gutterClass) {\n        gutterWrap.className += \" \" + lineView.line.gutterClass;\n      }\n\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"])) {\n        lineView.lineNumber = gutterWrap.appendChild(elt(\"div\", lineNumberFor(cm.options, lineN), \"CodeMirror-linenumber CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[\"CodeMirror-linenumbers\"] + \"px; width: \" + cm.display.lineNumInnerWidth + \"px\"));\n      }\n\n      if (markers) {\n        for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n          var id = cm.display.gutterSpecs[k].className,\n              found = markers.hasOwnProperty(id) && markers[id];\n\n          if (found) {\n            gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\", \"left: \" + dims.gutterLeft[id] + \"px; width: \" + dims.gutterWidth[id] + \"px\"));\n          }\n        }\n      }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) {\n      lineView.alignable = null;\n    }\n\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n\n    for (var node = lineView.node.firstChild, next = void 0; node; node = next) {\n      next = node.nextSibling;\n\n      if (isWidget.test(node.className)) {\n        lineView.node.removeChild(node);\n      }\n    }\n\n    insertLineWidgets(cm, lineView, dims);\n  } // Build a line's DOM representation from scratch\n\n\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n\n    if (built.bgClass) {\n      lineView.bgClass = built.bgClass;\n    }\n\n    if (built.textClass) {\n      lineView.textClass = built.textClass;\n    }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node;\n  } // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n\n\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n\n    if (lineView.rest) {\n      for (var i = 0; i < lineView.rest.length; i++) {\n        insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false);\n      }\n    }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) {\n      return;\n    }\n\n    var wrap = ensureLineWrapped(lineView);\n\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i],\n          node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n\n      if (!widget.handleMouseEvents) {\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n      }\n\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n\n      if (allowAbove && widget.above) {\n        wrap.insertBefore(node, lineView.gutter || lineView.text);\n      } else {\n        wrap.appendChild(node);\n      }\n\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n      (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n\n      node.style.width = width + \"px\";\n    }\n\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n\n      if (!widget.noHScroll) {\n        node.style.marginLeft = -dims.gutterTotalWidth + \"px\";\n      }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) {\n      return widget.height;\n    }\n\n    var cm = widget.doc.cm;\n\n    if (!cm) {\n      return 0;\n    }\n\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n\n      if (widget.coverGutter) {\n        parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\";\n      }\n\n      if (widget.noHScroll) {\n        parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\";\n      }\n\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n\n    return widget.height = widget.node.parentNode.offsetHeight;\n  } // Return true when the given mouse event happened in a widget\n\n\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\" || n.parentNode == display.sizer && n != display.mover) {\n        return true;\n      }\n    }\n  } // POSITION MEASUREMENT\n\n\n  function paddingTop(display) {\n    return display.lineSpace.offsetTop;\n  }\n\n  function paddingVert(display) {\n    return display.mover.offsetHeight - display.lineSpace.offsetHeight;\n  }\n\n  function paddingH(display) {\n    if (display.cachedPaddingH) {\n      return display.cachedPaddingH;\n    }\n\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {\n      left: parseInt(style.paddingLeft),\n      right: parseInt(style.paddingRight)\n    };\n\n    if (!isNaN(data.left) && !isNaN(data.right)) {\n      display.cachedPaddingH = data;\n    }\n\n    return data;\n  }\n\n  function scrollGap(cm) {\n    return scrollerGap - cm.display.nativeBarWidth;\n  }\n\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth;\n  }\n\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight;\n  } // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n\n\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i],\n              next = rects[i + 1];\n\n          if (Math.abs(cur.bottom - next.bottom) > 2) {\n            heights.push((cur.bottom + next.top) / 2 - rect.top);\n          }\n        }\n      }\n\n      heights.push(rect.bottom - rect.top);\n    }\n  } // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n\n\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line) {\n      return {\n        map: lineView.measure.map,\n        cache: lineView.measure.cache\n      };\n    }\n\n    for (var i = 0; i < lineView.rest.length; i++) {\n      if (lineView.rest[i] == line) {\n        return {\n          map: lineView.measure.maps[i],\n          cache: lineView.measure.caches[i]\n        };\n      }\n    }\n\n    for (var i$1 = 0; i$1 < lineView.rest.length; i$1++) {\n      if (lineNo(lineView.rest[i$1]) > lineN) {\n        return {\n          map: lineView.measure.maps[i$1],\n          cache: lineView.measure.caches[i$1],\n          before: true\n        };\n      }\n    }\n  } // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n\n\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view;\n  } // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n\n\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias);\n  } // Find a line view that corresponds to the given line number.\n\n\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo) {\n      return cm.display.view[findViewIndex(cm, lineN)];\n    }\n\n    var ext = cm.display.externalMeasured;\n\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size) {\n      return ext;\n    }\n  } // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n\n\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n\n    if (!view) {\n      view = updateExternalMeasurement(cm, line);\n    }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line,\n      view: view,\n      rect: null,\n      map: info.map,\n      cache: info.cache,\n      before: info.before,\n      hasHeights: false\n    };\n  } // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n\n\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) {\n      ch = -1;\n    }\n\n    var key = ch + (bias || \"\"),\n        found;\n\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect) {\n        prepared.rect = prepared.view.text.getBoundingClientRect();\n      }\n\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n\n      found = measureCharInner(cm, prepared, ch, bias);\n\n      if (!found.bogus) {\n        prepared.cache[key] = found;\n      }\n    }\n\n    return {\n      left: found.left,\n      right: found.right,\n      top: varHeight ? found.rtop : found.top,\n      bottom: varHeight ? found.rbottom : found.bottom\n    };\n  }\n\n  var nullRect = {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  };\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd; // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n\n      if (ch < mStart) {\n        start = 0;\n        end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n\n        if (ch >= mEnd) {\n          collapse = \"right\";\n        }\n      }\n\n      if (start != null) {\n        node = map[i + 2];\n\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\")) {\n          collapse = bias;\n        }\n\n        if (bias == \"left\" && start == 0) {\n          while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          }\n        }\n\n        if (bias == \"right\" && start == mEnd - mStart) {\n          while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          }\n        }\n\n        break;\n      }\n    }\n\n    return {\n      node: node,\n      start: start,\n      end: end,\n      collapse: collapse,\n      coverStart: mStart,\n      coverEnd: mEnd\n    };\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n\n    if (bias == \"left\") {\n      for (var i = 0; i < rects.length; i++) {\n        if ((rect = rects[i]).left != rect.right) {\n          break;\n        }\n      }\n    } else {\n      for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n        if ((rect = rects[i$1]).left != rect.right) {\n          break;\n        }\n      }\n    }\n\n    return rect;\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node,\n        start = place.start,\n        end = place.end,\n        collapse = place.collapse;\n    var rect;\n\n    if (node.nodeType == 3) {\n      // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) {\n        // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) {\n          --start;\n        }\n\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) {\n          ++end;\n        }\n\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart) {\n          rect = node.parentNode.getBoundingClientRect();\n        } else {\n          rect = getUsefulRect(range(node, start, end).getClientRects(), bias);\n        }\n\n        if (rect.left || rect.right || start == 0) {\n          break;\n        }\n\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n\n      if (ie && ie_version < 11) {\n        rect = maybeUpdateRectForZooming(cm.display.measure, rect);\n      }\n    } else {\n      // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) {\n        collapse = bias = \"right\";\n      }\n\n      var rects;\n\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1) {\n        rect = rects[bias == \"right\" ? rects.length - 1 : 0];\n      } else {\n        rect = node.getBoundingClientRect();\n      }\n    }\n\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n\n      if (rSpan) {\n        rect = {\n          left: rSpan.left,\n          right: rSpan.left + charWidth(cm.display),\n          top: rSpan.top,\n          bottom: rSpan.bottom\n        };\n      } else {\n        rect = nullRect;\n      }\n    }\n\n    var rtop = rect.top - prepared.rect.top,\n        rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n\n    for (; i < heights.length - 1; i++) {\n      if (mid < heights[i]) {\n        break;\n      }\n    }\n\n    var top = i ? heights[i - 1] : 0,\n        bot = heights[i];\n    var result = {\n      left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n      right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n      top: top,\n      bottom: bot\n    };\n\n    if (!rect.left && !rect.right) {\n      result.bogus = true;\n    }\n\n    if (!cm.options.singleCursorHeightPerLine) {\n      result.rtop = rtop;\n      result.rbottom = rbot;\n    }\n\n    return result;\n  } // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n\n\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure)) {\n      return rect;\n    }\n\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {\n      left: rect.left * scaleX,\n      right: rect.right * scaleX,\n      top: rect.top * scaleY,\n      bottom: rect.bottom * scaleY\n    };\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n\n      if (lineView.rest) {\n        for (var i = 0; i < lineView.rest.length; i++) {\n          lineView.measure.caches[i] = {};\n        }\n      }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n\n    for (var i = 0; i < cm.display.view.length; i++) {\n      clearLineMeasurementCacheFor(cm.display.view[i]);\n    }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n\n    if (!cm.options.lineWrapping) {\n      cm.display.maxLineChanged = true;\n    }\n\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX() {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) {\n      return -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft));\n    }\n\n    return window.pageXOffset || (document.documentElement || document.body).scrollLeft;\n  }\n\n  function pageScrollY() {\n    if (chrome && android) {\n      return -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop));\n    }\n\n    return window.pageYOffset || (document.documentElement || document.body).scrollTop;\n  }\n\n  function widgetTopHeight(lineObj) {\n    var height = 0;\n\n    if (lineObj.widgets) {\n      for (var i = 0; i < lineObj.widgets.length; ++i) {\n        if (lineObj.widgets[i].above) {\n          height += widgetHeight(lineObj.widgets[i]);\n        }\n      }\n    }\n\n    return height;\n  } // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n\n\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height;\n      rect.bottom += height;\n    }\n\n    if (context == \"line\") {\n      return rect;\n    }\n\n    if (!context) {\n      context = \"local\";\n    }\n\n    var yOff = _heightAtLine(lineObj);\n\n    if (context == \"local\") {\n      yOff += paddingTop(cm.display);\n    } else {\n      yOff -= cm.display.viewOffset;\n    }\n\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY());\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX());\n      rect.left += xOff;\n      rect.right += xOff;\n    }\n\n    rect.top += yOff;\n    rect.bottom += yOff;\n    return rect;\n  } // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n\n\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") {\n      return coords;\n    }\n\n    var left = coords.left,\n        top = coords.top; // First move into \"page\" coordinate system\n\n    if (context == \"page\") {\n      left -= pageScrollX();\n      top -= pageScrollY();\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {\n      left: left - lineSpaceBox.left,\n      top: top - lineSpaceBox.top\n    };\n  }\n\n  function _charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) {\n      lineObj = getLine(cm.doc, pos.line);\n    }\n\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context);\n  } // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n\n\n  function _cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n\n    if (!preparedMeasure) {\n      preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    }\n\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n\n      if (right) {\n        m.left = m.right;\n      } else {\n        m.right = m.left;\n      }\n\n      return intoCoordSystem(cm, lineObj, m, context);\n    }\n\n    var order = getOrder(lineObj, cm.doc.direction),\n        ch = pos.ch,\n        sticky = pos.sticky;\n\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n\n    if (!order) {\n      return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\");\n    }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos],\n          right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert);\n    }\n\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n\n    if (other != null) {\n      val.other = getBidi(ch, other, sticky != \"before\");\n    }\n\n    return val;\n  } // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n\n\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = _clipPos(cm.doc, pos);\n\n    if (!cm.options.lineWrapping) {\n      left = charWidth(cm.display) * pos.ch;\n    }\n\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = _heightAtLine(lineObj) + paddingTop(cm.display);\n    return {\n      left: left,\n      right: left,\n      top: top,\n      bottom: top + lineObj.height\n    };\n  } // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n\n\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n\n    if (outside) {\n      pos.outside = outside;\n    }\n\n    return pos;\n  } // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n\n\n  function _coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n\n    if (y < 0) {\n      return PosWithInfo(doc.first, 0, null, -1, -1);\n    }\n\n    var lineN = _lineAtHeight(doc, y),\n        last = doc.first + doc.size - 1;\n\n    if (lineN > last) {\n      return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1);\n    }\n\n    if (x < 0) {\n      x = 0;\n    }\n\n    var lineObj = getLine(doc, lineN);\n\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n\n      if (!collapsed) {\n        return found;\n      }\n\n      var rangeEnd = collapsed.find(1);\n\n      if (rangeEnd.line == lineN) {\n        return rangeEnd;\n      }\n\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) {\n      return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y;\n    }, end, 0);\n    end = findFirst(function (ch) {\n      return measureCharPrepared(cm, preparedMeasure, ch).top > y;\n    }, begin, end);\n    return {\n      begin: begin,\n      end: end\n    };\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) {\n      preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    }\n\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop);\n  } // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n\n\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x;\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= _heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj); // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0,\n        end = lineObj.text.length,\n        ltr = true;\n    var order = getOrder(lineObj, cm.doc.direction); // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)(cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1; // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    } // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n\n\n    var chAround = null,\n        boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight;\n      box.bottom += widgetHeight;\n\n      if (!boxIsAfter(box, x, y, false)) {\n        return false;\n      }\n\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n\n      return true;\n    }, begin, end);\n    var baseX,\n        sticky,\n        outside = false; // If a box around the coordinates was found, use that\n\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x,\n          atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) {\n        ch++;\n      } // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n\n\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" : measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y == ltr ? \"after\" : \"before\"; // Now get accurate coordinates for this place, in order to get a\n      // base X position\n\n      var coords = _cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX);\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i],\n          ltr = part.level != 1;\n      return boxIsAfter(_cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"), \"line\", lineObj, preparedMeasure), x, y, true);\n    }, 0, order.length - 1);\n    var part = order[index]; // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n\n    if (index > 0) {\n      var ltr = part.level != 1;\n\n      var start = _cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"), \"line\", lineObj, preparedMeasure);\n\n      if (boxIsAfter(start, x, y, true) && start.top > y) {\n        part = order[index - 1];\n      }\n    }\n\n    return part;\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) {\n      end--;\n    }\n\n    var part = null,\n        closestDist = null;\n\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n\n      if (p.from >= end || p.to <= begin) {\n        continue;\n      }\n\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right; // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n\n    if (!part) {\n      part = order[order.length - 1];\n    } // Clip the part to the wrapped line.\n\n\n    if (part.from < begin) {\n      part = {\n        from: begin,\n        to: part.to,\n        level: part.level\n      };\n    }\n\n    if (part.to > end) {\n      part = {\n        from: part.from,\n        to: end,\n        level: part.level\n      };\n    }\n\n    return part;\n  }\n\n  var measureText; // Compute the default text height.\n\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) {\n      return display.cachedTextHeight;\n    }\n\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\"); // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n\n    if (height > 3) {\n      display.cachedTextHeight = height;\n    }\n\n    removeChildren(display.measure);\n    return height || 1;\n  } // Compute the default character width.\n\n\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) {\n      return display.cachedCharWidth;\n    }\n\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(),\n        width = (rect.right - rect.left) / 10;\n\n    if (width > 2) {\n      display.cachedCharWidth = width;\n    }\n\n    return width || 10;\n  } // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n\n\n  function getDimensions(cm) {\n    var d = cm.display,\n        left = {},\n        width = {};\n    var gutterLeft = d.gutters.clientLeft;\n\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n\n    return {\n      fixedPos: compensateForHScroll(d),\n      gutterTotalWidth: d.gutters.offsetWidth,\n      gutterLeft: left,\n      gutterWidth: width,\n      wrapperWidth: d.wrapper.clientWidth\n    };\n  } // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n\n\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left;\n  } // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n\n\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display),\n        wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) {\n        return 0;\n      }\n\n      var widgetsHeight = 0;\n\n      if (line.widgets) {\n        for (var i = 0; i < line.widgets.length; i++) {\n          if (line.widgets[i].height) {\n            widgetsHeight += line.widgets[i].height;\n          }\n        }\n      }\n\n      if (wrapping) {\n        return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th;\n      } else {\n        return widgetsHeight + th;\n      }\n    };\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc,\n        est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n\n      if (estHeight != line.height) {\n        updateLineHeight(line, estHeight);\n      }\n    });\n  } // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n\n\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") {\n      return null;\n    }\n\n    var x,\n        y,\n        space = display.lineSpace.getBoundingClientRect(); // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n\n    try {\n      x = e.clientX - space.left;\n      y = e.clientY - space.top;\n    } catch (e) {\n      return null;\n    }\n\n    var coords = _coordsChar(cm, x, y),\n        line;\n\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n\n    return coords;\n  } // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n\n\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) {\n      return null;\n    }\n\n    n -= cm.display.viewFrom;\n\n    if (n < 0) {\n      return null;\n    }\n\n    var view = cm.display.view;\n\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n\n      if (n < 0) {\n        return i;\n      }\n    }\n  } // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n\n\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) {\n      from = cm.doc.first;\n    }\n\n    if (to == null) {\n      to = cm.doc.first + cm.doc.size;\n    }\n\n    if (!lendiff) {\n      lendiff = 0;\n    }\n\n    var display = cm.display;\n\n    if (lendiff && to < display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers > from)) {\n      display.updateLineNumbers = from;\n    }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) {\n      // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo) {\n        resetView(cm);\n      }\n    } else if (to <= display.viewFrom) {\n      // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) {\n      // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) {\n      // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) {\n      // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else {\n      // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index).concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN)).concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n\n    if (ext) {\n      if (to < ext.lineN) {\n        ext.lineN += lendiff;\n      } else if (from < ext.lineN + ext.size) {\n        display.externalMeasured = null;\n      }\n    }\n  } // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n\n\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display,\n        ext = cm.display.externalMeasured;\n\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size) {\n      display.externalMeasured = null;\n    }\n\n    if (line < display.viewFrom || line >= display.viewTo) {\n      return;\n    }\n\n    var lineView = display.view[findViewIndex(cm, line)];\n\n    if (lineView.node == null) {\n      return;\n    }\n\n    var arr = lineView.changes || (lineView.changes = []);\n\n    if (indexOf(arr, type) == -1) {\n      arr.push(type);\n    }\n  } // Clear the view.\n\n\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN),\n        diff,\n        view = cm.display.view;\n\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size) {\n      return {\n        index: index,\n        lineN: newN\n      };\n    }\n\n    var n = cm.display.viewFrom;\n\n    for (var i = 0; i < index; i++) {\n      n += view[i].size;\n    }\n\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) {\n          return null;\n        }\n\n        diff = n + view[index].size - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n\n      oldN += diff;\n      newN += diff;\n    }\n\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) {\n        return null;\n      }\n\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n\n    return {\n      index: index,\n      lineN: newN\n    };\n  } // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n\n\n  function adjustView(cm, from, to) {\n    var display = cm.display,\n        view = display.view;\n\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from) {\n        display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view);\n      } else if (display.viewFrom < from) {\n        display.view = display.view.slice(findViewIndex(cm, from));\n      }\n\n      display.viewFrom = from;\n\n      if (display.viewTo < to) {\n        display.view = display.view.concat(buildViewArray(cm, display.viewTo, to));\n      } else if (display.viewTo > to) {\n        display.view = display.view.slice(0, findViewIndex(cm, to));\n      }\n    }\n\n    display.viewTo = to;\n  } // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n\n\n  function countDirtyView(cm) {\n    var view = cm.display.view,\n        dirty = 0;\n\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) {\n        ++dirty;\n      }\n    }\n\n    return dirty;\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if (primary === void 0) primary = true;\n    var doc = cm.doc,\n        result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) {\n        continue;\n      }\n\n      var range = doc.sel.ranges[i];\n\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) {\n        continue;\n      }\n\n      var collapsed = range.empty();\n\n      if (collapsed || cm.options.showCursorWhenSelecting) {\n        drawSelectionCursor(cm, range.head, curFragment);\n      }\n\n      if (!collapsed) {\n        drawSelectionRange(cm, range, selFragment);\n      }\n    }\n\n    return result;\n  } // Draws a cursor for the given range\n\n\n  function drawSelectionCursor(cm, head, output) {\n    var pos = _cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\xA0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) {\n    return a.top - b.top || a.left - b.left;\n  } // Draws the given range as a highlighted selection\n\n\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display,\n        doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display),\n        leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) {\n        top = 0;\n      }\n\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", \"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\"));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n\n      function coords(ch, bias) {\n        return _charCoords(cm, Pos(line, ch), \"div\", lineObj, bias);\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = dir == \"ltr\" == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop];\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n        var openStart = fromArg == null && from == 0,\n            openEnd = toArg == null && to == lineLen;\n        var first = i == 0,\n            last = !order || i == order.length - 1;\n\n        if (toPos.top - fromPos.top <= 3) {\n          // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else {\n          // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n\n          if (fromPos.bottom < toPos.top) {\n            add(leftSide, fromPos.bottom, null, toPos.top);\n          }\n\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) {\n          start = fromPos;\n        }\n\n        if (cmpCoords(toPos, start) < 0) {\n          start = toPos;\n        }\n\n        if (!end || cmpCoords(fromPos, end) < 0) {\n          end = fromPos;\n        }\n\n        if (cmpCoords(toPos, end) < 0) {\n          end = toPos;\n        }\n      });\n      return {\n        start: start,\n        end: end\n      };\n    }\n\n    var sFrom = range.from(),\n        sTo = range.to();\n\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line),\n          toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n\n      if (leftEnd.bottom < rightStart.top) {\n        add(leftSide, leftEnd.bottom, null, rightStart.top);\n      }\n    }\n\n    output.appendChild(fragment);\n  } // Cursor-blinking\n\n\n  function restartBlink(cm) {\n    if (!cm.state.focused) {\n      return;\n    }\n\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n\n    if (cm.options.cursorBlinkRate > 0) {\n      display.blinker = setInterval(function () {\n        return display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate);\n    } else if (cm.options.cursorBlinkRate < 0) {\n      display.cursorDiv.style.visibility = \"hidden\";\n    }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.state.focused) {\n      cm.display.input.focus();\n      onFocus(cm);\n    }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () {\n      if (cm.state.delayingBlurEvent) {\n        cm.state.delayingBlurEvent = false;\n        onBlur(cm);\n      }\n    }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n    }\n\n    if (cm.options.readOnly == \"nocursor\") {\n      return;\n    }\n\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\"); // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n\n        if (webkit) {\n          setTimeout(function () {\n            return cm.display.input.reset(true);\n          }, 20);\n        } // Issue #1730\n\n      }\n\n      cm.display.input.receivedFocus();\n    }\n\n    restartBlink(cm);\n  }\n\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) {\n      return;\n    }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n\n    clearInterval(cm.display.blinker);\n    setTimeout(function () {\n      if (!cm.state.focused) {\n        cm.display.shift = false;\n      }\n    }, 150);\n  } // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n\n\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i],\n          wrapping = cm.options.lineWrapping;\n      var height = void 0,\n          width = 0;\n\n      if (cur.hidden) {\n        continue;\n      }\n\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top; // Check that lines don't extend past the right of the current\n        // editor width\n\n        if (!wrapping && cur.text.firstChild) {\n          width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1;\n        }\n      }\n\n      var diff = cur.line.height - height;\n\n      if (diff > .005 || diff < -.005) {\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n\n        if (cur.rest) {\n          for (var j = 0; j < cur.rest.length; j++) {\n            updateWidgetHeight(cur.rest[j]);\n          }\n        }\n      }\n\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n  } // Read and store the height of line widgets associated with the\n  // given line.\n\n\n  function updateWidgetHeight(line) {\n    if (line.widgets) {\n      for (var i = 0; i < line.widgets.length; ++i) {\n        var w = line.widgets[i],\n            parent = w.node.parentNode;\n\n        if (parent) {\n          w.height = parent.offsetHeight;\n        }\n      }\n    }\n  } // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n\n\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = _lineAtHeight(doc, top),\n        to = _lineAtHeight(doc, bottom); // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n\n\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line,\n          ensureTo = viewport.ensure.to.line;\n\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = _lineAtHeight(doc, _heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n\n    return {\n      from: from,\n      to: Math.max(to, from + 1)\n    };\n  } // SCROLLING THINGS INTO VIEW\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n\n\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) {\n      return;\n    }\n\n    var display = cm.display,\n        box = display.sizer.getBoundingClientRect(),\n        doScroll = null;\n\n    if (rect.top + box.top < 0) {\n      doScroll = true;\n    } else if (rect.bottom + box.top > (window.innerHeight || document.documentElement.clientHeight)) {\n      doScroll = false;\n    }\n\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200B\", null, \"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + rect.left + \"px; width: \" + Math.max(2, rect.right - rect.left) + \"px;\");\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  } // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n\n\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) {\n      margin = 0;\n    }\n\n    var rect;\n\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n    }\n\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n\n      var coords = _cursorCoords(cm, pos);\n\n      var endCoords = !end || end == pos ? coords : _cursorCoords(cm, end);\n      rect = {\n        left: Math.min(coords.left, endCoords.left),\n        top: Math.min(coords.top, endCoords.top) - margin,\n        right: Math.max(coords.left, endCoords.left),\n        bottom: Math.max(coords.bottom, endCoords.bottom) + margin\n      };\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop,\n          startLeft = cm.doc.scrollLeft;\n\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) {\n          changed = true;\n        }\n      }\n\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) {\n          changed = true;\n        }\n      }\n\n      if (!changed) {\n        break;\n      }\n    }\n\n    return rect;\n  } // Scroll a given set of coordinates into view (immediately).\n\n\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n\n    if (scrollPos.scrollTop != null) {\n      updateScrollTop(cm, scrollPos.scrollTop);\n    }\n\n    if (scrollPos.scrollLeft != null) {\n      setScrollLeft(cm, scrollPos.scrollLeft);\n    }\n  } // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n\n\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display,\n        snapMargin = textHeight(cm.display);\n\n    if (rect.top < 0) {\n      rect.top = 0;\n    }\n\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm),\n        result = {};\n\n    if (rect.bottom - rect.top > screen) {\n      rect.bottom = rect.top + screen;\n    }\n\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin,\n        atBottom = rect.bottom > docBottom - snapMargin;\n\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n\n      if (newTop != screentop) {\n        result.scrollTop = newTop;\n      }\n    }\n\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft;\n    var screenw = displayWidth(cm) - (cm.options.fixedGutter ? display.gutters.offsetWidth : 0);\n    var tooWide = rect.right - rect.left > screenw;\n\n    if (tooWide) {\n      rect.right = rect.left + screenw;\n    }\n\n    if (rect.left < 10) {\n      result.scrollLeft = 0;\n    } else if (rect.left < screenleft) {\n      result.scrollLeft = Math.max(0, rect.left - (tooWide ? 0 : 10));\n    } else if (rect.right > screenw + screenleft - 3) {\n      result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw;\n    }\n\n    return result;\n  } // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n\n\n  function addToScrollTop(cm, top) {\n    if (top == null) {\n      return;\n    }\n\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  } // Make sure that at the end of the operation the current cursor is\n  // shown.\n\n\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {\n      from: cur,\n      to: cur,\n      margin: cm.options.cursorScrollMargin\n    };\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) {\n      resolveScrollToPos(cm);\n    }\n\n    if (x != null) {\n      cm.curOp.scrollLeft = x;\n    }\n\n    if (y != null) {\n      cm.curOp.scrollTop = y;\n    }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  } // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n\n\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from),\n          to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  } // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n\n\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) {\n      return;\n    }\n\n    if (!gecko) {\n      updateDisplaySimple(cm, {\n        top: val\n      });\n    }\n\n    setScrollTop(cm, val, true);\n\n    if (gecko) {\n      updateDisplaySimple(cm);\n    }\n\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));\n\n    if (cm.display.scroller.scrollTop == val && !forceScroll) {\n      return;\n    }\n\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n\n    if (cm.display.scroller.scrollTop != val) {\n      cm.display.scroller.scrollTop = val;\n    }\n  } // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n\n\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));\n\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) {\n      return;\n    }\n\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n\n    if (cm.display.scroller.scrollLeft != val) {\n      cm.display.scroller.scrollLeft = val;\n    }\n\n    cm.display.scrollbars.setScrollLeft(val);\n  } // SCROLLBARS\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n\n\n  function measureForScrollbars(cm) {\n    var d = cm.display,\n        gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth,\n      clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    };\n  }\n\n  var NativeScrollbars = function NativeScrollbars(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert);\n    place(horiz);\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) {\n        scroll(vert.scrollTop, \"vertical\");\n      }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) {\n        scroll(horiz.scrollLeft, \"horizontal\");\n      }\n    });\n    this.checkedZeroWidth = false; // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n\n    if (ie && ie_version < 8) {\n      this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\";\n    }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0); // A bug in IE8 can cause this value to be negative, so guard it.\n\n      this.vert.firstChild.style.height = Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width = Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) {\n        this.zeroWidthHack();\n      }\n\n      this.checkedZeroWidth = true;\n    }\n\n    return {\n      right: needsV ? sWidth : 0,\n      bottom: needsH ? sWidth : 0\n    };\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) {\n      this.horiz.scrollLeft = pos;\n    }\n\n    if (this.disableHoriz) {\n      this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\");\n    }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) {\n      this.vert.scrollTop = pos;\n    }\n\n    if (this.disableVert) {\n      this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\");\n    }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.pointerEvents = this.vert.style.pointerEvents = \"none\";\n    this.disableHoriz = new Delayed();\n    this.disableVert = new Delayed();\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.pointerEvents = \"auto\";\n\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2) : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n\n      if (elt != bar) {\n        bar.style.pointerEvents = \"none\";\n      } else {\n        delay.set(1000, maybeDisable);\n      }\n    }\n\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function NullScrollbars() {};\n\n  NullScrollbars.prototype.update = function () {\n    return {\n      bottom: 0,\n      right: 0\n    };\n  };\n\n  NullScrollbars.prototype.setScrollLeft = function () {};\n\n  NullScrollbars.prototype.setScrollTop = function () {};\n\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) {\n      measure = measureForScrollbars(cm);\n    }\n\n    var startWidth = cm.display.barWidth,\n        startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping) {\n        updateHeightsInViewport(cm);\n      }\n\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth;\n      startHeight = cm.display.barHeight;\n    }\n  } // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n\n\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else {\n      d.scrollbarFiller.style.display = \"\";\n    }\n\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else {\n      d.gutterFiller.style.display = \"\";\n    }\n  }\n\n  var scrollbarModel = {\n    \"native\": NativeScrollbars,\n    \"null\": NullScrollbars\n  };\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n\n      if (cm.display.scrollbars.addClass) {\n        rmClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n      }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller); // Prevent clicks in the scrollbars from killing focus\n\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) {\n          setTimeout(function () {\n            return cm.display.input.focus();\n          }, 0);\n        }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") {\n        setScrollLeft(cm, pos);\n      } else {\n        updateScrollTop(cm, pos);\n      }\n    }, cm);\n\n    if (cm.display.scrollbars.addClass) {\n      addClass(cm.display.wrapper, cm.display.scrollbars.addClass);\n    }\n  } // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n\n  var nextOpId = 0; // Start a new operation.\n\n  function _startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,\n      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height,\n      // Used to detect need to update scrollbar\n      forceUpdate: false,\n      // Used to force a redraw\n      updateInput: 0,\n      // Whether to reset the input textarea\n      typing: false,\n      // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,\n      // Accumulated changes, for firing change events\n      cursorActivityHandlers: null,\n      // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0,\n      // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false,\n      // Whether the selection needs to be redrawn\n      updateMaxLine: false,\n      // Set when the widest line needs to be determined anew\n      scrollLeft: null,\n      scrollTop: null,\n      // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,\n      // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId // Unique ID\n\n    };\n    pushOperation(cm.curOp);\n  } // Finish an operation, updating the display and signalling delayed events\n\n\n  function _endOperation(cm) {\n    var op = cm.curOp;\n\n    if (op) {\n      finishOperation(op, function (group) {\n        for (var i = 0; i < group.ops.length; i++) {\n          group.ops[i].cm.curOp = null;\n        }\n\n        endOperations(group);\n      });\n    }\n  } // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n\n\n  function endOperations(group) {\n    var ops = group.ops;\n\n    for (var i = 0; i < ops.length; i++) // Read DOM\n    {\n      endOperation_R1(ops[i]);\n    }\n\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n    {\n      endOperation_W1(ops[i$1]);\n    }\n\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n    {\n      endOperation_R2(ops[i$2]);\n    }\n\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n    {\n      endOperation_W2(ops[i$3]);\n    }\n\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n    {\n      endOperation_finish(ops[i$4]);\n    }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm,\n        display = cm.display;\n    maybeClipScrollbars(cm);\n\n    if (op.updateMaxLine) {\n      findMaxLine(cm);\n    }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null || op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom || op.scrollToPos.to.line >= display.viewTo) || display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate && new DisplayUpdate(cm, op.mustUpdate && {\n      top: op.scrollTop,\n      ensure: op.scrollToPos\n    }, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm,\n        display = cm.display;\n\n    if (op.updatedDisplay) {\n      updateHeightsInViewport(cm);\n    }\n\n    op.barMeasure = measureForScrollbars(cm); // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth = Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged) {\n      op.preparedSelection = display.input.prepareSelection();\n    }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n\n      if (op.maxScrollLeft < cm.doc.scrollLeft) {\n        setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true);\n      }\n\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt();\n\n    if (op.preparedSelection) {\n      cm.display.input.showSelection(op.preparedSelection, takeFocus);\n    }\n\n    if (op.updatedDisplay || op.startHeight != cm.doc.height) {\n      updateScrollbars(cm, op.barMeasure);\n    }\n\n    if (op.updatedDisplay) {\n      setDocumentHeight(cm, op.barMeasure);\n    }\n\n    if (op.selectionChanged) {\n      restartBlink(cm);\n    }\n\n    if (cm.state.focused && op.updateInput) {\n      cm.display.input.reset(op.typing);\n    }\n\n    if (takeFocus) {\n      ensureFocus(op.cm);\n    }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm,\n        display = cm.display,\n        doc = cm.doc;\n\n    if (op.updatedDisplay) {\n      postUpdateDisplay(cm, op.update);\n    } // Abort mouse wheel delta measurement, when scrolling explicitly\n\n\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos)) {\n      display.wheelStartX = display.wheelStartY = null;\n    } // Propagate the scroll position to the actual DOM scroller\n\n\n    if (op.scrollTop != null) {\n      setScrollTop(cm, op.scrollTop, op.forceScroll);\n    }\n\n    if (op.scrollLeft != null) {\n      setScrollLeft(cm, op.scrollLeft, true, true);\n    } // If we need to scroll a specific position into view, do so.\n\n\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, _clipPos(doc, op.scrollToPos.from), _clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    } // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n\n\n    var hidden = op.maybeHiddenMarkers,\n        unhidden = op.maybeUnhiddenMarkers;\n\n    if (hidden) {\n      for (var i = 0; i < hidden.length; ++i) {\n        if (!hidden[i].lines.length) {\n          signal(hidden[i], \"hide\");\n        }\n      }\n    }\n\n    if (unhidden) {\n      for (var i$1 = 0; i$1 < unhidden.length; ++i$1) {\n        if (unhidden[i$1].lines.length) {\n          signal(unhidden[i$1], \"unhide\");\n        }\n      }\n    }\n\n    if (display.wrapper.offsetHeight) {\n      doc.scrollTop = cm.display.scroller.scrollTop;\n    } // Fire change events, and delayed event handlers\n\n\n    if (op.changeObjs) {\n      signal(cm, \"changes\", cm, op.changeObjs);\n    }\n\n    if (op.update) {\n      op.update.finish();\n    }\n  } // Run the given function in an operation\n\n\n  function runInOp(cm, f) {\n    if (cm.curOp) {\n      return f();\n    }\n\n    _startOperation(cm);\n\n    try {\n      return f();\n    } finally {\n      _endOperation(cm);\n    }\n  } // Wraps a function in an operation. Returns the wrapped function.\n\n\n  function operation(cm, f) {\n    return function () {\n      if (cm.curOp) {\n        return f.apply(cm, arguments);\n      }\n\n      _startOperation(cm);\n\n      try {\n        return f.apply(cm, arguments);\n      } finally {\n        _endOperation(cm);\n      }\n    };\n  } // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n\n\n  function methodOp(f) {\n    return function () {\n      if (this.curOp) {\n        return f.apply(this, arguments);\n      }\n\n      _startOperation(this);\n\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        _endOperation(this);\n      }\n    };\n  }\n\n  function docMethodOp(f) {\n    return function () {\n      var cm = this.cm;\n\n      if (!cm || cm.curOp) {\n        return f.apply(this, arguments);\n      }\n\n      _startOperation(cm);\n\n      try {\n        return f.apply(this, arguments);\n      } finally {\n        _endOperation(cm);\n      }\n    };\n  } // HIGHLIGHT WORKER\n\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo) {\n      cm.state.highlight.set(time, bind(highlightWorker, cm));\n    }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n\n    if (doc.highlightFrontier >= cm.display.viewTo) {\n      return;\n    }\n\n    var end = +new Date() + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) {\n        // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n\n        if (resetState) {\n          context.state = resetState;\n        }\n\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses,\n            newCls = highlighted.classes;\n\n        if (newCls) {\n          line.styleClasses = newCls;\n        } else if (oldCls) {\n          line.styleClasses = null;\n        }\n\n        var ischange = !oldStyles || oldStyles.length != line.styles.length || oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) {\n          ischange = oldStyles[i] != line.styles[i];\n        }\n\n        if (ischange) {\n          changedLines.push(context.line);\n        }\n\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength) {\n          processLine(cm, line.text, context);\n        }\n\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n\n      if (+new Date() > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true;\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n\n    if (changedLines.length) {\n      runInOp(cm, function () {\n        for (var i = 0; i < changedLines.length; i++) {\n          regLineChange(cm, changedLines[i], \"text\");\n        }\n      });\n    }\n  } // DISPLAY DRAWING\n\n\n  var DisplayUpdate = function DisplayUpdate(cm, viewport, force) {\n    var display = cm.display;\n    this.viewport = viewport; // Store some values that we'll need later (but don't want to force a relayout for)\n\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type)) {\n      this.events.push(arguments);\n    }\n  };\n\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++) {\n      signal.apply(null, this.events[i]);\n    }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) {\n      return null;\n    }\n\n    var active = activeElt();\n\n    if (!active || !contains(cm.display.lineDiv, active)) {\n      return null;\n    }\n\n    var result = {\n      activeElt: active\n    };\n\n    if (window.getSelection) {\n      var sel = window.getSelection();\n\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n\n    return result;\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt()) {\n      return;\n    }\n\n    snapshot.activeElt.focus();\n\n    if (snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var sel = window.getSelection(),\n          range = document.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  } // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n\n\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display,\n        doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false;\n    } // Bail out if the visible area is already rendered and nothing changed.\n\n\n    if (!update.force && update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) && display.renderedView == display.view && countDirtyView(cm) == 0) {\n      return false;\n    }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    } // Compute a suitable new viewport (from & to)\n\n\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n\n    if (display.viewFrom < from && from - display.viewFrom < 20) {\n      from = Math.max(doc.first, display.viewFrom);\n    }\n\n    if (display.viewTo > to && display.viewTo - to < 20) {\n      to = Math.min(end, display.viewTo);\n    }\n\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo || display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n    display.viewOffset = _heightAtLine(getLine(cm.doc, display.viewFrom)); // Position the mover div to align with the current scroll position\n\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n    var toUpdate = countDirtyView(cm);\n\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view && (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo)) {\n      return false;\n    } // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n\n\n    var selSnapshot = selectionSnapshot(cm);\n\n    if (toUpdate > 4) {\n      display.lineDiv.style.display = \"none\";\n    }\n\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n\n    if (toUpdate > 4) {\n      display.lineDiv.style.display = \"\";\n    }\n\n    display.renderedView = display.view; // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n\n    restoreSelection(selSnapshot); // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n    return true;\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null) {\n          viewport = {\n            top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)\n          };\n        } // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n\n\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo) {\n          break;\n        }\n      }\n\n      if (!updateDisplayIfNeeded(cm, update)) {\n        break;\n      }\n\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom;\n      cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  } // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n\n\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display,\n        lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv,\n        cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling; // Works around a throw-scroll bug in OS X Webkit\n\n      if (webkit && mac && cm.display.currentWheelTarget == node) {\n        node.style.display = \"none\";\n      } else {\n        node.parentNode.removeChild(node);\n      }\n\n      return next;\n    }\n\n    var view = display.view,\n        lineN = display.viewFrom; // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ;else if (!lineView.node || lineView.node.parentNode != container) {\n        // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else {\n        // Already drawn\n        while (cur != lineView.node) {\n          cur = rm(cur);\n        }\n\n        var updateNumber = lineNumbers && updateNumbersFrom != null && updateNumbersFrom <= lineN && lineView.lineNumber;\n\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) {\n            updateNumber = false;\n          }\n\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n\n    while (cur) {\n      cur = rm(cur);\n    }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = measure.docHeight + cm.display.barHeight + scrollGap(cm) + \"px\";\n  } // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n\n\n  function alignHorizontally(cm) {\n    var display = cm.display,\n        view = display.view;\n\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) {\n      return;\n    }\n\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth,\n        left = comp + \"px\";\n\n    for (var i = 0; i < view.length; i++) {\n      if (!view[i].hidden) {\n        if (cm.options.fixedGutter) {\n          if (view[i].gutter) {\n            view[i].gutter.style.left = left;\n          }\n\n          if (view[i].gutterBackground) {\n            view[i].gutterBackground.style.left = left;\n          }\n        }\n\n        var align = view[i].alignable;\n\n        if (align) {\n          for (var j = 0; j < align.length; j++) {\n            align[j].style.left = left;\n          }\n        }\n      }\n    }\n\n    if (cm.options.fixedGutter) {\n      display.gutters.style.left = comp + gutterW + \"px\";\n    }\n  } // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n\n\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) {\n      return false;\n    }\n\n    var doc = cm.doc,\n        last = lineNumberFor(cm.options, doc.first + doc.size - 1),\n        display = cm.display;\n\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)], \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth,\n          padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true;\n    }\n\n    return false;\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [],\n        sawLineNumbers = false;\n\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i],\n          style = null;\n\n      if (typeof name != \"string\") {\n        style = name.style;\n        name = name.className;\n      }\n\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) {\n          continue;\n        } else {\n          sawLineNumbers = true;\n        }\n      }\n\n      result.push({\n        className: name,\n        style: style\n      });\n    }\n\n    if (lineNumbers && !sawLineNumbers) {\n      result.push({\n        className: \"CodeMirror-linenumbers\",\n        style: null\n      });\n    }\n\n    return result;\n  } // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n\n\n  function renderGutters(display) {\n    var gutters = display.gutters,\n        specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n\n      if (style) {\n        gElt.style.cssText = style;\n      }\n\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  } // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input; // Covers bottom-right square when both scrollbars are present.\n\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\"); // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\"); // Will contain the actual code, positioned to cover the viewport.\n\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\"); // Elements are added to these to represent selection and cursors.\n\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\"); // A visibility: hidden element used to find the size of things.\n\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\"); // When lines outside of the viewport are measured, they are drawn in this.\n\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\"); // Wraps everything that needs to exist inside the vertically-padded coordinate system\n\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv], null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\"); // Moved around its parent to cover visible view.\n\n    d.mover = elt(\"div\", [lines], null, \"position: relative\"); // Set to the height of the document, allowing scrolling.\n\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null; // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\"); // Will contain the gutters, if any.\n\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null; // Actual scrollable element.\n\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\"); // The element in which the editor lives.\n\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\"); // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n\n    if (ie && ie_version < 8) {\n      d.gutters.style.zIndex = -1;\n      d.scroller.style.paddingRight = 0;\n    }\n\n    if (!webkit && !(gecko && mobile)) {\n      d.scroller.draggable = true;\n    }\n\n    if (place) {\n      if (place.appendChild) {\n        place.appendChild(d.wrapper);\n      } else {\n        place(d.wrapper);\n      }\n    } // Current rendered range (may be bigger than the view window).\n\n\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first; // Information about the rendered lines.\n\n    d.view = [];\n    d.renderedView = null; // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n\n    d.externalMeasured = null; // Empty space (in pixels) above the view\n\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false; // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null; // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n\n    d.alignWidgets = false;\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null; // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false; // Used for measuring wheel scrolling granularity\n\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null; // True when shift is held down.\n\n    d.shift = false; // Used to track whether anything happened since the context menu\n    // was opened.\n\n    d.selForContextMenu = null;\n    d.activeTouch = null;\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n    input.init(d);\n  } // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n\n  var wheelSamples = 0,\n      wheelPixelsPerUnit = null; // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n\n  if (ie) {\n    wheelPixelsPerUnit = -.53;\n  } else if (gecko) {\n    wheelPixelsPerUnit = 15;\n  } else if (chrome) {\n    wheelPixelsPerUnit = -.7;\n  } else if (safari) {\n    wheelPixelsPerUnit = -1 / 3;\n  }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX,\n        dy = e.wheelDeltaY;\n\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) {\n      dx = e.detail;\n    }\n\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) {\n      dy = e.detail;\n    } else if (dy == null) {\n      dy = e.wheelDelta;\n    }\n\n    return {\n      x: dx,\n      y: dy\n    };\n  }\n\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta;\n  }\n\n  function onScrollWheel(cm, e) {\n    var delta = wheelEventDelta(e),\n        dx = delta.x,\n        dy = delta.y;\n    var display = cm.display,\n        scroll = display.scroller; // Quit if there's nothing to scroll here\n\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n\n    if (!(dx && canScrollX || dy && canScrollY)) {\n      return;\n    } // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n\n\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer;\n          }\n        }\n      }\n    } // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n\n\n    if (dx && !gecko && !presto && wheelPixelsPerUnit != null) {\n      if (dy && canScrollY) {\n        updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * wheelPixelsPerUnit));\n      }\n\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * wheelPixelsPerUnit)); // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n\n      if (!dy || dy && canScrollY) {\n        e_preventDefault(e);\n      }\n\n      display.wheelStartX = null; // Abort measurement, if in progress\n\n      return;\n    } // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n\n\n    if (dy && wheelPixelsPerUnit != null) {\n      var pixels = dy * wheelPixelsPerUnit;\n      var top = cm.doc.scrollTop,\n          bot = top + display.wrapper.clientHeight;\n\n      if (pixels < 0) {\n        top = Math.max(0, top + pixels - 50);\n      } else {\n        bot = Math.min(cm.doc.height, bot + pixels + 50);\n      }\n\n      updateDisplaySimple(cm, {\n        top: top,\n        bottom: bot\n      });\n    }\n\n    if (wheelSamples < 20) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft;\n        display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx;\n        display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) {\n            return;\n          }\n\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = movedY && display.wheelDY && movedY / display.wheelDY || movedX && display.wheelDX && movedX / display.wheelDX;\n          display.wheelStartX = display.wheelStartY = null;\n\n          if (!sample) {\n            return;\n          }\n\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx;\n        display.wheelDY += dy;\n      }\n    }\n  } // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n\n\n  var Selection = function Selection(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () {\n    return this.ranges[this.primIndex];\n  };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) {\n      return true;\n    }\n\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) {\n      return false;\n    }\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i],\n          there = other.ranges[i];\n\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head));\n    }\n\n    return new Selection(out, this.primIndex);\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++) {\n      if (!this.ranges[i].empty()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) {\n      end = pos;\n    }\n\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0) {\n        return i;\n      }\n    }\n\n    return -1;\n  };\n\n  var Range = function Range(anchor, head) {\n    this.anchor = anchor;\n    this.head = head;\n  };\n\n  Range.prototype.from = function () {\n    return minPos(this.anchor, this.head);\n  };\n\n  Range.prototype.to = function () {\n    return maxPos(this.anchor, this.head);\n  };\n\n  Range.prototype.empty = function () {\n    return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch;\n  }; // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n\n\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) {\n      return cmp(a.from(), b.from());\n    });\n    primIndex = indexOf(ranges, prim);\n\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i],\n          prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()),\n            to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n\n        if (i <= primIndex) {\n          --primIndex;\n        }\n\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n\n    return new Selection(ranges, primIndex);\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0);\n  } // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n\n\n  function changeEnd(change) {\n    if (!change.text) {\n      return change.to;\n    }\n\n    return Pos(change.from.line + change.text.length - 1, lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0));\n  } // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n\n\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) {\n      return pos;\n    }\n\n    if (cmp(pos, change.to) <= 0) {\n      return changeEnd(change);\n    }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1,\n        ch = pos.ch;\n\n    if (pos.line == change.to.line) {\n      ch += changeEnd(change).ch - change.to.ch;\n    }\n\n    return Pos(line, ch);\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change), adjustForChange(range.head, change)));\n    }\n\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex);\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line) {\n      return Pos(nw.line, pos.ch - old.ch + nw.ch);\n    } else {\n      return Pos(nw.line + (pos.line - old.line), pos.ch);\n    }\n  } // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n\n\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0),\n        newPrev = oldPrev;\n\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i],\n            inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n\n    return new Selection(out, doc.sel.primIndex);\n  } // Used to get the editor into a consistent state again when options change.\n\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) {\n        line.stateAfter = null;\n      }\n\n      if (line.styles) {\n        line.styles = null;\n      }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n\n    if (cm.curOp) {\n      regChange(cm);\n    }\n  } // DOCUMENT DATA STRUCTURE\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n\n\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" && (!doc.cm || doc.cm.options.wholeLineUpdateBefore);\n  } // Perform a change on the document data structure.\n\n\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {\n      return markedSpans ? markedSpans[n] : null;\n    }\n\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n\n    function linesFor(start, end) {\n      var result = [];\n\n      for (var i = start; i < end; ++i) {\n        result.push(new Line(text[i], spansFor(i), estimateHeight));\n      }\n\n      return result;\n    }\n\n    var from = change.from,\n        to = change.to,\n        text = change.text;\n    var firstLine = getLine(doc, from.line),\n        lastLine = getLine(doc, to.line);\n    var lastText = lst(text),\n        lastSpans = spansFor(text.length - 1),\n        nlines = to.line - from.line; // Adjust the line structure\n\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n\n      if (nlines) {\n        doc.remove(from.line, nlines);\n      }\n\n      if (added.length) {\n        doc.insert(from.line, added);\n      }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n\n      if (nlines > 1) {\n        doc.remove(from.line + 1, nlines - 1);\n      }\n\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  } // Call f for all linked documents.\n\n\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) {\n        for (var i = 0; i < doc.linked.length; ++i) {\n          var rel = doc.linked[i];\n\n          if (rel.doc == skip) {\n            continue;\n          }\n\n          var shared = sharedHist && rel.sharedHist;\n\n          if (sharedHistOnly && !shared) {\n            continue;\n          }\n\n          f(rel.doc, shared);\n          propagate(rel.doc, doc, shared);\n        }\n      }\n    }\n\n    propagate(doc, null, true);\n  } // Attach a document to an editor.\n\n\n  function attachDoc(cm, doc) {\n    if (doc.cm) {\n      throw new Error(\"This document is already in use.\");\n    }\n\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n\n    if (!cm.options.lineWrapping) {\n      findMaxLine(cm);\n    }\n\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n    (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(startGen) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = [];\n    this.undone = [];\n    this.undoDepth = Infinity; // Used to track when changes can be merged into a single undo\n    // event\n\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null; // Used by the isClean() method\n\n    this.generation = this.maxGeneration = startGen || 1;\n  } // Create a history change event from an updateDoc-style change\n  // object.\n\n\n  function historyChangeFromChange(doc, change) {\n    var histChange = {\n      from: copyPos(change.from),\n      to: changeEnd(change),\n      text: getBetween(doc, change.from, change.to)\n    };\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) {\n      return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    }, true);\n    return histChange;\n  } // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n\n\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n\n      if (last.ranges) {\n        array.pop();\n      } else {\n        break;\n      }\n    }\n  } // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n\n\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done);\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done);\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done);\n    }\n  } // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n\n\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date(),\n        cur;\n    var last;\n\n    if ((hist.lastOp == opId || hist.lastOrigin == change.origin && change.origin && (change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500) || change.origin.charAt(0) == \"*\")) && (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n\n      if (!before || !before.ranges) {\n        pushSelectionToHistory(doc.sel, hist.done);\n      }\n\n      cur = {\n        changes: [historyChangeFromChange(doc, change)],\n        generation: hist.generation\n      };\n      hist.done.push(cur);\n\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n\n        if (!hist.done[0].ranges) {\n          hist.done.shift();\n        }\n      }\n    }\n\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) {\n      signal(doc, \"historyAdded\");\n    }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" || ch == \"+\" && prev.ranges.length == sel.ranges.length && prev.somethingSelected() == sel.somethingSelected() && new Date() - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500);\n  } // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n\n\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history,\n        origin = options && options.origin; // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n\n    if (opId == hist.lastSelOp || origin && hist.lastSelOrigin == origin && (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin || selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))) {\n      hist.done[hist.done.length - 1] = sel;\n    } else {\n      pushSelectionToHistory(sel, hist.done);\n    }\n\n    hist.lastSelTime = +new Date();\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n\n    if (options && options.clearRedo !== false) {\n      clearSelectionEvents(hist.undone);\n    }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n\n    if (!(top && top.ranges && top.equals(sel))) {\n      dest.push(sel);\n    }\n  } // Used to store marked span information in the history.\n\n\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id],\n        n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans) {\n        (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans;\n      }\n\n      ++n;\n    });\n  } // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n\n\n  function removeClearedSpans(spans) {\n    if (!spans) {\n      return null;\n    }\n\n    var out;\n\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) {\n        if (!out) {\n          out = spans.slice(0, i);\n        }\n      } else if (out) {\n        out.push(spans[i]);\n      }\n    }\n\n    return !out ? spans : out.length ? out : null;\n  } // Retrieve and filter the old marked spans stored in a change event.\n\n\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n\n    if (!found) {\n      return null;\n    }\n\n    var nw = [];\n\n    for (var i = 0; i < change.text.length; ++i) {\n      nw.push(removeClearedSpans(found[i]));\n    }\n\n    return nw;\n  } // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n\n\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n\n    if (!old) {\n      return stretched;\n    }\n\n    if (!stretched) {\n      return old;\n    }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i],\n          stretchCur = stretched[i];\n\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n\n          for (var k = 0; k < oldCur.length; ++k) {\n            if (oldCur[k].marker == span.marker) {\n              continue spans;\n            }\n          }\n\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n\n    return old;\n  } // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n\n\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue;\n      }\n\n      var changes = event.changes,\n          newChanges = [];\n      copy.push({\n        changes: newChanges\n      });\n\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j],\n            m = void 0;\n        newChanges.push({\n          from: change.from,\n          to: change.to,\n          text: change.text\n        });\n\n        if (newGroup) {\n          for (var prop in change) {\n            if (m = prop.match(/^spans_(\\d+)$/)) {\n              if (indexOf(newGroup, Number(m[1])) > -1) {\n                lst(newChanges)[prop] = change[prop];\n                delete change[prop];\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return copy;\n  } // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n\n\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n\n        if (posBefore != cmp(other, anchor) < 0) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != cmp(head, other) < 0) {\n          head = other;\n        }\n      }\n\n      return new Range(anchor, head);\n    } else {\n      return new Range(other || head, head);\n    }\n  } // Extend the primary selection range, discard the rest.\n\n\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) {\n      extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    }\n\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  } // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n\n\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend);\n    }\n\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  } // Updates a single range in the selection.\n\n\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  } // Reset the selection to a single range.\n\n\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  } // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n\n\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function update(ranges) {\n        this.ranges = [];\n\n        for (var i = 0; i < ranges.length; i++) {\n          this.ranges[i] = new Range(_clipPos(doc, ranges[i].anchor), _clipPos(doc, ranges[i].head));\n        }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n\n    if (doc.cm) {\n      signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj);\n    }\n\n    if (obj.ranges != sel.ranges) {\n      return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1);\n    } else {\n      return sel;\n    }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done,\n        last = lst(done);\n\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  } // Set a new selection.\n\n\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\")) {\n      sel = filterSelectionChange(doc, sel, options);\n    }\n\n    var bias = options && options.bias || (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm) {\n      ensureCursorVisible(doc.cm);\n    }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) {\n      return;\n    }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n\n    signalLater(doc, \"cursorActivity\", doc);\n  } // Verify that the selection does not partially select any atomic\n  // marked ranges.\n\n\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  } // Return a selection that does not partially select any atomic\n  // ranges.\n\n\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) {\n          out = sel.ranges.slice(0, i);\n        }\n\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel;\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n\n    if (line.markedSpans) {\n      for (var i = 0; i < line.markedSpans.length; ++i) {\n        var sp = line.markedSpans[i],\n            m = sp.marker; // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n        // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n        // is with selectLeft/Right\n\n        var preventCursorLeft = \"selectLeft\" in m ? !m.selectLeft : m.inclusiveLeft;\n        var preventCursorRight = \"selectRight\" in m ? !m.selectRight : m.inclusiveRight;\n\n        if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) && (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n          if (mayClear) {\n            signal(m, \"beforeCursorEnter\");\n\n            if (m.explicitlyCleared) {\n              if (!line.markedSpans) {\n                break;\n              } else {\n                --i;\n                continue;\n              }\n            }\n          }\n\n          if (!m.atomic) {\n            continue;\n          }\n\n          if (oldPos) {\n            var near = m.find(dir < 0 ? 1 : -1),\n                diff = void 0;\n\n            if (dir < 0 ? preventCursorRight : preventCursorLeft) {\n              near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null);\n            }\n\n            if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0)) {\n              return skipAtomicInner(doc, near, pos, dir, mayClear);\n            }\n          }\n\n          var far = m.find(dir < 0 ? -1 : 1);\n\n          if (dir < 0 ? preventCursorLeft : preventCursorRight) {\n            far = movePos(doc, far, dir, far.line == pos.line ? line : null);\n          }\n\n          return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null;\n        }\n      }\n    }\n\n    return pos;\n  } // Ensure a given position is not inside an atomic range.\n\n\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, dir, true) || skipAtomicInner(doc, pos, oldPos, -dir, mayClear) || !mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true);\n\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0);\n    }\n\n    return found;\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) {\n        return _clipPos(doc, Pos(pos.line - 1));\n      } else {\n        return null;\n      }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) {\n        return Pos(pos.line + 1, 0);\n      } else {\n        return null;\n      }\n    } else {\n      return new Pos(pos.line, pos.ch + dir);\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  } // UPDATING\n  // Allow \"beforeChange\" event handlers to influence a change\n\n\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function cancel() {\n        return obj.canceled = true;\n      }\n    };\n\n    if (update) {\n      obj.update = function (from, to, text, origin) {\n        if (from) {\n          obj.from = _clipPos(doc, from);\n        }\n\n        if (to) {\n          obj.to = _clipPos(doc, to);\n        }\n\n        if (text) {\n          obj.text = text;\n        }\n\n        if (origin !== undefined) {\n          obj.origin = origin;\n        }\n      };\n    }\n\n    signal(doc, \"beforeChange\", doc, obj);\n\n    if (doc.cm) {\n      signal(doc.cm, \"beforeChange\", doc.cm, obj);\n    }\n\n    if (obj.canceled) {\n      if (doc.cm) {\n        doc.cm.curOp.updateInput = 2;\n      }\n\n      return null;\n    }\n\n    return {\n      from: obj.from,\n      to: obj.to,\n      text: obj.text,\n      origin: obj.origin\n    };\n  } // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n\n\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) {\n        return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly);\n      }\n\n      if (doc.cm.state.suppressEdits) {\n        return;\n      }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n\n      if (!change) {\n        return;\n      }\n    } // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n\n\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i) {\n        makeChangeInner(doc, {\n          from: split[i].from,\n          to: split[i].to,\n          text: i ? [\"\"] : change.text,\n          origin: change.origin\n        });\n      }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) {\n      return;\n    }\n\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  } // Revert a change stored in a document's history.\n\n\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n\n    if (suppress && !allowSelectionOnly) {\n      return;\n    }\n\n    var hist = doc.history,\n        event,\n        selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone,\n        dest = type == \"undo\" ? hist.undone : hist.done; // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n\n    var i = 0;\n\n    for (; i < source.length; i++) {\n      event = source[i];\n\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges) {\n        break;\n      }\n    }\n\n    if (i == source.length) {\n      return;\n    }\n\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {\n            clearRedo: false\n          });\n          return;\n        }\n\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return;\n      } else {\n        break;\n      }\n    } // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n\n\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({\n      changes: antiChanges,\n      generation: hist.generation\n    });\n    hist.generation = event.generation || ++hist.maxGeneration;\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function loop(i) {\n      var change = event.changes[i];\n      change.origin = type;\n\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {};\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n\n      if (!i && doc.cm) {\n        doc.cm.scrollIntoView({\n          from: change.from,\n          to: changeEnd(change)\n        });\n      }\n\n      var rebased = []; // Propagate to the linked documents\n\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop(i$1);\n      if (returned) return returned.v;\n    }\n  } // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n\n\n  function shiftDoc(doc, distance) {\n    if (distance == 0) {\n      return;\n    }\n\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) {\n      return new Range(Pos(range.anchor.line + distance, range.anchor.ch), Pos(range.head.line + distance, range.head.ch));\n    }), doc.sel.primIndex);\n\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++) {\n        regLineChange(doc.cm, l, \"gutter\");\n      }\n    }\n  } // More lower-level change function, handling only a single document\n  // (not linked ones).\n\n\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp) {\n      return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans);\n    }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return;\n    }\n\n    if (change.from.line > doc.lastLine()) {\n      return;\n    } // Clip the change to the size of this doc\n\n\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {\n        from: Pos(doc.first, 0),\n        to: Pos(change.to.line + shift, change.to.ch),\n        text: [lst(change.text)],\n        origin: change.origin\n      };\n    }\n\n    var last = doc.lastLine();\n\n    if (change.to.line > last) {\n      change = {\n        from: change.from,\n        to: Pos(last, getLine(doc, last).text.length),\n        text: [change.text[0]],\n        origin: change.origin\n      };\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) {\n      selAfter = computeSelAfterChange(doc, change);\n    }\n\n    if (doc.cm) {\n      makeChangeSingleDocInEditor(doc.cm, change, spans);\n    } else {\n      updateDoc(doc, change, spans);\n    }\n\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0))) {\n      doc.cantEdit = false;\n    }\n  } // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n\n\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc,\n        display = cm.display,\n        from = change.from,\n        to = change.to;\n    var recomputeMaxLength = false,\n        checkWidthStart = from.line;\n\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true;\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1) {\n      signalCursorActivity(cm);\n    }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n\n      if (recomputeMaxLength) {\n        cm.curOp.updateMaxLine = true;\n      }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n    var lendiff = change.text.length - (to.line - from.line) - 1; // Remember that these lines changed, for updating the display\n\n    if (change.full) {\n      regChange(cm);\n    } else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change)) {\n      regLineChange(cm, from.line, \"text\");\n    } else {\n      regChange(cm, from.line, to.line + 1, lendiff);\n    }\n\n    var changesHandler = hasHandler(cm, \"changes\"),\n        changeHandler = hasHandler(cm, \"change\");\n\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from,\n        to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n\n      if (changeHandler) {\n        signalLater(cm, \"change\", cm, obj);\n      }\n\n      if (changesHandler) {\n        (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj);\n      }\n    }\n\n    cm.display.selForContextMenu = null;\n  }\n\n  function _replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) {\n      to = from;\n    }\n\n    if (cmp(to, from) < 0) {\n      assign = [to, from], from = assign[0], to = assign[1];\n    }\n\n    if (typeof code == \"string\") {\n      code = doc.splitLines(code);\n    }\n\n    makeChange(doc, {\n      from: from,\n      to: to,\n      text: code,\n      origin: origin\n    });\n  } // Rebasing/resetting history to deal with externally-sourced changes\n\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  } // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n\n\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i],\n          ok = true;\n\n      if (sub.ranges) {\n        if (!sub.copied) {\n          sub = array[i] = sub.deepCopy();\n          sub.copied = true;\n        }\n\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n\n        continue;\n      }\n\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break;\n        }\n      }\n\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line,\n        to = change.to.line,\n        diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  } // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n\n\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle,\n        line = handle;\n\n    if (typeof handle == \"number\") {\n      line = getLine(doc, clipLine(doc, handle));\n    } else {\n      no = lineNo(handle);\n    }\n\n    if (no == null) {\n      return null;\n    }\n\n    if (op(line, no) && doc.cm) {\n      regLineChange(doc.cm, no, changeType);\n    }\n\n    return line;\n  } // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function chunkSize() {\n      return this.lines.length;\n    },\n    // Remove the n lines at offset 'at'.\n    removeInner: function removeInner(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n\n      this.lines.splice(at, n);\n    },\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function collapse(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function insertInner(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n\n      for (var i = 0; i < lines.length; ++i) {\n        lines[i].parent = this;\n      }\n    },\n    // Used to iterate over a part of the tree.\n    iterN: function iterN(at, n, op) {\n      for (var e = at + n; at < e; ++at) {\n        if (op(this.lines[at])) {\n          return true;\n        }\n      }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0,\n        height = 0;\n\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize();\n      height += ch.height;\n      ch.parent = this;\n    }\n\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function chunkSize() {\n      return this.size;\n    },\n    removeInner: function removeInner(at, n) {\n      this.size -= n;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n\n        if (at < sz) {\n          var rm = Math.min(n, sz - at),\n              oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n\n          if (sz == rm) {\n            this.children.splice(i--, 1);\n            child.parent = null;\n          }\n\n          if ((n -= rm) == 0) {\n            break;\n          }\n\n          at = 0;\n        } else {\n          at -= sz;\n        }\n      } // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n\n\n      if (this.size - n < 25 && (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n    collapse: function collapse(lines) {\n      for (var i = 0; i < this.children.length; ++i) {\n        this.children[i].collapse(lines);\n      }\n    },\n    insertInner: function insertInner(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n\n          break;\n        }\n\n        at -= sz;\n      }\n    },\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function maybeSpill() {\n      if (this.children.length <= 10) {\n        return;\n      }\n\n      var me = this;\n\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n\n        if (!me.parent) {\n          // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n        } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n\n        sibling.parent = me.parent;\n      } while (me.children.length > 10);\n\n      me.parent.maybeSpill();\n    },\n    iterN: function iterN(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i],\n            sz = child.chunkSize();\n\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n\n          if (child.iterN(at, used, op)) {\n            return true;\n          }\n\n          if ((n -= used) == 0) {\n            break;\n          }\n\n          at = 0;\n        } else {\n          at -= sz;\n        }\n      }\n    }\n  }; // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function LineWidget(doc, node, options) {\n    if (options) {\n      for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n          this[opt] = options[opt];\n        }\n      }\n    }\n\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm,\n        ws = this.line.widgets,\n        line = this.line,\n        no = lineNo(line);\n\n    if (no == null || !ws) {\n      return;\n    }\n\n    for (var i = 0; i < ws.length; ++i) {\n      if (ws[i] == this) {\n        ws.splice(i--, 1);\n      }\n    }\n\n    if (!ws.length) {\n      line.widgets = null;\n    }\n\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n    var this$1 = this;\n    var oldH = this.height,\n        cm = this.doc.cm,\n        line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n\n    if (!diff) {\n      return;\n    }\n\n    if (!lineIsHidden(this.doc, line)) {\n      updateLineHeight(line, line.height + diff);\n    }\n\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (_heightAtLine(line) < (cm.curOp && cm.curOp.scrollTop || cm.doc.scrollTop)) {\n      addToScrollTop(cm, diff);\n    }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n\n    if (cm && widget.noHScroll) {\n      cm.display.alignWidgets = true;\n    }\n\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n\n      if (widget.insertAt == null) {\n        widgets.push(widget);\n      } else {\n        widgets.splice(Math.min(widgets.length - 1, Math.max(0, widget.insertAt)), 0, widget);\n      }\n\n      widget.line = line;\n\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = _heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n\n        if (aboveVisible) {\n          addToScrollTop(cm, widget.height);\n        }\n\n        cm.curOp.forceUpdate = true;\n      }\n\n      return true;\n    });\n\n    if (cm) {\n      signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle));\n    }\n\n    return widget;\n  } // TEXTMARKERS\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n\n\n  var nextMarkerId = 0;\n\n  var TextMarker = function TextMarker(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  }; // Clear the marker.\n\n\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) {\n      return;\n    }\n\n    var cm = this.doc.cm,\n        withOp = cm && !cm.curOp;\n\n    if (withOp) {\n      _startOperation(cm);\n    }\n\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n\n      if (found) {\n        signalLater(this, \"clear\", found.from, found.to);\n      }\n    }\n\n    var min = null,\n        max = null;\n\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n\n      if (cm && !this.collapsed) {\n        regLineChange(cm, lineNo(line), \"text\");\n      } else if (cm) {\n        if (span.to != null) {\n          max = lineNo(line);\n        }\n\n        if (span.from != null) {\n          min = lineNo(line);\n        }\n      }\n\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm) {\n        updateLineHeight(line, textHeight(cm.display));\n      }\n    }\n\n    if (cm && this.collapsed && !cm.options.lineWrapping) {\n      for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n        var visual = visualLine(this.lines[i$1]),\n            len = lineLength(visual);\n\n        if (len > cm.display.maxLineLength) {\n          cm.display.maxLine = visual;\n          cm.display.maxLineLength = len;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n\n    if (min != null && cm && this.collapsed) {\n      regChange(cm, min, max + 1);\n    }\n\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n\n      if (cm) {\n        reCheckSelection(cm.doc);\n      }\n    }\n\n    if (cm) {\n      signalLater(cm, \"markerCleared\", cm, this, min, max);\n    }\n\n    if (withOp) {\n      _endOperation(cm);\n    }\n\n    if (this.parent) {\n      this.parent.clear();\n    }\n  }; // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n\n\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") {\n      side = 1;\n    }\n\n    var from, to;\n\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n\n        if (side == -1) {\n          return from;\n        }\n      }\n\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n\n        if (side == 1) {\n          return to;\n        }\n      }\n    }\n\n    return from && {\n      from: from,\n      to: to\n    };\n  }; // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n\n\n  TextMarker.prototype.changed = function () {\n    var this$1 = this;\n    var pos = this.find(-1, true),\n        widget = this,\n        cm = this.doc.cm;\n\n    if (!pos || !cm) {\n      return;\n    }\n\n    runInOp(cm, function () {\n      var line = pos.line,\n          lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n\n      cm.curOp.updateMaxLine = true;\n\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n\n        if (dHeight) {\n          updateLineHeight(line, line.height + dHeight);\n        }\n      }\n\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1) {\n        (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this);\n      }\n    }\n\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      (op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n\n  eventMixin(TextMarker); // Create a marker, wire it up to the right lines, and\n\n  function _markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) {\n      return markTextShared(doc, from, to, options, type);\n    } // Ensure we are in an operation.\n\n\n    if (doc.cm && !doc.cm.curOp) {\n      return operation(doc.cm, _markText)(doc, from, to, options, type);\n    }\n\n    var marker = new TextMarker(doc, type),\n        diff = cmp(from, to);\n\n    if (options) {\n      copyObj(options, marker, false);\n    } // Don't connect empty markers unless clearWhenEmpty is false\n\n\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false) {\n      return marker;\n    }\n\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n\n      if (!options.handleMouseEvents) {\n        marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\");\n      }\n\n      if (options.insertLeft) {\n        marker.widgetNode.insertLeft = true;\n      }\n    }\n\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) || from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker)) {\n        throw new Error(\"Inserting collapsed marker partially overlapping an existing one\");\n      }\n\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory) {\n      addChangeToHistory(doc, {\n        from: from,\n        to: to,\n        origin: \"markText\"\n      }, doc.sel, NaN);\n    }\n\n    var curLine = from.line,\n        cm = doc.cm,\n        updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine) {\n        updateMaxLine = true;\n      }\n\n      if (marker.collapsed && curLine != from.line) {\n        updateLineHeight(line, 0);\n      }\n\n      addMarkedSpan(line, new MarkedSpan(marker, curLine == from.line ? from.ch : null, curLine == to.line ? to.ch : null));\n      ++curLine;\n    }); // lineIsHidden depends on the presence of the spans, so needs a second pass\n\n    if (marker.collapsed) {\n      doc.iter(from.line, to.line + 1, function (line) {\n        if (lineIsHidden(doc, line)) {\n          updateLineHeight(line, 0);\n        }\n      });\n    }\n\n    if (marker.clearOnEnter) {\n      on(marker, \"beforeCursorEnter\", function () {\n        return marker.clear();\n      });\n    }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n\n      if (doc.history.done.length || doc.history.undone.length) {\n        doc.clearHistory();\n      }\n    }\n\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) {\n        cm.curOp.updateMaxLine = true;\n      }\n\n      if (marker.collapsed) {\n        regChange(cm, from.line, to.line + 1);\n      } else if (marker.className || marker.startStyle || marker.endStyle || marker.css || marker.attributes || marker.title) {\n        for (var i = from.line; i <= to.line; i++) {\n          regLineChange(cm, i, \"text\");\n        }\n      }\n\n      if (marker.atomic) {\n        reCheckSelection(cm.doc);\n      }\n\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n\n    return marker;\n  } // SHARED TEXTMARKERS\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n\n\n  var SharedTextMarker = function SharedTextMarker(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n\n    for (var i = 0; i < markers.length; ++i) {\n      markers[i].parent = this;\n    }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) {\n      return;\n    }\n\n    this.explicitlyCleared = true;\n\n    for (var i = 0; i < this.markers.length; ++i) {\n      this.markers[i].clear();\n    }\n\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj);\n  };\n\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [_markText(doc, from, to, options, type)],\n        primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) {\n        options.widgetNode = widget.cloneNode(true);\n      }\n\n      markers.push(_markText(doc, _clipPos(doc, from), _clipPos(doc, to), options, type));\n\n      for (var i = 0; i < doc.linked.length; ++i) {\n        if (doc.linked[i].isParent) {\n          return;\n        }\n      }\n\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary);\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) {\n      return m.parent;\n    });\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i],\n          pos = marker.find();\n      var mFrom = doc.clipPos(pos.from),\n          mTo = doc.clipPos(pos.to);\n\n      if (cmp(mFrom, mTo)) {\n        var subMark = _markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function loop(i) {\n      var marker = markers[i],\n          linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) {\n        return linked.push(d);\n      });\n\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) {\n      loop(i);\n    }\n  }\n\n  var nextDocId = 0;\n\n  var Doc = function Doc(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) {\n      return new Doc(text, mode, firstLine, lineSep, direction);\n    }\n\n    if (firstLine == null) {\n      firstLine = 0;\n    }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = direction == \"rtl\" ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") {\n      text = this.splitLines(text);\n    }\n\n    updateDoc(this, {\n      from: start,\n      to: start,\n      text: text\n    });\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function iter(from, to, op) {\n      if (op) {\n        this.iterN(from - this.first, to - from, op);\n      } else {\n        this.iterN(this.first, this.first + this.size, from);\n      }\n    },\n    // Non-public interface for adding and removing lines.\n    insert: function insert(at, lines) {\n      var height = 0;\n\n      for (var i = 0; i < lines.length; ++i) {\n        height += lines[i].height;\n      }\n\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function remove(at, n) {\n      this.removeInner(at - this.first, n);\n    },\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n    getValue: function getValue(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n\n      if (lineSep === false) {\n        return lines;\n      }\n\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    setValue: docMethodOp(function (code) {\n      var top = Pos(this.first, 0),\n          last = this.first + this.size - 1;\n      makeChange(this, {\n        from: top,\n        to: Pos(last, getLine(this, last).text.length),\n        text: this.splitLines(code),\n        origin: \"setValue\",\n        full: true\n      }, true);\n\n      if (this.cm) {\n        scrollToCoords(this.cm, 0, 0);\n      }\n\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function replaceRange(code, from, to, origin) {\n      from = _clipPos(this, from);\n      to = to ? _clipPos(this, to) : from;\n\n      _replaceRange(this, code, from, to, origin);\n    },\n    getRange: function getRange(from, to, lineSep) {\n      var lines = getBetween(this, _clipPos(this, from), _clipPos(this, to));\n\n      if (lineSep === false) {\n        return lines;\n      }\n\n      return lines.join(lineSep || this.lineSeparator());\n    },\n    getLine: function getLine(line) {\n      var l = this.getLineHandle(line);\n      return l && l.text;\n    },\n    getLineHandle: function getLineHandle(line) {\n      if (isLine(this, line)) {\n        return getLine(this, line);\n      }\n    },\n    getLineNumber: function getLineNumber(line) {\n      return lineNo(line);\n    },\n    getLineHandleVisualStart: function getLineHandleVisualStart(line) {\n      if (typeof line == \"number\") {\n        line = getLine(this, line);\n      }\n\n      return visualLine(line);\n    },\n    lineCount: function lineCount() {\n      return this.size;\n    },\n    firstLine: function firstLine() {\n      return this.first;\n    },\n    lastLine: function lastLine() {\n      return this.first + this.size - 1;\n    },\n    clipPos: function clipPos(pos) {\n      return _clipPos(this, pos);\n    },\n    getCursor: function getCursor(start) {\n      var range = this.sel.primary(),\n          pos;\n\n      if (start == null || start == \"head\") {\n        pos = range.head;\n      } else if (start == \"anchor\") {\n        pos = range.anchor;\n      } else if (start == \"end\" || start == \"to\" || start === false) {\n        pos = range.to();\n      } else {\n        pos = range.from();\n      }\n\n      return pos;\n    },\n    listSelections: function listSelections() {\n      return this.sel.ranges;\n    },\n    somethingSelected: function somethingSelected() {\n      return this.sel.somethingSelected();\n    },\n    setCursor: docMethodOp(function (line, ch, options) {\n      setSimpleSelection(this, _clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function (anchor, head, options) {\n      setSimpleSelection(this, _clipPos(this, anchor), _clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function (head, other, options) {\n      extendSelection(this, _clipPos(this, head), other && _clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function (heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function (f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function (ranges, primary, options) {\n      if (!ranges.length) {\n        return;\n      }\n\n      var out = [];\n\n      for (var i = 0; i < ranges.length; i++) {\n        out[i] = new Range(_clipPos(this, ranges[i].anchor), _clipPos(this, ranges[i].head));\n      }\n\n      if (primary == null) {\n        primary = Math.min(ranges.length - 1, this.sel.primIndex);\n      }\n\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function (anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(_clipPos(this, anchor), _clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n    getSelection: function getSelection(lineSep) {\n      var ranges = this.sel.ranges,\n          lines;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n\n      if (lineSep === false) {\n        return lines;\n      } else {\n        return lines.join(lineSep || this.lineSeparator());\n      }\n    },\n    getSelections: function getSelections(lineSep) {\n      var parts = [],\n          ranges = this.sel.ranges;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n\n        if (lineSep !== false) {\n          sel = sel.join(lineSep || this.lineSeparator());\n        }\n\n        parts[i] = sel;\n      }\n\n      return parts;\n    },\n    replaceSelection: function replaceSelection(code, collapse, origin) {\n      var dup = [];\n\n      for (var i = 0; i < this.sel.ranges.length; i++) {\n        dup[i] = code;\n      }\n\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function (code, collapse, origin) {\n      var changes = [],\n          sel = this.sel;\n\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {\n          from: range.from(),\n          to: range.to(),\n          text: this.splitLines(code[i]),\n          origin: origin\n        };\n      }\n\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--) {\n        makeChange(this, changes[i$1]);\n      }\n\n      if (newSel) {\n        setSelectionReplaceHistory(this, newSel);\n      } else if (this.cm) {\n        ensureCursorVisible(this.cm);\n      }\n    }),\n    undo: docMethodOp(function () {\n      makeChangeFromHistory(this, \"undo\");\n    }),\n    redo: docMethodOp(function () {\n      makeChangeFromHistory(this, \"redo\");\n    }),\n    undoSelection: docMethodOp(function () {\n      makeChangeFromHistory(this, \"undo\", true);\n    }),\n    redoSelection: docMethodOp(function () {\n      makeChangeFromHistory(this, \"redo\", true);\n    }),\n    setExtending: function setExtending(val) {\n      this.extend = val;\n    },\n    getExtending: function getExtending() {\n      return this.extend;\n    },\n    historySize: function historySize() {\n      var hist = this.history,\n          done = 0,\n          undone = 0;\n\n      for (var i = 0; i < hist.done.length; i++) {\n        if (!hist.done[i].ranges) {\n          ++done;\n        }\n      }\n\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) {\n        if (!hist.undone[i$1].ranges) {\n          ++undone;\n        }\n      }\n\n      return {\n        undo: done,\n        redo: undone\n      };\n    },\n    clearHistory: function clearHistory() {\n      var this$1 = this;\n      this.history = new History(this.history.maxGeneration);\n      linkedDocs(this, function (doc) {\n        return doc.history = this$1.history;\n      }, true);\n    },\n    markClean: function markClean() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function changeGeneration(forceSplit) {\n      if (forceSplit) {\n        this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null;\n      }\n\n      return this.history.generation;\n    },\n    isClean: function isClean(gen) {\n      return this.history.generation == (gen || this.cleanGeneration);\n    },\n    getHistory: function getHistory() {\n      return {\n        done: copyHistoryArray(this.history.done),\n        undone: copyHistoryArray(this.history.undone)\n      };\n    },\n    setHistory: function setHistory(histData) {\n      var hist = this.history = new History(this.history.maxGeneration);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n    setGutterMarker: docMethodOp(function (line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n\n        if (!value && isEmpty(markers)) {\n          line.gutterMarkers = null;\n        }\n\n        return true;\n      });\n    }),\n    clearGutter: docMethodOp(function (gutterID) {\n      var this$1 = this;\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n\n            if (isEmpty(line.gutterMarkers)) {\n              line.gutterMarkers = null;\n            }\n\n            return true;\n          });\n        }\n      });\n    }),\n    lineInfo: function lineInfo(line) {\n      var n;\n\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) {\n          return null;\n        }\n\n        n = line;\n        line = getLine(this, line);\n\n        if (!line) {\n          return null;\n        }\n      } else {\n        n = lineNo(line);\n\n        if (n == null) {\n          return null;\n        }\n      }\n\n      return {\n        line: n,\n        handle: line,\n        text: line.text,\n        gutterMarkers: line.gutterMarkers,\n        textClass: line.textClass,\n        bgClass: line.bgClass,\n        wrapClass: line.wrapClass,\n        widgets: line.widgets\n      };\n    },\n    addLineClass: docMethodOp(function (handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n\n        if (!line[prop]) {\n          line[prop] = cls;\n        } else if (classTest(cls).test(line[prop])) {\n          return false;\n        } else {\n          line[prop] += \" \" + cls;\n        }\n\n        return true;\n      });\n    }),\n    removeLineClass: docMethodOp(function (handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\" : where == \"background\" ? \"bgClass\" : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n\n        if (!cur) {\n          return false;\n        } else if (cls == null) {\n          line[prop] = null;\n        } else {\n          var found = cur.match(classTest(cls));\n\n          if (!found) {\n            return false;\n          }\n\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n\n        return true;\n      });\n    }),\n    addLineWidget: docMethodOp(function (handle, node, options) {\n      return addLineWidget(this, handle, node, options);\n    }),\n    removeLineWidget: function removeLineWidget(widget) {\n      widget.clear();\n    },\n    markText: function markText(from, to, options) {\n      return _markText(this, _clipPos(this, from), _clipPos(this, to), options, options && options.type || \"range\");\n    },\n    setBookmark: function setBookmark(pos, options) {\n      var realOpts = {\n        replacedWith: options && (options.nodeType == null ? options.widget : options),\n        insertLeft: options && options.insertLeft,\n        clearWhenEmpty: false,\n        shared: options && options.shared,\n        handleMouseEvents: options && options.handleMouseEvents\n      };\n      pos = _clipPos(this, pos);\n      return _markText(this, pos, pos, realOpts, \"bookmark\");\n    },\n    findMarksAt: function findMarksAt(pos) {\n      pos = _clipPos(this, pos);\n      var markers = [],\n          spans = getLine(this, pos.line).markedSpans;\n\n      if (spans) {\n        for (var i = 0; i < spans.length; ++i) {\n          var span = spans[i];\n\n          if ((span.from == null || span.from <= pos.ch) && (span.to == null || span.to >= pos.ch)) {\n            markers.push(span.marker.parent || span.marker);\n          }\n        }\n      }\n\n      return markers;\n    },\n    findMarks: function findMarks(from, to, filter) {\n      from = _clipPos(this, from);\n      to = _clipPos(this, to);\n      var found = [],\n          lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n\n        if (spans) {\n          for (var i = 0; i < spans.length; i++) {\n            var span = spans[i];\n\n            if (!(span.to != null && lineNo == from.line && from.ch >= span.to || span.from == null && lineNo != from.line || span.from != null && lineNo == to.line && span.from >= to.ch) && (!filter || filter(span.marker))) {\n              found.push(span.marker.parent || span.marker);\n            }\n          }\n        }\n\n        ++lineNo;\n      });\n      return found;\n    },\n    getAllMarks: function getAllMarks() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n\n        if (sps) {\n          for (var i = 0; i < sps.length; ++i) {\n            if (sps[i].from != null) {\n              markers.push(sps[i].marker);\n            }\n          }\n        }\n      });\n      return markers;\n    },\n    posFromIndex: function posFromIndex(off) {\n      var ch,\n          lineNo = this.first,\n          sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n\n        if (sz > off) {\n          ch = off;\n          return true;\n        }\n\n        off -= sz;\n        ++lineNo;\n      });\n      return _clipPos(this, Pos(lineNo, ch));\n    },\n    indexFromPos: function indexFromPos(coords) {\n      coords = _clipPos(this, coords);\n      var index = coords.ch;\n\n      if (coords.line < this.first || coords.ch < 0) {\n        return 0;\n      }\n\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) {\n        // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index;\n    },\n    copy: function copy(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop;\n      doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n\n      return doc;\n    },\n    linkedDoc: function linkedDoc(options) {\n      if (!options) {\n        options = {};\n      }\n\n      var from = this.first,\n          to = this.first + this.size;\n\n      if (options.from != null && options.from > from) {\n        from = options.from;\n      }\n\n      if (options.to != null && options.to < to) {\n        to = options.to;\n      }\n\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n\n      if (options.sharedHist) {\n        copy.history = this.history;\n      }\n\n      (this.linked || (this.linked = [])).push({\n        doc: copy,\n        sharedHist: options.sharedHist\n      });\n      copy.linked = [{\n        doc: this,\n        isParent: true,\n        sharedHist: options.sharedHist\n      }];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy;\n    },\n    unlinkDoc: function unlinkDoc(other) {\n      if (other instanceof CodeMirror) {\n        other = other.doc;\n      }\n\n      if (this.linked) {\n        for (var i = 0; i < this.linked.length; ++i) {\n          var link = this.linked[i];\n\n          if (link.doc != other) {\n            continue;\n          }\n\n          this.linked.splice(i, 1);\n          other.unlinkDoc(this);\n          detachSharedMarkers(findSharedMarkers(this));\n          break;\n        }\n      } // If the histories were shared, split them again\n\n\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) {\n          return splitIds.push(doc.id);\n        }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function iterLinkedDocs(f) {\n      linkedDocs(this, f);\n    },\n    getMode: function getMode() {\n      return this.mode;\n    },\n    getEditor: function getEditor() {\n      return this.cm;\n    },\n    splitLines: function splitLines(str) {\n      if (this.lineSep) {\n        return str.split(this.lineSep);\n      }\n\n      return splitLinesAuto(str);\n    },\n    lineSeparator: function lineSeparator() {\n      return this.lineSep || \"\\n\";\n    },\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") {\n        dir = \"ltr\";\n      }\n\n      if (dir == this.direction) {\n        return;\n      }\n\n      this.direction = dir;\n      this.iter(function (line) {\n        return line.order = null;\n      });\n\n      if (this.cm) {\n        directionChanged(this.cm);\n      }\n    })\n  }); // Public alias.\n\n  Doc.prototype.eachLine = Doc.prototype.iter; // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n      return;\n    }\n\n    e_preventDefault(e);\n\n    if (ie) {\n      lastDrop = +new Date();\n    }\n\n    var pos = posFromMouse(cm, e, true),\n        files = e.dataTransfer.files;\n\n    if (!pos || cm.isReadOnly()) {\n      return;\n    } // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n\n\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length,\n          text = Array(n),\n          read = 0;\n\n      var markAsReadAndPasteIfAllFilesAreRead = function markAsReadAndPasteIfAllFilesAreRead() {\n        if (++read == n) {\n          operation(cm, function () {\n            pos = _clipPos(cm.doc, pos);\n            var change = {\n              from: pos,\n              to: pos,\n              text: cm.doc.splitLines(text.filter(function (t) {\n                return t != null;\n              }).join(cm.doc.lineSeparator())),\n              origin: \"paste\"\n            };\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(_clipPos(cm.doc, pos), _clipPos(cm.doc, changeEnd(change))));\n          })();\n        }\n      };\n\n      var readTextFromFile = function readTextFromFile(file, i) {\n        if (cm.options.allowDropFileTypes && indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          markAsReadAndPasteIfAllFilesAreRead();\n          return;\n        }\n\n        var reader = new FileReader();\n\n        reader.onerror = function () {\n          return markAsReadAndPasteIfAllFilesAreRead();\n        };\n\n        reader.onload = function () {\n          var content = reader.result;\n\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            markAsReadAndPasteIfAllFilesAreRead();\n            return;\n          }\n\n          text[i] = content;\n          markAsReadAndPasteIfAllFilesAreRead();\n        };\n\n        reader.readAsText(file);\n      };\n\n      for (var i = 0; i < files.length; i++) {\n        readTextFromFile(files[i], i);\n      }\n    } else {\n      // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e); // Ensure the editor is re-focused\n\n        setTimeout(function () {\n          return cm.display.input.focus();\n        }, 20);\n        return;\n      }\n\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n\n        if (text$1) {\n          var selected;\n\n          if (cm.state.draggingText && !cm.state.draggingText.copy) {\n            selected = cm.listSelections();\n          }\n\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n\n          if (selected) {\n            for (var i$1 = 0; i$1 < selected.length; ++i$1) {\n              _replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\");\n            }\n          }\n\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      } catch (e) {}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date() - lastDrop < 100)) {\n      e_stop(e);\n      return;\n    }\n\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) {\n      return;\n    }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\"; // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img); // Force a relayout, or Opera won't use our image for some obscure reason\n\n        img._top = img.offsetTop;\n      }\n\n      e.dataTransfer.setDragImage(img, 0, 0);\n\n      if (presto) {\n        img.parentNode.removeChild(img);\n      }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n\n    if (!pos) {\n      return;\n    }\n\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  } // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) {\n      return;\n    }\n\n    var byClass = document.getElementsByClassName(\"CodeMirror\"),\n        editors = [];\n\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n\n      if (cm) {\n        editors.push(cm);\n      }\n    }\n\n    if (editors.length) {\n      editors[0].operation(function () {\n        for (var i = 0; i < editors.length; i++) {\n          f(editors[i]);\n        }\n      });\n    }\n  }\n\n  var globalsRegistered = false;\n\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) {\n      return;\n    }\n\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) {\n        resizeTimer = setTimeout(function () {\n          resizeTimer = null;\n          forEachCodeMirror(onResize);\n        }, 100);\n      }\n    }); // When the window loses focus, we want to show the editor as blurred\n\n    on(window, \"blur\", function () {\n      return forEachCodeMirror(onBlur);\n    });\n  } // Called when the window resizes\n\n\n  function onResize(cm) {\n    var d = cm.display; // Might be a text scaling operation, clear size caches.\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\",\n    8: \"Backspace\",\n    9: \"Tab\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Ctrl\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Esc\",\n    32: \"Space\",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"Left\",\n    38: \"Up\",\n    39: \"Right\",\n    40: \"Down\",\n    44: \"PrintScrn\",\n    45: \"Insert\",\n    46: \"Delete\",\n    59: \";\",\n    61: \"=\",\n    91: \"Mod\",\n    92: \"Mod\",\n    93: \"Mod\",\n    106: \"*\",\n    107: \"=\",\n    109: \"-\",\n    110: \".\",\n    111: \"/\",\n    145: \"ScrollLock\",\n    173: \"-\",\n    186: \";\",\n    187: \"=\",\n    188: \",\",\n    189: \"-\",\n    190: \".\",\n    191: \"/\",\n    192: \"`\",\n    219: \"[\",\n    220: \"\\\\\",\n    221: \"]\",\n    222: \"'\",\n    63232: \"Up\",\n    63233: \"Down\",\n    63234: \"Left\",\n    63235: \"Right\",\n    63272: \"Delete\",\n    63273: \"Home\",\n    63275: \"End\",\n    63276: \"PageUp\",\n    63277: \"PageDown\",\n    63302: \"Insert\"\n  }; // Number keys\n\n  for (var i = 0; i < 10; i++) {\n    keyNames[i + 48] = keyNames[i + 96] = String(i);\n  } // Alphabetic keys\n\n\n  for (var i$1 = 65; i$1 <= 90; i$1++) {\n    keyNames[i$1] = String.fromCharCode(i$1);\n  } // Function keys\n\n\n  for (var i$2 = 1; i$2 <= 12; i$2++) {\n    keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2;\n  }\n\n  var keyMap = {};\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\",\n    \"Right\": \"goCharRight\",\n    \"Up\": \"goLineUp\",\n    \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\",\n    \"Home\": \"goLineStartSmart\",\n    \"PageUp\": \"goPageUp\",\n    \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\",\n    \"Backspace\": \"delCharBefore\",\n    \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\",\n    \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\",\n    \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  }; // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\",\n    \"Ctrl-D\": \"deleteLine\",\n    \"Ctrl-Z\": \"undo\",\n    \"Shift-Ctrl-Z\": \"redo\",\n    \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\",\n    \"Ctrl-End\": \"goDocEnd\",\n    \"Ctrl-Up\": \"goLineUp\",\n    \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\",\n    \"Ctrl-Right\": \"goGroupRight\",\n    \"Alt-Left\": \"goLineStart\",\n    \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Delete\": \"delGroupAfter\",\n    \"Ctrl-S\": \"save\",\n    \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\",\n    \"Shift-Ctrl-G\": \"findPrev\",\n    \"Shift-Ctrl-F\": \"replace\",\n    \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\",\n    \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\",\n    \"Shift-Ctrl-U\": \"redoSelection\",\n    \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  }; // Very basic readline/emacs-style bindings, which are standard on Mac.\n\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\",\n    \"Ctrl-B\": \"goCharLeft\",\n    \"Ctrl-P\": \"goLineUp\",\n    \"Ctrl-N\": \"goLineDown\",\n    \"Alt-F\": \"goWordRight\",\n    \"Alt-B\": \"goWordLeft\",\n    \"Ctrl-A\": \"goLineStart\",\n    \"Ctrl-E\": \"goLineEnd\",\n    \"Ctrl-V\": \"goPageDown\",\n    \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\",\n    \"Ctrl-H\": \"delCharBefore\",\n    \"Alt-D\": \"delWordAfter\",\n    \"Alt-Backspace\": \"delWordBefore\",\n    \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\",\n    \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\",\n    \"Cmd-D\": \"deleteLine\",\n    \"Cmd-Z\": \"undo\",\n    \"Shift-Cmd-Z\": \"redo\",\n    \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\",\n    \"Cmd-Up\": \"goDocStart\",\n    \"Cmd-End\": \"goDocEnd\",\n    \"Cmd-Down\": \"goDocEnd\",\n    \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\",\n    \"Cmd-Left\": \"goLineLeft\",\n    \"Cmd-Right\": \"goLineRight\",\n    \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\",\n    \"Alt-Delete\": \"delGroupAfter\",\n    \"Cmd-S\": \"save\",\n    \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\",\n    \"Shift-Cmd-G\": \"findPrev\",\n    \"Cmd-Alt-F\": \"replace\",\n    \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\",\n    \"Cmd-]\": \"indentMore\",\n    \"Cmd-Backspace\": \"delWrappedLineLeft\",\n    \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\",\n    \"Shift-Cmd-U\": \"redoSelection\",\n    \"Ctrl-Up\": \"goDocStart\",\n    \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault; // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n\n      if (/^(cmd|meta|m)$/i.test(mod)) {\n        cmd = true;\n      } else if (/^a(lt)?$/i.test(mod)) {\n        alt = true;\n      } else if (/^(c|ctrl|control)$/i.test(mod)) {\n        ctrl = true;\n      } else if (/^s(hift)?$/i.test(mod)) {\n        shift = true;\n      } else {\n        throw new Error(\"Unrecognized modifier name: \" + mod);\n      }\n    }\n\n    if (alt) {\n      name = \"Alt-\" + name;\n    }\n\n    if (ctrl) {\n      name = \"Ctrl-\" + name;\n    }\n\n    if (cmd) {\n      name = \"Cmd-\" + name;\n    }\n\n    if (shift) {\n      name = \"Shift-\" + name;\n    }\n\n    return name;\n  } // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n\n\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n\n    for (var keyname in keymap) {\n      if (keymap.hasOwnProperty(keyname)) {\n        var value = keymap[keyname];\n\n        if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) {\n          continue;\n        }\n\n        if (value == \"...\") {\n          delete keymap[keyname];\n          continue;\n        }\n\n        var keys = map(keyname.split(\" \"), normalizeKeyName);\n\n        for (var i = 0; i < keys.length; i++) {\n          var val = void 0,\n              name = void 0;\n\n          if (i == keys.length - 1) {\n            name = keys.join(\" \");\n            val = value;\n          } else {\n            name = keys.slice(0, i + 1).join(\" \");\n            val = \"...\";\n          }\n\n          var prev = copy[name];\n\n          if (!prev) {\n            copy[name] = val;\n          } else if (prev != val) {\n            throw new Error(\"Inconsistent bindings for \" + name);\n          }\n        }\n\n        delete keymap[keyname];\n      }\n    }\n\n    for (var prop in copy) {\n      keymap[prop] = copy[prop];\n    }\n\n    return keymap;\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n\n    if (found === false) {\n      return \"nothing\";\n    }\n\n    if (found === \"...\") {\n      return \"multi\";\n    }\n\n    if (found != null && handle(found)) {\n      return \"handled\";\n    }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\") {\n        return lookupKey(key, map.fallthrough, handle, context);\n      }\n\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n\n        if (result) {\n          return result;\n        }\n      }\n    }\n  } // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n\n\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\";\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n\n    if (event.altKey && base != \"Alt\") {\n      name = \"Alt-\" + name;\n    }\n\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") {\n      name = \"Ctrl-\" + name;\n    }\n\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Cmd\") {\n      name = \"Cmd-\" + name;\n    }\n\n    if (!noShift && event.shiftKey && base != \"Shift\") {\n      name = \"Shift-\" + name;\n    }\n\n    return name;\n  } // Look up the name of a key as indicated by an event object.\n\n\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) {\n      return false;\n    }\n\n    var name = keyNames[event.keyCode];\n\n    if (name == null || event.altGraphKey) {\n      return false;\n    } // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n\n\n    if (event.keyCode == 3 && event.code) {\n      name = event.code;\n    }\n\n    return addModifierNames(name, event, noShift);\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val;\n  } // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n\n\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges,\n        kill = []; // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break;\n        }\n      }\n\n      kill.push(toKill);\n    } // Next, remove those actual ranges.\n\n\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--) {\n        _replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\");\n      }\n\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target;\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\");\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      if (cm.doc.direction == \"rtl\") {\n        dir = -dir;\n      }\n\n      var order = getOrder(lineObj, cm.doc.direction);\n\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = dir < 0 == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch; // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) {\n            return measureCharPrepared(cm, prep, ch).top == targetTop;\n          }, dir < 0 == (part.level == 1) ? part.from : part.to - 1, ch);\n\n          if (sticky == \"before\") {\n            ch = moveCharLogically(lineObj, ch, 1);\n          }\n        } else {\n          ch = dir < 0 ? part.to : part.from;\n        }\n\n        return new Pos(lineNo, ch, sticky);\n      }\n    }\n\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\");\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n\n    if (!bidi) {\n      return moveLogically(line, start, dir);\n    }\n\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky),\n        part = bidi[partPos];\n\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir);\n    }\n\n    var mv = function mv(pos, dir) {\n      return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir);\n    };\n\n    var prep;\n\n    var getWrappedLineExtent = function getWrappedLineExtent(ch) {\n      if (!cm.options.lineWrapping) {\n        return {\n          begin: 0,\n          end: line.text.length\n        };\n      }\n\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch);\n    };\n\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = part.level == 1 == dir < 0;\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky);\n      }\n    } // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n\n    var searchInVisualLine = function searchInVisualLine(partPos, dir, wrappedLineExtent) {\n      var getRes = function getRes(ch, moveInStorageOrder) {\n        return moveInStorageOrder ? new Pos(start.line, mv(ch, 1), \"before\") : new Pos(start.line, ch, \"after\");\n      };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = dir > 0 == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n\n        if (part.from <= ch && ch < part.to) {\n          return getRes(ch, moveInStorageOrder);\n        }\n\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) {\n          return getRes(ch, moveInStorageOrder);\n        }\n      }\n    }; // Case 3a: Look for other bidi parts on the same visual line\n\n\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n\n    if (res) {\n      return res;\n    } // Case 3b: Look for other bidi parts on the next visual line\n\n\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n\n      if (res) {\n        return res;\n      }\n    } // Case 4: Nowhere to move\n\n\n    return null;\n  } // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n\n\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function singleSelection(cm) {\n      return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll);\n    },\n    killLine: function killLine(cm) {\n      return deleteNearSelection(cm, function (range) {\n        if (range.empty()) {\n          var len = getLine(cm.doc, range.head.line).text.length;\n\n          if (range.head.ch == len && range.head.line < cm.lastLine()) {\n            return {\n              from: range.head,\n              to: Pos(range.head.line + 1, 0)\n            };\n          } else {\n            return {\n              from: range.head,\n              to: Pos(range.head.line, len)\n            };\n          }\n        } else {\n          return {\n            from: range.from(),\n            to: range.to()\n          };\n        }\n      });\n    },\n    deleteLine: function deleteLine(cm) {\n      return deleteNearSelection(cm, function (range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: _clipPos(cm.doc, Pos(range.to().line + 1, 0))\n        };\n      });\n    },\n    delLineLeft: function delLineLeft(cm) {\n      return deleteNearSelection(cm, function (range) {\n        return {\n          from: Pos(range.from().line, 0),\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineLeft: function delWrappedLineLeft(cm) {\n      return deleteNearSelection(cm, function (range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var leftPos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n        return {\n          from: leftPos,\n          to: range.from()\n        };\n      });\n    },\n    delWrappedLineRight: function delWrappedLineRight(cm) {\n      return deleteNearSelection(cm, function (range) {\n        var top = cm.charCoords(range.head, \"div\").top + 5;\n        var rightPos = cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n        return {\n          from: range.from(),\n          to: rightPos\n        };\n      });\n    },\n    undo: function undo(cm) {\n      return cm.undo();\n    },\n    redo: function redo(cm) {\n      return cm.redo();\n    },\n    undoSelection: function undoSelection(cm) {\n      return cm.undoSelection();\n    },\n    redoSelection: function redoSelection(cm) {\n      return cm.redoSelection();\n    },\n    goDocStart: function goDocStart(cm) {\n      return cm.extendSelection(Pos(cm.firstLine(), 0));\n    },\n    goDocEnd: function goDocEnd(cm) {\n      return cm.extendSelection(Pos(cm.lastLine()));\n    },\n    goLineStart: function goLineStart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineStart(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineStartSmart: function goLineStartSmart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineStartSmart(cm, range.head);\n      }, {\n        origin: \"+move\",\n        bias: 1\n      });\n    },\n    goLineEnd: function goLineEnd(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        return lineEnd(cm, range.head.line);\n      }, {\n        origin: \"+move\",\n        bias: -1\n      });\n    },\n    goLineRight: function goLineRight(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: cm.display.lineDiv.offsetWidth + 100,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeft: function goLineLeft(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        return cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n      }, sel_move);\n    },\n    goLineLeftSmart: function goLineLeftSmart(cm) {\n      return cm.extendSelectionsBy(function (range) {\n        var top = cm.cursorCoords(range.head, \"div\").top + 5;\n        var pos = cm.coordsChar({\n          left: 0,\n          top: top\n        }, \"div\");\n\n        if (pos.ch < cm.getLine(pos.line).search(/\\S/)) {\n          return lineStartSmart(cm, range.head);\n        }\n\n        return pos;\n      }, sel_move);\n    },\n    goLineUp: function goLineUp(cm) {\n      return cm.moveV(-1, \"line\");\n    },\n    goLineDown: function goLineDown(cm) {\n      return cm.moveV(1, \"line\");\n    },\n    goPageUp: function goPageUp(cm) {\n      return cm.moveV(-1, \"page\");\n    },\n    goPageDown: function goPageDown(cm) {\n      return cm.moveV(1, \"page\");\n    },\n    goCharLeft: function goCharLeft(cm) {\n      return cm.moveH(-1, \"char\");\n    },\n    goCharRight: function goCharRight(cm) {\n      return cm.moveH(1, \"char\");\n    },\n    goColumnLeft: function goColumnLeft(cm) {\n      return cm.moveH(-1, \"column\");\n    },\n    goColumnRight: function goColumnRight(cm) {\n      return cm.moveH(1, \"column\");\n    },\n    goWordLeft: function goWordLeft(cm) {\n      return cm.moveH(-1, \"word\");\n    },\n    goGroupRight: function goGroupRight(cm) {\n      return cm.moveH(1, \"group\");\n    },\n    goGroupLeft: function goGroupLeft(cm) {\n      return cm.moveH(-1, \"group\");\n    },\n    goWordRight: function goWordRight(cm) {\n      return cm.moveH(1, \"word\");\n    },\n    delCharBefore: function delCharBefore(cm) {\n      return cm.deleteH(-1, \"char\");\n    },\n    delCharAfter: function delCharAfter(cm) {\n      return cm.deleteH(1, \"char\");\n    },\n    delWordBefore: function delWordBefore(cm) {\n      return cm.deleteH(-1, \"word\");\n    },\n    delWordAfter: function delWordAfter(cm) {\n      return cm.deleteH(1, \"word\");\n    },\n    delGroupBefore: function delGroupBefore(cm) {\n      return cm.deleteH(-1, \"group\");\n    },\n    delGroupAfter: function delGroupAfter(cm) {\n      return cm.deleteH(1, \"group\");\n    },\n    indentAuto: function indentAuto(cm) {\n      return cm.indentSelection(\"smart\");\n    },\n    indentMore: function indentMore(cm) {\n      return cm.indentSelection(\"add\");\n    },\n    indentLess: function indentLess(cm) {\n      return cm.indentSelection(\"subtract\");\n    },\n    insertTab: function insertTab(cm) {\n      return cm.replaceSelection(\"\\t\");\n    },\n    insertSoftTab: function insertSoftTab(cm) {\n      var spaces = [],\n          ranges = cm.listSelections(),\n          tabSize = cm.options.tabSize;\n\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function defaultTab(cm) {\n      if (cm.somethingSelected()) {\n        cm.indentSelection(\"add\");\n      } else {\n        cm.execCommand(\"insertTab\");\n      }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function transposeChars(cm) {\n      return runInOp(cm, function () {\n        var ranges = cm.listSelections(),\n            newSel = [];\n\n        for (var i = 0; i < ranges.length; i++) {\n          if (!ranges[i].empty()) {\n            continue;\n          }\n\n          var cur = ranges[i].head,\n              line = getLine(cm.doc, cur.line).text;\n\n          if (line) {\n            if (cur.ch == line.length) {\n              cur = new Pos(cur.line, cur.ch - 1);\n            }\n\n            if (cur.ch > 0) {\n              cur = new Pos(cur.line, cur.ch + 1);\n              cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2), Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n            } else if (cur.line > cm.doc.first) {\n              var prev = getLine(cm.doc, cur.line - 1).text;\n\n              if (prev) {\n                cur = new Pos(cur.line, 1);\n                cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() + prev.charAt(prev.length - 1), Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n              }\n            }\n          }\n\n          newSel.push(new Range(cur, cur));\n        }\n\n        cm.setSelections(newSel);\n      });\n    },\n    newlineAndIndent: function newlineAndIndent(cm) {\n      return runInOp(cm, function () {\n        var sels = cm.listSelections();\n\n        for (var i = sels.length - 1; i >= 0; i--) {\n          cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\");\n        }\n\n        sels = cm.listSelections();\n\n        for (var i$1 = 0; i$1 < sels.length; i$1++) {\n          cm.indentLine(sels[i$1].from().line, null, true);\n        }\n\n        ensureCursorVisible(cm);\n      });\n    },\n    openLine: function openLine(cm) {\n      return cm.replaceSelection(\"\\n\", \"start\");\n    },\n    toggleOverwrite: function toggleOverwrite(cm) {\n      return cm.toggleOverwrite();\n    }\n  };\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n\n    if (visual != line) {\n      lineN = lineNo(visual);\n    }\n\n    return endOfLine(true, cm, visual, lineN, 1);\n  }\n\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n\n    if (visual != line) {\n      lineN = lineNo(visual);\n    }\n\n    return endOfLine(true, cm, line, lineN, -1);\n  }\n\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(start.ch, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky);\n    }\n\n    return start;\n  } // Run a handler that was bound to a key.\n\n\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n\n      if (!bound) {\n        return false;\n      }\n    } // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n\n\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift,\n        done = false;\n\n    try {\n      if (cm.isReadOnly()) {\n        cm.state.suppressEdits = true;\n      }\n\n      if (dropShift) {\n        cm.display.shift = false;\n      }\n\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n\n    return done;\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n\n      if (result) {\n        return result;\n      }\n    }\n\n    return cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm) || lookupKey(name, cm.options.keyMap, handle, cm);\n  } // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n\n  var stopSeq = new Delayed();\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n\n    if (seq) {\n      if (isModifierKey(name)) {\n        return \"handled\";\n      }\n\n      if (/\\'$/.test(name)) {\n        cm.state.keySeq = null;\n      } else {\n        stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        });\n      }\n\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) {\n        return true;\n      }\n    }\n\n    return dispatchKeyInner(cm, name, e, handle);\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\") {\n      cm.state.keySeq = name;\n    }\n\n    if (result == \"handled\") {\n      signalLater(cm, \"keyHandled\", cm, name, e);\n    }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result;\n  } // Handle a key from the keydown event.\n\n\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n\n    if (!name) {\n      return false;\n    }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) {\n        return doHandleBinding(cm, b, true);\n      }) || dispatchKey(cm, name, e, function (b) {\n        if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion) {\n          return doHandleBinding(cm, b);\n        }\n      });\n    } else {\n      return dispatchKey(cm, name, e, function (b) {\n        return doHandleBinding(cm, b);\n      });\n    }\n  } // Handle a key from the keypress event\n\n\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) {\n      return doHandleBinding(cm, b, true);\n    });\n  }\n\n  var lastStoppedKey = null;\n\n  function onKeyDown(e) {\n    var cm = this;\n    cm.curOp.focus = activeElt();\n\n    if (signalDOMEvent(cm, e)) {\n      return;\n    } // IE does strange things with escape.\n\n\n    if (ie && ie_version < 11 && e.keyCode == 27) {\n      e.returnValue = false;\n    }\n\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n\n    if (presto) {\n      lastStoppedKey = handled ? code : null; // Opera has no cut event... we try to at least catch the key combo\n\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey)) {\n        cm.replaceSelection(\"\", null, \"cut\");\n      }\n    }\n\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand) {\n      document.execCommand(\"cut\");\n    } // Turn mouse into crosshair when Alt is held on Mac.\n\n\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className)) {\n      showCrossHair(cm);\n    }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) {\n      this.doc.sel.shift = false;\n    }\n\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) {\n      return;\n    }\n\n    var keyCode = e.keyCode,\n        charCode = e.charCode;\n\n    if (presto && keyCode == lastStoppedKey) {\n      lastStoppedKey = null;\n      e_preventDefault(e);\n      return;\n    }\n\n    if (presto && (!e.which || e.which < 10) && handleKeyBinding(cm, e)) {\n      return;\n    }\n\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode); // Some browsers fire keypress events for backspace\n\n    if (ch == \"\\x08\") {\n      return;\n    }\n\n    if (handleCharBinding(cm, e, ch)) {\n      return;\n    }\n\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function PastClick(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time && cmp(pos, this.pos) == 0 && button == this.button;\n  };\n\n  var lastClick, lastDoubleClick;\n\n  function clickRepeat(pos, button) {\n    var now = +new Date();\n\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\";\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\";\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\";\n    }\n  } // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n\n\n  function onMouseDown(e) {\n    var cm = this,\n        display = cm.display;\n\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) {\n      return;\n    }\n\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () {\n          return display.scroller.draggable = true;\n        }, 100);\n      }\n\n      return;\n    }\n\n    if (clickInGutter(cm, e)) {\n      return;\n    }\n\n    var pos = posFromMouse(cm, e),\n        button = e_button(e),\n        repeat = pos ? clickRepeat(pos, button) : \"single\";\n    window.focus(); // #3261: make sure, that we're not starting a second selection\n\n    if (button == 1 && cm.state.selectingText) {\n      cm.state.selectingText(e);\n    }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) {\n      return;\n    }\n\n    if (button == 1) {\n      if (pos) {\n        leftButtonDown(cm, pos, repeat, e);\n      } else if (e_target(e) == display.scroller) {\n        e_preventDefault(e);\n      }\n    } else if (button == 2) {\n      if (pos) {\n        extendSelection(cm.doc, pos);\n      }\n\n      setTimeout(function () {\n        return display.input.focus();\n      }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) {\n        cm.display.input.onContextMenu(e);\n      } else {\n        delayBlurEvent(cm);\n      }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n\n    if (repeat == \"double\") {\n      name = \"Double\" + name;\n    } else if (repeat == \"triple\") {\n      name = \"Triple\" + name;\n    }\n\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n    return dispatchKey(cm, addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") {\n        bound = commands[bound];\n      }\n\n      if (!bound) {\n        return false;\n      }\n\n      var done = false;\n\n      try {\n        if (cm.isReadOnly()) {\n          cm.state.suppressEdits = true;\n        }\n\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n\n      return done;\n    });\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n\n    if (value.extend == null || cm.doc.extend) {\n      value.extend = cm.doc.extend || event.shiftKey;\n    }\n\n    if (value.addNew == null) {\n      value.addNew = mac ? event.metaKey : event.ctrlKey;\n    }\n\n    if (value.moveOnDrag == null) {\n      value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey);\n    }\n\n    return value;\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) {\n      setTimeout(bind(ensureFocus, cm), 0);\n    } else {\n      cm.curOp.focus = activeElt();\n    }\n\n    var behavior = configureMouse(cm, repeat, event);\n    var sel = cm.doc.sel,\n        contained;\n\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() && repeat == \"single\" && (contained = sel.contains(pos)) > -1 && (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) && (cmp(contained.to(), pos) > 0 || pos.xRel < 0)) {\n      leftButtonStartDrag(cm, event, pos, behavior);\n    } else {\n      leftButtonSelect(cm, event, pos, behavior);\n    }\n  } // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n\n\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display,\n        moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) {\n        display.scroller.draggable = false;\n      }\n\n      cm.state.draggingText = false;\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n\n      if (!moved) {\n        e_preventDefault(e);\n\n        if (!behavior.addNew) {\n          extendSelection(cm.doc, pos, null, null, behavior.extend);\n        } // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n\n\n        if (webkit || ie && ie_version == 9) {\n          setTimeout(function () {\n            display.wrapper.ownerDocument.body.focus();\n            display.input.focus();\n          }, 20);\n        } else {\n          display.input.focus();\n        }\n      }\n    });\n\n    var mouseMove = function mouseMove(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n\n    var dragStart = function dragStart() {\n      return moved = true;\n    }; // Let the drag handler handle this.\n\n\n    if (webkit) {\n      display.scroller.draggable = true;\n    }\n\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag; // IE's approach to draggable\n\n    if (display.scroller.dragDrop) {\n      display.scroller.dragDrop();\n    }\n\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n    delayBlurEvent(cm);\n    setTimeout(function () {\n      return display.input.focus();\n    }, 20);\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") {\n      return new Range(pos, pos);\n    }\n\n    if (unit == \"word\") {\n      return cm.findWordAt(pos);\n    }\n\n    if (unit == \"line\") {\n      return new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n    }\n\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to);\n  } // Normal selection, as opposed to text dragging.\n\n\n  function leftButtonSelect(cm, event, start, behavior) {\n    var display = cm.display,\n        doc = cm.doc;\n    e_preventDefault(event);\n    var ourRange,\n        ourIndex,\n        startSel = doc.sel,\n        ranges = startSel.ranges;\n\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc.sel.contains(start);\n\n      if (ourIndex > -1) {\n        ourRange = ranges[ourIndex];\n      } else {\n        ourRange = new Range(start, start);\n      }\n    } else {\n      ourRange = doc.sel.primary();\n      ourIndex = doc.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) {\n        ourRange = new Range(start, start);\n      }\n\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n\n      if (behavior.extend) {\n        ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend);\n      } else {\n        ourRange = range;\n      }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0), {\n        scroll: false,\n        origin: \"*mouse\"\n      });\n      startSel = doc.sel;\n    } else {\n      replaceOneSelection(doc, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) {\n        return;\n      }\n\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [],\n            tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol),\n            right = Math.max(startCol, posCol);\n\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line)); line <= end; line++) {\n          var text = getLine(doc, line).text,\n              leftPos = findColumn(text, left, tabSize);\n\n          if (left == right) {\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos)));\n          } else if (text.length > leftPos) {\n            ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize))));\n          }\n        }\n\n        if (!ranges.length) {\n          ranges.push(new Range(start, start));\n        }\n\n        setSelection(doc, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex), {\n          origin: \"*mouse\",\n          scroll: false\n        });\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor,\n            head;\n\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(_clipPos(doc, anchor), head));\n        setSelection(doc, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect(); // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n\n      if (!cur) {\n        return;\n      }\n\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt();\n        extendTo(cur);\n        var visible = visibleLines(display, doc);\n\n        if (cur.line >= visible.to || cur.line < visible.from) {\n          setTimeout(operation(cm, function () {\n            if (counter == curCount) {\n              extend(e);\n            }\n          }), 150);\n        }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n\n        if (outside) {\n          setTimeout(operation(cm, function () {\n            if (counter != curCount) {\n              return;\n            }\n\n            display.scroller.scrollTop += outside;\n            extend(e);\n          }), 50);\n        }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity; // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) {\n        done(e);\n      } else {\n        extend(e);\n      }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  } // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n\n\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) {\n      return range;\n    }\n\n    var order = getOrder(anchorLine);\n\n    if (!order) {\n      return range;\n    }\n\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky),\n        part = order[index];\n\n    if (part.from != anchor.ch && part.to != anchor.ch) {\n      return range;\n    }\n\n    var boundary = index + (part.from == anchor.ch == (part.level != 1) ? 0 : 1);\n\n    if (boundary == 0 || boundary == order.length) {\n      return range;\n    } // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n\n\n    var leftSide;\n\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n\n      if (headIndex == boundary - 1 || headIndex == boundary) {\n        leftSide = dir < 0;\n      } else {\n        leftSide = dir > 0;\n      }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to,\n        sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head);\n  } // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n\n\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try {\n        mX = e.clientX;\n        mY = e.clientY;\n      } catch (e) {\n        return false;\n      }\n    }\n\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) {\n      return false;\n    }\n\n    if (prevent) {\n      e_preventDefault(e);\n    }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) {\n      return e_defaultPrevented(e);\n    }\n\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = _lineAtHeight(cm.doc, mY);\n\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e);\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true);\n  } // CONTEXT MENU HANDLING\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n\n\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) {\n      return;\n    }\n\n    if (signalDOMEvent(cm, e, \"contextmenu\")) {\n      return;\n    }\n\n    if (!captureRightClick) {\n      cm.display.input.onContextMenu(e);\n    }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) {\n      return false;\n    }\n\n    return gutterEvent(cm, e, \"gutterContextMenu\", false);\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") + cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {\n    toString: function toString() {\n      return \"CodeMirror.Init\";\n    }\n  };\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n\n      if (handle) {\n        optionHandlers[name] = notOnInit ? function (cm, val, old) {\n          if (old != Init) {\n            handle(cm, val, old);\n          }\n        } : handle;\n      }\n    }\n\n    CodeMirror.defineOption = option; // Passed to option handlers when there is no old value.\n\n    CodeMirror.Init = Init; // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n\n    option(\"value\", \"\", function (cm, val) {\n      return cm.setValue(val);\n    }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n\n      if (!val) {\n        return;\n      }\n\n      var newBreaks = [],\n          lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n\n          if (found == -1) {\n            break;\n          }\n\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n\n        lineNo++;\n      });\n\n      for (var i = newBreaks.length - 1; i >= 0; i--) {\n        _replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length));\n      }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b-\\u200f\\u2028\\u2029\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n\n      if (old != Init) {\n        cm.refresh();\n      }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) {\n      return cm.refresh();\n    }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\"); // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) {\n      return cm.getInputField().spellcheck = val;\n    }, true);\n    option(\"autocorrect\", false, function (cm, val) {\n      return cm.getInputField().autocorrect = val;\n    }, true);\n    option(\"autocapitalize\", false, function (cm, val) {\n      return cm.getInputField().autocapitalize = val;\n    }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n\n      if (prev && prev.detach) {\n        prev.detach(cm, next);\n      }\n\n      if (next.attach) {\n        next.attach(cm, prev || null);\n      }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) {\n      return updateScrollbars(cm);\n    }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) {\n      return integer;\n    }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n\n      cm.display.input.readOnlyChanged(val);\n    });\n    option(\"disableInput\", false, function (cm, val) {\n      if (!val) {\n        cm.display.input.reset();\n      }\n    }, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) {\n      return cm.doc.history.undoDepth = val;\n    });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) {\n      return cm.refresh();\n    }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) {\n        cm.display.input.resetPosition();\n      }\n    });\n    option(\"tabindex\", null, function (cm, val) {\n      return cm.display.input.getField().tabIndex = val || \"\";\n    });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) {\n      return cm.doc.setDirection(val);\n    }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () {\n      return updateScrollbars(cm);\n    }, 100);\n  } // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) {\n      return new CodeMirror(place, options);\n    }\n\n    this.options = options = options ? copyObj(options) : {}; // Determine effective options based on given values and defaults.\n\n    copyObj(defaults, options, false);\n    var doc = options.value;\n\n    if (typeof doc == \"string\") {\n      doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction);\n    } else if (options.mode) {\n      doc.modeOption = options.mode;\n    }\n\n    this.doc = doc;\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n\n    if (options.lineWrapping) {\n      this.display.wrapper.className += \" CodeMirror-wrap\";\n    }\n\n    initScrollbars(this);\n    this.state = {\n      keyMaps: [],\n      // stores maps added by addKeyMap\n      overlays: [],\n      // highlighting overlays, as added by addOverlay\n      modeGen: 0,\n      // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false,\n      // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1,\n      cutIncoming: -1,\n      // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(),\n      // stores highlight worker timeout\n      keySeq: null,\n      // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) {\n      display.input.focus();\n    } // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n\n\n    if (ie && ie_version < 11) {\n      setTimeout(function () {\n        return this$1.display.input.reset(true);\n      }, 20);\n    }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    _startOperation(this);\n\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if (options.autofocus && !mobile || this.hasFocus()) {\n      setTimeout(bind(onFocus, this), 20);\n    } else {\n      onBlur(this);\n    }\n\n    for (var opt in optionHandlers) {\n      if (optionHandlers.hasOwnProperty(opt)) {\n        optionHandlers[opt](this, options[opt], Init);\n      }\n    }\n\n    maybeUpdateLineNumberWidth(this);\n\n    if (options.finishInit) {\n      options.finishInit(this);\n    }\n\n    for (var i = 0; i < initHooks.length; ++i) {\n      initHooks[i](this);\n    }\n\n    _endOperation(this); // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n\n\n    if (webkit && options.lineWrapping && getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\") {\n      display.lineDiv.style.textRendering = \"auto\";\n    }\n  } // The default configuration options.\n\n\n  CodeMirror.defaults = defaults; // Functions to run when options are changed.\n\n  CodeMirror.optionHandlers = optionHandlers; // Attach the necessary event handlers when initializing the editor\n\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown)); // Older IE's will not fire a second mousedown for a double click\n\n    if (ie && ie_version < 11) {\n      on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) {\n          return;\n        }\n\n        var pos = posFromMouse(cm, e);\n\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) {\n          return;\n        }\n\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      }));\n    } else {\n      on(d.scroller, \"dblclick\", function (e) {\n        return signalDOMEvent(cm, e) || e_preventDefault(e);\n      });\n    } // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n\n\n    on(d.scroller, \"contextmenu\", function (e) {\n      return onContextMenu(cm, e);\n    });\n    on(d.input.getField(), \"contextmenu\", function (e) {\n      if (!d.scroller.contains(e.target)) {\n        onContextMenu(cm, e);\n      }\n    }); // Used to suppress mouse event handling when a touch happens\n\n    var touchFinished,\n        prevTouch = {\n      end: 0\n    };\n\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () {\n          return d.activeTouch = null;\n        }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date();\n      }\n    }\n\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) {\n        return false;\n      }\n\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1;\n    }\n\n    function farAway(touch, other) {\n      if (other.left == null) {\n        return true;\n      }\n\n      var dx = other.left - touch.left,\n          dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20;\n    }\n\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date();\n        d.activeTouch = {\n          start: now,\n          moved: false,\n          prev: now - prevTouch.end <= 300 ? prevTouch : null\n        };\n\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) {\n        d.activeTouch.moved = true;\n      }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n\n      if (touch && !eventInWidget(d, e) && touch.left != null && !touch.moved && new Date() - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"),\n            range;\n\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          {\n            range = new Range(pos, pos);\n          } else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          {\n            range = cm.findWordAt(pos);\n          } else // Triple tap\n          {\n            range = new Range(Pos(pos.line, 0), _clipPos(cm.doc, Pos(pos.line + 1, 0)));\n          }\n\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch); // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    }); // Listen to wheel events in order to try and update the viewport on time.\n\n    on(d.scroller, \"mousewheel\", function (e) {\n      return onScrollWheel(cm, e);\n    });\n    on(d.scroller, \"DOMMouseScroll\", function (e) {\n      return onScrollWheel(cm, e);\n    }); // Prevent wrapper from ever scrolling\n\n    on(d.wrapper, \"scroll\", function () {\n      return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0;\n    });\n    d.dragFunctions = {\n      enter: function enter(e) {\n        if (!signalDOMEvent(cm, e)) {\n          e_stop(e);\n        }\n      },\n      over: function over(e) {\n        if (!signalDOMEvent(cm, e)) {\n          onDragOver(cm, e);\n          e_stop(e);\n        }\n      },\n      start: function start(e) {\n        return onDragStart(cm, e);\n      },\n      drop: operation(cm, onDrop),\n      leave: function leave(e) {\n        if (!signalDOMEvent(cm, e)) {\n          clearDragCursor(cm);\n        }\n      }\n    };\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) {\n      return onKeyUp.call(cm, e);\n    });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) {\n      return onFocus(cm, e);\n    });\n    on(inp, \"blur\", function (e) {\n      return onBlur(cm, e);\n    });\n  }\n\n  var initHooks = [];\n\n  CodeMirror.defineInitHook = function (f) {\n    return initHooks.push(f);\n  }; // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n\n\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc,\n        state;\n\n    if (how == null) {\n      how = \"add\";\n    }\n\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) {\n        how = \"prev\";\n      } else {\n        state = getContextBefore(cm, n).state;\n      }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n),\n        curSpace = countColumn(line.text, null, tabSize);\n\n    if (line.stateAfter) {\n      line.stateAfter = null;\n    }\n\n    var curSpaceString = line.text.match(/^\\s*/)[0],\n        indentation;\n\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) {\n          return;\n        }\n\n        how = \"prev\";\n      }\n    }\n\n    if (how == \"prev\") {\n      if (n > doc.first) {\n        indentation = countColumn(getLine(doc, n - 1).text, null, tabSize);\n      } else {\n        indentation = 0;\n      }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n\n    indentation = Math.max(0, indentation);\n    var indentString = \"\",\n        pos = 0;\n\n    if (cm.options.indentWithTabs) {\n      for (var i = Math.floor(indentation / tabSize); i; --i) {\n        pos += tabSize;\n        indentString += \"\\t\";\n      }\n    }\n\n    if (pos < indentation) {\n      indentString += spaceStr(indentation - pos);\n    }\n\n    if (indentString != curSpaceString) {\n      _replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n\n      line.stateAfter = null;\n      return true;\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break;\n        }\n      }\n    }\n  } // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n\n\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n\n    if (!sel) {\n      sel = doc.sel;\n    }\n\n    var recent = +new Date() - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted),\n        multiPaste = null; // When pasting N lines into N selections, insert one line per selection\n\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n\n          for (var i = 0; i < lastCopied.text.length; i++) {\n            multiPaste.push(doc.splitLines(lastCopied.text[i]));\n          }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) {\n          return [l];\n        });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput; // Normal behavior is to insert the new text into every selection\n\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(),\n          to = range.to();\n\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          {\n            from = Pos(from.line, from.ch - deleted);\n          } else if (cm.state.overwrite && !paste) // Handle overwrite\n          {\n            to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length));\n          } else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == inserted) {\n          from = to = Pos(from.line, 0);\n        }\n      }\n\n      var changeEvent = {\n        from: from,\n        to: to,\n        text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n        origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")\n      };\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n\n    if (inserted && !paste) {\n      triggerElectric(cm, inserted);\n    }\n\n    ensureCursorVisible(cm);\n\n    if (cm.curOp.updateInput < 2) {\n      cm.curOp.updateInput = updateInput;\n    }\n\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n\n    if (pasted) {\n      e.preventDefault();\n\n      if (!cm.isReadOnly() && !cm.options.disableInput) {\n        runInOp(cm, function () {\n          return applyTextInput(cm, pasted, 0, null, \"paste\");\n        });\n      }\n\n      return true;\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) {\n      return;\n    }\n\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n\n      if (range.head.ch > 100 || i && sel.ranges[i - 1].head.line == range.head.line) {\n        continue;\n      }\n\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++) {\n          if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break;\n          }\n        }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch))) {\n          indented = indentLine(cm, range.head.line, \"smart\");\n        }\n      }\n\n      if (indented) {\n        signalLater(cm, \"electricInput\", cm, range.head.line);\n      }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [],\n        ranges = [];\n\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {\n        anchor: Pos(line, 0),\n        head: Pos(line + 1, 0)\n      };\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n\n    return {\n      text: text,\n      ranges: ranges\n    };\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\"); // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n\n    if (webkit) {\n      te.style.width = \"1000px\";\n    } else {\n      te.setAttribute(\"wrap\", \"off\");\n    } // If border: 0; -- iOS fails to open keyboard (issue #1287)\n\n\n    if (ios) {\n      te.style.border = \"1px solid black\";\n    }\n\n    disableBrowserMagic(te);\n    return div;\n  } // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n    var helpers = CodeMirror.helpers = {};\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function focus() {\n        window.focus();\n        this.display.input.focus();\n      },\n      setOption: function setOption(option, value) {\n        var options = this.options,\n            old = options[option];\n\n        if (options[option] == value && option != \"mode\") {\n          return;\n        }\n\n        options[option] = value;\n\n        if (optionHandlers.hasOwnProperty(option)) {\n          operation(this, optionHandlers[option])(this, value, old);\n        }\n\n        signal(this, \"optionChange\", this, option);\n      },\n      getOption: function getOption(option) {\n        return this.options[option];\n      },\n      getDoc: function getDoc() {\n        return this.doc;\n      },\n      addKeyMap: function addKeyMap(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function removeKeyMap(map) {\n        var maps = this.state.keyMaps;\n\n        for (var i = 0; i < maps.length; ++i) {\n          if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true;\n          }\n        }\n      },\n      addOverlay: methodOp(function (spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n\n        if (mode.startState) {\n          throw new Error(\"Overlays may not be stateful.\");\n        }\n\n        insertSorted(this.state.overlays, {\n          mode: mode,\n          modeSpec: spec,\n          opaque: options && options.opaque,\n          priority: options && options.priority || 0\n        }, function (overlay) {\n          return overlay.priority;\n        });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function (spec) {\n        var overlays = this.state.overlays;\n\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return;\n          }\n        }\n      }),\n      indentLine: methodOp(function (n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) {\n            dir = this.options.smartIndent ? \"smart\" : \"prev\";\n          } else {\n            dir = dir ? \"add\" : \"subtract\";\n          }\n        }\n\n        if (isLine(this.doc, n)) {\n          indentLine(this, n, dir, aggressive);\n        }\n      }),\n      indentSelection: methodOp(function (how) {\n        var ranges = this.doc.sel.ranges,\n            end = -1;\n\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n\n          if (!range.empty()) {\n            var from = range.from(),\n                to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n\n            for (var j = start; j < end; ++j) {\n              indentLine(this, j, how);\n            }\n\n            var newRanges = this.doc.sel.ranges;\n\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0) {\n              replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll);\n            }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n\n            if (i == this.doc.sel.primIndex) {\n              ensureCursorVisible(this);\n            }\n          }\n        }\n      }),\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function getTokenAt(pos, precise) {\n        return takeToken(this, pos, precise);\n      },\n      getLineTokens: function getLineTokens(line, precise) {\n        return takeToken(this, Pos(line), precise, true);\n      },\n      getTokenTypeAt: function getTokenTypeAt(pos) {\n        pos = _clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0,\n            after = (styles.length - 1) / 2,\n            ch = pos.ch;\n        var type;\n\n        if (ch == 0) {\n          type = styles[2];\n        } else {\n          for (;;) {\n            var mid = before + after >> 1;\n\n            if ((mid ? styles[mid * 2 - 1] : 0) >= ch) {\n              after = mid;\n            } else if (styles[mid * 2 + 1] < ch) {\n              before = mid + 1;\n            } else {\n              type = styles[mid * 2 + 2];\n              break;\n            }\n          }\n        }\n\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1);\n      },\n      getModeAt: function getModeAt(pos) {\n        var mode = this.doc.mode;\n\n        if (!mode.innerMode) {\n          return mode;\n        }\n\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode;\n      },\n      getHelper: function getHelper(pos, type) {\n        return this.getHelpers(pos, type)[0];\n      },\n      getHelpers: function getHelpers(pos, type) {\n        var found = [];\n\n        if (!helpers.hasOwnProperty(type)) {\n          return found;\n        }\n\n        var help = helpers[type],\n            mode = this.getModeAt(pos);\n\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) {\n            found.push(help[mode[type]]);\n          }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n\n            if (val) {\n              found.push(val);\n            }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1) {\n            found.push(cur.val);\n          }\n        }\n\n        return found;\n      },\n      getStateAfter: function getStateAfter(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1 : line);\n        return getContextBefore(this, line + 1, precise).state;\n      },\n      cursorCoords: function cursorCoords(start, mode) {\n        var pos,\n            range = this.doc.sel.primary();\n\n        if (start == null) {\n          pos = range.head;\n        } else if (typeof start == \"object\") {\n          pos = _clipPos(this.doc, start);\n        } else {\n          pos = start ? range.from() : range.to();\n        }\n\n        return _cursorCoords(this, pos, mode || \"page\");\n      },\n      charCoords: function charCoords(pos, mode) {\n        return _charCoords(this, _clipPos(this.doc, pos), mode || \"page\");\n      },\n      coordsChar: function coordsChar(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return _coordsChar(this, coords.left, coords.top);\n      },\n      lineAtHeight: function lineAtHeight(height, mode) {\n        height = fromCoordSystem(this, {\n          top: height,\n          left: 0\n        }, mode || \"page\").top;\n        return _lineAtHeight(this.doc, height + this.display.viewOffset);\n      },\n      heightAtLine: function heightAtLine(line, mode, includeWidgets) {\n        var end = false,\n            lineObj;\n\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n\n          if (line < this.doc.first) {\n            line = this.doc.first;\n          } else if (line > last) {\n            line = last;\n            end = true;\n          }\n\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n\n        return intoCoordSystem(this, lineObj, {\n          top: 0,\n          left: 0\n        }, mode || \"page\", includeWidgets || end).top + (end ? this.doc.height - _heightAtLine(lineObj) : 0);\n      },\n      defaultTextHeight: function defaultTextHeight() {\n        return textHeight(this.display);\n      },\n      defaultCharWidth: function defaultCharWidth() {\n        return charWidth(this.display);\n      },\n      getViewport: function getViewport() {\n        return {\n          from: this.display.viewFrom,\n          to: this.display.viewTo\n        };\n      },\n      addWidget: function addWidget(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = _cursorCoords(this, _clipPos(this.doc, pos));\n        var top = pos.bottom,\n            left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n              hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth); // Default to positioning above (if specified and possible); otherwise default to positioning below\n\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight) {\n            top = pos.top - node.offsetHeight;\n          } else if (pos.bottom + node.offsetHeight <= vspace) {\n            top = pos.bottom;\n          }\n\n          if (left + node.offsetWidth > hspace) {\n            left = hspace - node.offsetWidth;\n          }\n        }\n\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") {\n            left = 0;\n          } else if (horiz == \"middle\") {\n            left = (display.sizer.clientWidth - node.offsetWidth) / 2;\n          }\n\n          node.style.left = left + \"px\";\n        }\n\n        if (scroll) {\n          scrollIntoView(this, {\n            left: left,\n            top: top,\n            right: left + node.offsetWidth,\n            bottom: top + node.offsetHeight\n          });\n        }\n      },\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n      execCommand: function execCommand(cmd) {\n        if (commands.hasOwnProperty(cmd)) {\n          return commands[cmd].call(null, this);\n        }\n      },\n      triggerElectric: methodOp(function (text) {\n        triggerElectric(this, text);\n      }),\n      findPosH: function findPosH(from, amount, unit, visually) {\n        var dir = 1;\n\n        if (amount < 0) {\n          dir = -1;\n          amount = -amount;\n        }\n\n        var cur = _clipPos(this.doc, from);\n\n        for (var i = 0; i < amount; ++i) {\n          cur = _findPosH(this.doc, cur, dir, unit, visually);\n\n          if (cur.hitSide) {\n            break;\n          }\n        }\n\n        return cur;\n      },\n      moveH: methodOp(function (dir, unit) {\n        var this$1 = this;\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty()) {\n            return _findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually);\n          } else {\n            return dir < 0 ? range.from() : range.to();\n          }\n        }, sel_move);\n      }),\n      deleteH: methodOp(function (dir, unit) {\n        var sel = this.doc.sel,\n            doc = this.doc;\n\n        if (sel.somethingSelected()) {\n          doc.replaceSelection(\"\", null, \"+delete\");\n        } else {\n          deleteNearSelection(this, function (range) {\n            var other = _findPosH(doc, range.head, dir, unit, false);\n\n            return dir < 0 ? {\n              from: other,\n              to: range.head\n            } : {\n              from: range.head,\n              to: other\n            };\n          });\n        }\n      }),\n      findPosV: function findPosV(from, amount, unit, goalColumn) {\n        var dir = 1,\n            x = goalColumn;\n\n        if (amount < 0) {\n          dir = -1;\n          amount = -amount;\n        }\n\n        var cur = _clipPos(this.doc, from);\n\n        for (var i = 0; i < amount; ++i) {\n          var coords = _cursorCoords(this, cur, \"div\");\n\n          if (x == null) {\n            x = coords.left;\n          } else {\n            coords.left = x;\n          }\n\n          cur = _findPosV(this, coords, dir, unit);\n\n          if (cur.hitSide) {\n            break;\n          }\n        }\n\n        return cur;\n      },\n      moveV: methodOp(function (dir, unit) {\n        var this$1 = this;\n        var doc = this.doc,\n            goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse) {\n            return dir < 0 ? range.from() : range.to();\n          }\n\n          var headPos = _cursorCoords(this$1, range.head, \"div\");\n\n          if (range.goalColumn != null) {\n            headPos.left = range.goalColumn;\n          }\n\n          goals.push(headPos.left);\n\n          var pos = _findPosV(this$1, headPos, dir, unit);\n\n          if (unit == \"page\" && range == doc.sel.primary()) {\n            addToScrollTop(this$1, _charCoords(this$1, pos, \"div\").top - headPos.top);\n          }\n\n          return pos;\n        }, sel_move);\n\n        if (goals.length) {\n          for (var i = 0; i < doc.sel.ranges.length; i++) {\n            doc.sel.ranges[i].goalColumn = goals[i];\n          }\n        }\n      }),\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function findWordAt(pos) {\n        var doc = this.doc,\n            line = getLine(doc, pos.line).text;\n        var start = pos.ch,\n            end = pos.ch;\n\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n\n          if ((pos.sticky == \"before\" || end == line.length) && start) {\n            --start;\n          } else {\n            ++end;\n          }\n\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper) ? function (ch) {\n            return isWordChar(ch, helper);\n          } : /\\s/.test(startChar) ? function (ch) {\n            return /\\s/.test(ch);\n          } : function (ch) {\n            return !/\\s/.test(ch) && !isWordChar(ch);\n          };\n\n          while (start > 0 && check(line.charAt(start - 1))) {\n            --start;\n          }\n\n          while (end < line.length && check(line.charAt(end))) {\n            ++end;\n          }\n        }\n\n        return new Range(Pos(pos.line, start), Pos(pos.line, end));\n      },\n      toggleOverwrite: function toggleOverwrite(value) {\n        if (value != null && value == this.state.overwrite) {\n          return;\n        }\n\n        if (this.state.overwrite = !this.state.overwrite) {\n          addClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n        } else {\n          rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\");\n        }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function hasFocus() {\n        return this.display.input.getField() == activeElt();\n      },\n      isReadOnly: function isReadOnly() {\n        return !!(this.options.readOnly || this.doc.cantEdit);\n      },\n      scrollTo: methodOp(function (x, y) {\n        scrollToCoords(this, x, y);\n      }),\n      getScrollInfo: function getScrollInfo() {\n        var scroller = this.display.scroller;\n        return {\n          left: scroller.scrollLeft,\n          top: scroller.scrollTop,\n          height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n          width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n          clientHeight: displayHeight(this),\n          clientWidth: displayWidth(this)\n        };\n      },\n      scrollIntoView: methodOp(function (range, margin) {\n        if (range == null) {\n          range = {\n            from: this.doc.sel.primary().head,\n            to: null\n          };\n\n          if (margin == null) {\n            margin = this.options.cursorScrollMargin;\n          }\n        } else if (typeof range == \"number\") {\n          range = {\n            from: Pos(range, 0),\n            to: null\n          };\n        } else if (range.from == null) {\n          range = {\n            from: range,\n            to: null\n          };\n        }\n\n        if (!range.to) {\n          range.to = range.from;\n        }\n\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n      setSize: methodOp(function (width, height) {\n        var this$1 = this;\n\n        var interpret = function interpret(val) {\n          return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val;\n        };\n\n        if (width != null) {\n          this.display.wrapper.style.width = interpret(width);\n        }\n\n        if (height != null) {\n          this.display.wrapper.style.height = interpret(height);\n        }\n\n        if (this.options.lineWrapping) {\n          clearLineMeasurementCache(this);\n        }\n\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) {\n            for (var i = 0; i < line.widgets.length; i++) {\n              if (line.widgets[i].noHScroll) {\n                regLineChange(this$1, lineNo, \"widget\");\n                break;\n              }\n            }\n          }\n\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n      operation: function operation(f) {\n        return runInOp(this, f);\n      },\n      startOperation: function startOperation() {\n        return _startOperation(this);\n      },\n      endOperation: function endOperation() {\n        return _endOperation(this);\n      },\n      refresh: methodOp(function () {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5) {\n          estimateLineHeights(this);\n        }\n\n        signal(this, \"refresh\", this);\n      }),\n      swapDoc: methodOp(function (doc) {\n        var old = this.doc;\n        old.cm = null; // Cancel the current text selection if any (#5821)\n\n        if (this.state.selectingText) {\n          this.state.selectingText();\n        }\n\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old;\n      }),\n      phrase: function phrase(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText;\n      },\n      getInputField: function getInputField() {\n        return this.display.input.getField();\n      },\n      getWrapperElement: function getWrapperElement() {\n        return this.display.wrapper;\n      },\n      getScrollerElement: function getScrollerElement() {\n        return this.display.scroller;\n      },\n      getGutterElement: function getGutterElement() {\n        return this.display.gutters;\n      }\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function (type, name, value) {\n      if (!helpers.hasOwnProperty(type)) {\n        helpers[type] = CodeMirror[type] = {\n          _global: []\n        };\n      }\n\n      helpers[type][name] = value;\n    };\n\n    CodeMirror.registerGlobalHelper = function (type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n\n      helpers[type]._global.push({\n        pred: predicate,\n        val: value\n      });\n    };\n  } // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"char\", \"column\" (like char, but doesn't\n  // cross line boundaries), \"word\" (across next word), or \"group\" (to\n  // the start of next group of word or non-word-non-whitespace\n  // chars). The visually param controls whether, in right-to-left\n  // text, direction 1 means to move towards the next index in the\n  // string, or towards the character to the right of the current\n  // position. The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n\n\n  function _findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    var lineDir = visually && doc.direction == \"rtl\" ? -dir : dir;\n\n    function findNextLine() {\n      var l = pos.line + lineDir;\n\n      if (l < doc.first || l >= doc.first + doc.size) {\n        return false;\n      }\n\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l);\n    }\n\n    function moveOnce(boundToLine) {\n      var next;\n\n      if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n\n      if (next == null) {\n        if (!boundToLine && findNextLine()) {\n          pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir);\n        } else {\n          return false;\n        }\n      } else {\n        pos = next;\n      }\n\n      return true;\n    }\n\n    if (unit == \"char\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null,\n          group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) {\n          break;\n        }\n\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\" : group && cur == \"\\n\" ? \"n\" : !group || /\\s/.test(cur) ? null : \"p\";\n\n        if (group && !first && !type) {\n          type = \"s\";\n        }\n\n        if (sawType && sawType != type) {\n          if (dir < 0) {\n            dir = 1;\n            moveOnce();\n            pos.sticky = \"after\";\n          }\n\n          break;\n        }\n\n        if (type) {\n          sawType = type;\n        }\n\n        if (dir > 0 && !moveOnce(!first)) {\n          break;\n        }\n      }\n    }\n\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n\n    if (equalCursorPos(oldPos, result)) {\n      result.hitSide = true;\n    }\n\n    return result;\n  } // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n\n\n  function _findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc,\n        x = pos.left,\n        y;\n\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n\n    var target;\n\n    for (;;) {\n      target = _coordsChar(cm, x, y);\n\n      if (!target.outside) {\n        break;\n      }\n\n      if (dir < 0 ? y <= 0 : y >= doc.height) {\n        target.hitSide = true;\n        break;\n      }\n\n      y += dir * 5;\n    }\n\n    return target;\n  } // CONTENTEDITABLE INPUT STYLE\n\n\n  var ContentEditableInput = function ContentEditableInput(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n    var this$1 = this;\n    var input = this,\n        cm = input.cm;\n    var div = input.div = display.lineDiv;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n    on(div, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n        return;\n      } // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n\n\n      if (ie_version <= 11) {\n        setTimeout(operation(cm, function () {\n          return this$1.updateFromDOM();\n        }), 20);\n      }\n    });\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {\n        data: e.data,\n        done: false\n      };\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) {\n        this$1.composing = {\n          data: e.data,\n          done: false\n        };\n      }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) {\n          this$1.readFromDOMSoon();\n        }\n\n        this$1.composing.done = true;\n      }\n    });\n    on(div, \"touchstart\", function () {\n      return input.forceCompositionEnd();\n    });\n    on(div, \"input\", function () {\n      if (!this$1.composing) {\n        this$1.readFromDOMSoon();\n      }\n    });\n\n    function onCopyCut(e) {\n      if (signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (cm.somethingSelected()) {\n        setLastCopied({\n          lineWise: false,\n          text: cm.getSelections()\n        });\n\n        if (e.type == \"cut\") {\n          cm.replaceSelection(\"\", null, \"cut\");\n        }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return;\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({\n          lineWise: true,\n          text: ranges.text\n        });\n\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\"); // iOS exposes the clipboard API, but seems to discard content inserted into it\n\n        e.clipboardData.setData(\"Text\", content);\n\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return;\n        }\n      } // Old-fashioned briefly-focus-a-textarea hack\n\n\n      var kludge = hiddenTextarea(),\n          te = kludge.firstChild;\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = document.activeElement;\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n\n        if (hadFocus == div) {\n          input.showPrimarySelection();\n        }\n      }, 50);\n    }\n\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = this.cm.state.focused;\n    return result;\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) {\n      return;\n    }\n\n    if (info.focus || takeFocus) {\n      this.showPrimarySelection();\n    }\n\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection();\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(),\n        cm = this.cm,\n        prim = cm.doc.sel.primary();\n    var from = prim.from(),\n        to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return;\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad && cmp(minPos(curAnchor, curFocus), from) == 0 && cmp(maxPos(curAnchor, curFocus), to) == 0) {\n      return;\n    }\n\n    var view = cm.display.view;\n    var start = from.line >= cm.display.viewFrom && posToDOM(cm, from) || {\n      node: view[0].measure.map[2],\n      offset: 0\n    };\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {\n        node: map[map.length - 1],\n        offset: map[map.length - 2] - map[map.length - 3]\n      };\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return;\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0),\n        rng;\n\n    try {\n      rng = range(start.node, start.offset, end.offset, end.node);\n    } catch (e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n\n\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n\n      if (old && sel.anchorNode == null) {\n        sel.addRange(old);\n      } else if (gecko) {\n        this.startGracePeriod();\n      }\n    }\n\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n    var this$1 = this;\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n\n      if (this$1.selectionChanged()) {\n        this$1.cm.operation(function () {\n          return this$1.cm.curOp.selectionChanged = true;\n        });\n      }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode;\n    this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode;\n    this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n\n    if (!sel.rangeCount) {\n      return false;\n    }\n\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node);\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor()) {\n        this.showSelection(this.prepareSelection(), true);\n      }\n\n      this.div.focus();\n    }\n  };\n\n  ContentEditableInput.prototype.blur = function () {\n    this.div.blur();\n  };\n\n  ContentEditableInput.prototype.getField = function () {\n    return this.div;\n  };\n\n  ContentEditableInput.prototype.supportsTouch = function () {\n    return true;\n  };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n    var input = this;\n\n    if (this.selectionInEditor()) {\n      this.pollSelection();\n    } else {\n      runInOp(this.cm, function () {\n        return input.cm.curOp.selectionChanged = true;\n      });\n    }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset || sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset;\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) {\n      return;\n    }\n\n    var sel = this.getSelection(),\n        cm = this.cm; // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({\n        type: \"keydown\",\n        keyCode: 8,\n        preventDefault: Math.abs\n      });\n      this.blur();\n      this.focus();\n      return;\n    }\n\n    if (this.composing) {\n      return;\n    }\n\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n\n    if (anchor && head) {\n      runInOp(cm, function () {\n        setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n\n        if (anchor.bad || head.bad) {\n          cm.curOp.selectionChanged = true;\n        }\n      });\n    }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm,\n        display = cm.display,\n        sel = cm.doc.sel.primary();\n    var from = sel.from(),\n        to = sel.to();\n\n    if (from.ch == 0 && from.line > cm.firstLine()) {\n      from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length);\n    }\n\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine()) {\n      to = Pos(to.line + 1, 0);\n    }\n\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) {\n      return false;\n    }\n\n    var fromIndex, fromLine, fromNode;\n\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) {\n      return false;\n    }\n\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) {\n        newText.pop();\n        oldText.pop();\n        toLine--;\n      } else if (newText[0] == oldText[0]) {\n        newText.shift();\n        oldText.shift();\n        fromLine++;\n      } else {\n        break;\n      }\n    }\n\n    var cutFront = 0,\n        cutEnd = 0;\n    var newTop = newText[0],\n        oldTop = oldText[0],\n        maxCutFront = Math.min(newTop.length, oldTop.length);\n\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront)) {\n      ++cutFront;\n    }\n\n    var newBot = lst(newText),\n        oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0), oldBot.length - (oldText.length == 1 ? cutFront : 0));\n\n    while (cutEnd < maxCutEnd && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n      ++cutEnd;\n    } // Try to move start of change to start of selection if ambiguous\n\n\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch && newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      _replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n\n      return true;\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) {\n      return;\n    }\n\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n    var this$1 = this;\n\n    if (this.readDOMTimeout != null) {\n      return;\n    }\n\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n\n      if (this$1.composing) {\n        if (this$1.composing.done) {\n          this$1.composing = null;\n        } else {\n          return;\n        }\n      }\n\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n    var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent()) {\n      runInOp(this.cm, function () {\n        return regChange(this$1.cm);\n      });\n    }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (!this.cm.isReadOnly()) {\n      operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0);\n    }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n\n    if (!view || view.hidden) {\n      return null;\n    }\n\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n    var order = getOrder(line, cm.doc.direction),\n        side = \"left\";\n\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result;\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode) {\n      if (/CodeMirror-gutter-wrapper/.test(scan.className)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function badPos(pos, bad) {\n    if (bad) {\n      pos.bad = true;\n    }\n\n    return pos;\n  }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\",\n        closing = false,\n        lineSep = cm.doc.lineSeparator(),\n        extraLinebreak = false;\n\n    function recognizeMarker(id) {\n      return function (marker) {\n        return marker.id == id;\n      };\n    }\n\n    function close() {\n      if (closing) {\n        text += lineSep;\n\n        if (extraLinebreak) {\n          text += lineSep;\n        }\n\n        closing = extraLinebreak = false;\n      }\n    }\n\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n\n        if (cmText) {\n          addText(cmText);\n          return;\n        }\n\n        var markerID = node.getAttribute(\"cm-marker\"),\n            range;\n\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n\n          if (found.length && (range = found[0].find(0))) {\n            addText(getBetween(cm.doc, range.from, range.to).join(lineSep));\n          }\n\n          return;\n        }\n\n        if (node.getAttribute(\"contenteditable\") == \"false\") {\n          return;\n        }\n\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) {\n          return;\n        }\n\n        if (isBlock) {\n          close();\n        }\n\n        for (var i = 0; i < node.childNodes.length; i++) {\n          walk(node.childNodes[i]);\n        }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) {\n          extraLinebreak = true;\n        }\n\n        if (isBlock) {\n          closing = true;\n        }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n\n    for (;;) {\n      walk(from);\n\n      if (from == to) {\n        break;\n      }\n\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n\n    return text;\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n\n      if (!lineNode) {\n        return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true);\n      }\n\n      node = null;\n      offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) {\n          return null;\n        }\n\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) {\n          break;\n        }\n      }\n    }\n\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n\n      if (lineView.node == lineNode) {\n        return locateNodeInLineView(lineView, node, offset);\n      }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild,\n        bad = false;\n\n    if (!node || !contains(wrapper, node)) {\n      return badPos(Pos(lineNo(lineView.line), 0), true);\n    }\n\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad);\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null,\n        topNode = node;\n\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n\n      if (offset) {\n        offset = textNode.nodeValue.length;\n      }\n    }\n\n    while (topNode.parentNode != wrapper) {\n      topNode = topNode.parentNode;\n    }\n\n    var measure = lineView.measure,\n        maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n\n            if (offset < 0 || curNode != textNode) {\n              ch = map[j + (offset ? 1 : 0)];\n            }\n\n            return Pos(line, ch);\n          }\n        }\n      }\n    }\n\n    var found = find(textNode, topNode, offset);\n\n    if (found) {\n      return badPos(found, bad);\n    } // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n\n\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n\n      if (found) {\n        return badPos(Pos(found.line, found.ch - dist), bad);\n      } else {\n        dist += after.textContent.length;\n      }\n    }\n\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n\n      if (found) {\n        return badPos(Pos(found.line, found.ch + dist$1), bad);\n      } else {\n        dist$1 += before.textContent.length;\n      }\n    }\n  } // TEXTAREA INPUT STYLE\n\n\n  var TextareaInput = function TextareaInput(cm) {\n    this.cm = cm; // See input.poll and input.reset\n\n    this.prevInput = \"\"; // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n\n    this.pollingFast = false; // Self-resetting timeout for the poller\n\n    this.polling = new Delayed(); // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n\n    this.hasSelection = false;\n    this.composing = null;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n    var this$1 = this;\n    var input = this,\n        cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild); // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n\n    if (ios) {\n      te.style.width = \"0px\";\n    }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) {\n        this$1.hasSelection = null;\n      }\n\n      input.poll();\n    });\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) {\n        return;\n      }\n\n      cm.state.pasteIncoming = +new Date();\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (cm.somethingSelected()) {\n        setLastCopied({\n          lineWise: false,\n          text: cm.getSelections()\n        });\n      } else if (!cm.options.lineWiseCopyCut) {\n        return;\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({\n          lineWise: true,\n          text: ranges.text\n        });\n\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n\n      if (e.type == \"cut\") {\n        cm.state.cutIncoming = +new Date();\n      }\n    }\n\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) {\n        return;\n      }\n\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date();\n        input.focus();\n        return;\n      } // Pass the `paste` event to the textarea so it's handled by its event listener.\n\n\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    }); // Prevent normal selection in the editor (we handle our own)\n\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) {\n        e_preventDefault(e);\n      }\n    });\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n\n      if (input.composing) {\n        input.composing.range.clear();\n      }\n\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {\n          className: \"CodeMirror-composing\"\n        })\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea(); // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n\n    this.textarea = this.wrapper.firstChild;\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm,\n        display = cm.display,\n        doc = cm.doc;\n    var result = prepareSelection(cm); // Move the hidden textarea near the cursor to prevent scrolling artifacts\n\n    if (cm.options.moveInputWithCursor) {\n      var headPos = _cursorCoords(cm, doc.sel.primary().head, \"div\");\n\n      var wrapOff = display.wrapper.getBoundingClientRect(),\n          lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10, headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10, headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result;\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm,\n        display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  }; // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n\n\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing) {\n      return;\n    }\n\n    var cm = this.cm;\n\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n\n      if (cm.state.focused) {\n        selectInput(this.textarea);\n      }\n\n      if (ie && ie_version >= 9) {\n        this.hasSelection = content;\n      }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n\n      if (ie && ie_version >= 9) {\n        this.hasSelection = null;\n      }\n    }\n  };\n\n  TextareaInput.prototype.getField = function () {\n    return this.textarea;\n  };\n\n  TextareaInput.prototype.supportsTouch = function () {\n    return false;\n  };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt() != this.textarea)) {\n      try {\n        this.textarea.focus();\n      } catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n\n    }\n  };\n\n  TextareaInput.prototype.blur = function () {\n    this.textarea.blur();\n  };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () {\n    this.slowPoll();\n  }; // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n\n\n  TextareaInput.prototype.slowPoll = function () {\n    var this$1 = this;\n\n    if (this.pollingFast) {\n      return;\n    }\n\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n\n      if (this$1.cm.state.focused) {\n        this$1.slowPoll();\n      }\n    });\n  }; // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n\n\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false,\n        input = this;\n    input.pollingFast = true;\n\n    function p() {\n      var changed = input.poll();\n\n      if (!changed && !missed) {\n        missed = true;\n        input.polling.set(60, p);\n      } else {\n        input.pollingFast = false;\n        input.slowPoll();\n      }\n    }\n\n    input.polling.set(20, p);\n  }; // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n\n\n  TextareaInput.prototype.poll = function () {\n    var this$1 = this;\n    var cm = this.cm,\n        input = this.textarea,\n        prevInput = this.prevInput; // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n\n    if (this.contextMenuPending || !cm.state.focused || hasSelection(input) && !prevInput && !this.composing || cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq) {\n      return false;\n    }\n\n    var text = input.value; // If nothing changed, bail.\n\n    if (text == prevInput && !cm.somethingSelected()) {\n      return false;\n    } // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n\n\n    if (ie && ie_version >= 9 && this.hasSelection === text || mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false;\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n\n      if (first == 0x200b && !prevInput) {\n        prevInput = \"\\u200B\";\n      }\n\n      if (first == 0x21da) {\n        this.reset();\n        return this.cm.execCommand(\"undo\");\n      }\n    } // Find the part of the input that is actually new\n\n\n    var same = 0,\n        l = Math.min(prevInput.length, text.length);\n\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) {\n      ++same;\n    }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same, null, this$1.composing ? \"*compose\" : null); // Don't leave long text in the textarea, since it makes further polling slow\n\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) {\n        input.value = this$1.prevInput = \"\";\n      } else {\n        this$1.prevInput = text;\n      }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"), {\n          className: \"CodeMirror-composing\"\n        });\n      }\n    });\n    return true;\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) {\n      this.pollingFast = false;\n    }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) {\n      this.hasSelection = null;\n    }\n\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this,\n        cm = input.cm,\n        display = cm.display,\n        te = input.textarea;\n\n    if (input.contextMenuPending) {\n      input.contextMenuPending();\n    }\n\n    var pos = posFromMouse(cm, e),\n        scrollPos = display.scroller.scrollTop;\n\n    if (!pos || presto) {\n      return;\n    } // Opera is difficult.\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n\n\n    var reset = cm.options.resetSelectionOnContextMenu;\n\n    if (reset && cm.doc.sel.contains(pos) == -1) {\n      operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll);\n    }\n\n    var oldCSS = te.style.cssText,\n        oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n\n    if (webkit) {\n      oldScrollY = window.scrollY;\n    } // Work around Chrome issue (#2712)\n\n\n    display.input.focus();\n\n    if (webkit) {\n      window.scrollTo(null, oldScrollY);\n    }\n\n    display.input.reset(); // Adds \"Select all\" to context menu in FF\n\n    if (!cm.somethingSelected()) {\n      te.value = input.prevInput = \" \";\n    }\n\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll); // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200B\" + (selected ? te.value : \"\");\n        te.value = \"\\u21DA\"; // Used to catch context-menu undo\n\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200B\";\n        te.selectionStart = 1;\n        te.selectionEnd = extval.length; // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n\n    function rehide() {\n      if (input.contextMenuPending != rehide) {\n        return;\n      }\n\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n\n      if (ie && ie_version < 9) {\n        display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos);\n      } // Try to detect the user choosing select-all\n\n\n      if (te.selectionStart != null) {\n        if (!ie || ie && ie_version < 9) {\n          prepareSelectAllHack();\n        }\n\n        var i = 0,\n            poll = function poll() {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 && te.selectionEnd > 0 && input.prevInput == \"\\u200B\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) {\n      prepareSelectAllHack();\n    }\n\n    if (captureRightClick) {\n      e_stop(e);\n\n      var mouseup = function mouseup() {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) {\n      this.reset();\n    }\n\n    this.textarea.disabled = val == \"nocursor\";\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n\n    if (!options.tabindex && textarea.tabIndex) {\n      options.tabindex = textarea.tabIndex;\n    }\n\n    if (!options.placeholder && textarea.placeholder) {\n      options.placeholder = textarea.placeholder;\n    } // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n\n\n    if (options.autofocus == null) {\n      var hasFocus = activeElt();\n      options.autofocus = hasFocus == textarea || textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {\n      textarea.value = cm.getValue();\n    }\n\n    var realSubmit;\n\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save); // Deplorable hack to make the submit method do the right thing.\n\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch (e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n\n      cm.getTextArea = function () {\n        return textarea;\n      };\n\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\") {\n            textarea.form.submit = realSubmit;\n          }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) {\n      return textarea.parentNode.insertBefore(node, textarea.nextSibling);\n    }, options);\n    return cm;\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  } // EDITOR CONSTRUCTOR\n\n\n  defineOptions(CodeMirror);\n  addEditorMethods(CodeMirror); // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n\n  for (var prop in Doc.prototype) {\n    if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0) {\n      CodeMirror.prototype[prop] = function (method) {\n        return function () {\n          return method.apply(this.doc, arguments);\n        };\n      }(Doc.prototype[prop]);\n    }\n  }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\n    \"textarea\": TextareaInput,\n    \"contenteditable\": ContentEditableInput\n  }; // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n\n  CodeMirror.defineMode = function (name\n  /*, mode, …*/\n  ) {\n    if (!CodeMirror.defaults.mode && name != \"null\") {\n      CodeMirror.defaults.mode = name;\n    }\n\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME; // Minimal default mode.\n\n  CodeMirror.defineMode(\"null\", function () {\n    return {\n      token: function token(stream) {\n        return stream.skipToEnd();\n      }\n    };\n  });\n  CodeMirror.defineMIME(\"text/plain\", \"null\"); // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n  addLegacyProps(CodeMirror);\n  CodeMirror.version = \"5.52.0\";\n  return CodeMirror;\n});","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","'use strict';\n// B.2.3.2 String.prototype.anchor(name)\nrequire('./_string-html')('anchor', function (createHTML) {\n  return function anchor(name) {\n    return createHTML(this, 'a', 'name', name);\n  };\n});\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer[offset + i];\n  i += d;\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  value = Math.abs(value);\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = e << mLen | m;\n  eLen += mLen;\n\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128;\n};","'use strict';\nvar $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar $native = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\n  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])\n  lastIndexOf: function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n    // convert -0 to +0\n    if (NEGATIVE_ZERO) return $native.apply(this, arguments) || 0;\n    var O = toIObject(this);\n    var length = toLength(O.length);\n    var index = length - 1;\n    if (arguments.length > 1) index = Math.min(index, toInteger(arguments[1]));\n    if (index < 0) index = length + index;\n    for (;index >= 0; index--) if (index in O) if (O[index] === searchElement) return index || 0;\n    return -1;\n  }\n});\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n\n/* eslint-disable no-proto */\n'use strict';\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.date.to-json\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nvar base64 = require('base64-js');\n\nvar ieee754 = require('ieee754');\n\nvar isArray = require('isarray');\n\nexports.Buffer = Buffer;\nexports.SlowBuffer = SlowBuffer;\nexports.INSPECT_MAX_BYTES = 50;\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\n\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : typedArraySupport();\n/*\n * Export kMaxLength after typed array support is determined.\n */\n\nexports.kMaxLength = kMaxLength();\n\nfunction typedArraySupport() {\n  try {\n    var arr = new Uint8Array(1);\n    arr.__proto__ = {\n      __proto__: Uint8Array.prototype,\n      foo: function foo() {\n        return 42;\n      }\n    };\n    return arr.foo() === 42 && // typed array instances can be augmented\n    typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n    arr.subarray(1, 1).byteLength === 0; // ie10 has broken `subarray`\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction kMaxLength() {\n  return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff;\n}\n\nfunction createBuffer(that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length');\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length);\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length);\n    }\n\n    that.length = length;\n  }\n\n  return that;\n}\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\n\nfunction Buffer(arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length);\n  } // Common case.\n\n\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error('If encoding is specified then the first argument must be a string');\n    }\n\n    return allocUnsafe(this, arg);\n  }\n\n  return from(this, arg, encodingOrOffset, length);\n}\n\nBuffer.poolSize = 8192; // not used by this implementation\n// TODO: Legacy, not needed anymore. Remove in next major version.\n\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype;\n  return arr;\n};\n\nfunction from(that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number');\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length);\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset);\n  }\n\n  return fromObject(that, value);\n}\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\n\n\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length);\n};\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype;\n  Buffer.__proto__ = Uint8Array;\n\n  if (typeof Symbol !== 'undefined' && Symbol.species && Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    });\n  }\n}\n\nfunction assertSize(size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number');\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative');\n  }\n}\n\nfunction alloc(that, size, fill, encoding) {\n  assertSize(size);\n\n  if (size <= 0) {\n    return createBuffer(that, size);\n  }\n\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string' ? createBuffer(that, size).fill(fill, encoding) : createBuffer(that, size).fill(fill);\n  }\n\n  return createBuffer(that, size);\n}\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\n\n\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding);\n};\n\nfunction allocUnsafe(that, size) {\n  assertSize(size);\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0);\n\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0;\n    }\n  }\n\n  return that;\n}\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\n\n\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size);\n};\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\n\n\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size);\n};\n\nfunction fromString(that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8';\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding');\n  }\n\n  var length = byteLength(string, encoding) | 0;\n  that = createBuffer(that, length);\n  var actual = that.write(string, encoding);\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual);\n  }\n\n  return that;\n}\n\nfunction fromArrayLike(that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0;\n  that = createBuffer(that, length);\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255;\n  }\n\n  return that;\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n  array.byteLength; // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds');\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds');\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array);\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset);\n  } else {\n    array = new Uint8Array(array, byteOffset, length);\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array;\n    that.__proto__ = Buffer.prototype;\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array);\n  }\n\n  return that;\n}\n\nfunction fromObject(that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0;\n    that = createBuffer(that, len);\n\n    if (that.length === 0) {\n      return that;\n    }\n\n    obj.copy(that, 0, 0, len);\n    return that;\n  }\n\n  if (obj) {\n    if (typeof ArrayBuffer !== 'undefined' && obj.buffer instanceof ArrayBuffer || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0);\n      }\n\n      return fromArrayLike(that, obj);\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data);\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.');\n}\n\nfunction checked(length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' + 'size: 0x' + kMaxLength().toString(16) + ' bytes');\n  }\n\n  return length | 0;\n}\n\nfunction SlowBuffer(length) {\n  if (+length != length) {\n    // eslint-disable-line eqeqeq\n    length = 0;\n  }\n\n  return Buffer.alloc(+length);\n}\n\nBuffer.isBuffer = function isBuffer(b) {\n  return !!(b != null && b._isBuffer);\n};\n\nBuffer.compare = function compare(a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers');\n  }\n\n  if (a === b) return 0;\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n};\n\nBuffer.isEncoding = function isEncoding(encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true;\n\n    default:\n      return false;\n  }\n};\n\nBuffer.concat = function concat(list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers');\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0);\n  }\n\n  var i;\n\n  if (length === undefined) {\n    length = 0;\n\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length;\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length);\n  var pos = 0;\n\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i];\n\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n\n    buf.copy(buffer, pos);\n    pos += buf.length;\n  }\n\n  return buffer;\n};\n\nfunction byteLength(string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length;\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' && (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength;\n  }\n\n  if (typeof string !== 'string') {\n    string = '' + string;\n  }\n\n  var len = string.length;\n  if (len === 0) return 0; // Use a for loop to avoid recursion\n\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len;\n\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length;\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2;\n\n      case 'hex':\n        return len >>> 1;\n\n      case 'base64':\n        return base64ToBytes(string).length;\n\n      default:\n        if (loweredCase) return utf8ToBytes(string).length; // assume utf8\n\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n}\n\nBuffer.byteLength = byteLength;\n\nfunction slowToString(encoding, start, end) {\n  var loweredCase = false; // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n\n  if (start === undefined || start < 0) {\n    start = 0;\n  } // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n\n\n  if (start > this.length) {\n    return '';\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length;\n  }\n\n  if (end <= 0) {\n    return '';\n  } // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n\n\n  end >>>= 0;\n  start >>>= 0;\n\n  if (end <= start) {\n    return '';\n  }\n\n  if (!encoding) encoding = 'utf8';\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end);\n\n      case 'ascii':\n        return asciiSlice(this, start, end);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end);\n\n      case 'base64':\n        return base64Slice(this, start, end);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = (encoding + '').toLowerCase();\n        loweredCase = true;\n    }\n  }\n} // The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\n\n\nBuffer.prototype._isBuffer = true;\n\nfunction swap(b, n, m) {\n  var i = b[n];\n  b[n] = b[m];\n  b[m] = i;\n}\n\nBuffer.prototype.swap16 = function swap16() {\n  var len = this.length;\n\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits');\n  }\n\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap32 = function swap32() {\n  var len = this.length;\n\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits');\n  }\n\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3);\n    swap(this, i + 1, i + 2);\n  }\n\n  return this;\n};\n\nBuffer.prototype.swap64 = function swap64() {\n  var len = this.length;\n\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits');\n  }\n\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7);\n    swap(this, i + 1, i + 6);\n    swap(this, i + 2, i + 5);\n    swap(this, i + 3, i + 4);\n  }\n\n  return this;\n};\n\nBuffer.prototype.toString = function toString() {\n  var length = this.length | 0;\n  if (length === 0) return '';\n  if (arguments.length === 0) return utf8Slice(this, 0, length);\n  return slowToString.apply(this, arguments);\n};\n\nBuffer.prototype.equals = function equals(b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer');\n  if (this === b) return true;\n  return Buffer.compare(this, b) === 0;\n};\n\nBuffer.prototype.inspect = function inspect() {\n  var str = '';\n  var max = exports.INSPECT_MAX_BYTES;\n\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ');\n    if (this.length > max) str += ' ... ';\n  }\n\n  return '<Buffer ' + str + '>';\n};\n\nBuffer.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer');\n  }\n\n  if (start === undefined) {\n    start = 0;\n  }\n\n  if (end === undefined) {\n    end = target ? target.length : 0;\n  }\n\n  if (thisStart === undefined) {\n    thisStart = 0;\n  }\n\n  if (thisEnd === undefined) {\n    thisEnd = this.length;\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index');\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0;\n  }\n\n  if (thisStart >= thisEnd) {\n    return -1;\n  }\n\n  if (start >= end) {\n    return 1;\n  }\n\n  start >>>= 0;\n  end >>>= 0;\n  thisStart >>>= 0;\n  thisEnd >>>= 0;\n  if (this === target) return 0;\n  var x = thisEnd - thisStart;\n  var y = end - start;\n  var len = Math.min(x, y);\n  var thisCopy = this.slice(thisStart, thisEnd);\n  var targetCopy = target.slice(start, end);\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i];\n      y = targetCopy[i];\n      break;\n    }\n  }\n\n  if (x < y) return -1;\n  if (y < x) return 1;\n  return 0;\n}; // Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\n\n\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1; // Normalize byteOffset\n\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset;\n    byteOffset = 0;\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff;\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000;\n  }\n\n  byteOffset = +byteOffset; // Coerce to Number.\n\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : buffer.length - 1;\n  } // Normalize byteOffset: negative offsets start from the end of the buffer\n\n\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset;\n\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1;else byteOffset = buffer.length - 1;\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0;else return -1;\n  } // Normalize val\n\n\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding);\n  } // Finally, search either indexOf (if dir is true) or lastIndexOf\n\n\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1;\n    }\n\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir);\n  } else if (typeof val === 'number') {\n    val = val & 0xFF; // Search for a byte value [0-255]\n\n    if (Buffer.TYPED_ARRAY_SUPPORT && typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);\n      }\n    }\n\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);\n  }\n\n  throw new TypeError('val must be string, number or Buffer');\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1;\n  var arrLength = arr.length;\n  var valLength = val.length;\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase();\n\n    if (encoding === 'ucs2' || encoding === 'ucs-2' || encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1;\n      }\n\n      indexSize = 2;\n      arrLength /= 2;\n      valLength /= 2;\n      byteOffset /= 2;\n    }\n  }\n\n  function read(buf, i) {\n    if (indexSize === 1) {\n      return buf[i];\n    } else {\n      return buf.readUInt16BE(i * indexSize);\n    }\n  }\n\n  var i;\n\n  if (dir) {\n    var foundIndex = -1;\n\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i;\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex;\n        foundIndex = -1;\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true;\n\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false;\n          break;\n        }\n      }\n\n      if (found) return i;\n    }\n  }\n\n  return -1;\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1;\n};\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n};\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n};\n\nfunction hexWrite(buf, string, offset, length) {\n  offset = Number(offset) || 0;\n  var remaining = buf.length - offset;\n\n  if (!length) {\n    length = remaining;\n  } else {\n    length = Number(length);\n\n    if (length > remaining) {\n      length = remaining;\n    }\n  } // must be an even number of digits\n\n\n  var strLen = string.length;\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string');\n\n  if (length > strLen / 2) {\n    length = strLen / 2;\n  }\n\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16);\n    if (isNaN(parsed)) return i;\n    buf[offset + i] = parsed;\n  }\n\n  return i;\n}\n\nfunction utf8Write(buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length);\n}\n\nfunction latin1Write(buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length);\n}\n\nfunction base64Write(buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length);\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8';\n    length = this.length;\n    offset = 0; // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset;\n    length = this.length;\n    offset = 0; // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0;\n\n    if (isFinite(length)) {\n      length = length | 0;\n      if (encoding === undefined) encoding = 'utf8';\n    } else {\n      encoding = length;\n      length = undefined;\n    } // legacy write(string, encoding, offset, length) - remove in v0.13\n\n  } else {\n    throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');\n  }\n\n  var remaining = this.length - offset;\n  if (length === undefined || length > remaining) length = remaining;\n\n  if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds');\n  }\n\n  if (!encoding) encoding = 'utf8';\n  var loweredCase = false;\n\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length);\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length);\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length);\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length);\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length);\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length);\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding);\n        encoding = ('' + encoding).toLowerCase();\n        loweredCase = true;\n    }\n  }\n};\n\nBuffer.prototype.toJSON = function toJSON() {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  };\n};\n\nfunction base64Slice(buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf);\n  } else {\n    return base64.fromByteArray(buf.slice(start, end));\n  }\n}\n\nfunction utf8Slice(buf, start, end) {\n  end = Math.min(buf.length, end);\n  var res = [];\n  var i = start;\n\n  while (i < end) {\n    var firstByte = buf[i];\n    var codePoint = null;\n    var bytesPerSequence = firstByte > 0xEF ? 4 : firstByte > 0xDF ? 3 : firstByte > 0xBF ? 2 : 1;\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint;\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte;\n          }\n\n          break;\n\n        case 2:\n          secondByte = buf[i + 1];\n\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | secondByte & 0x3F;\n\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 3:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | thirdByte & 0x3F;\n\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n          break;\n\n        case 4:\n          secondByte = buf[i + 1];\n          thirdByte = buf[i + 2];\n          fourthByte = buf[i + 3];\n\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | fourthByte & 0x3F;\n\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint;\n            }\n          }\n\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD;\n      bytesPerSequence = 1;\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000;\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800);\n      codePoint = 0xDC00 | codePoint & 0x3FF;\n    }\n\n    res.push(codePoint);\n    i += bytesPerSequence;\n  }\n\n  return decodeCodePointsArray(res);\n} // Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\n\n\nvar MAX_ARGUMENTS_LENGTH = 0x1000;\n\nfunction decodeCodePointsArray(codePoints) {\n  var len = codePoints.length;\n\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints); // avoid extra slice()\n  } // Decode in chunks to avoid \"call stack size exceeded\".\n\n\n  var res = '';\n  var i = 0;\n\n  while (i < len) {\n    res += String.fromCharCode.apply(String, codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n\n  return res;\n}\n\nfunction asciiSlice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F);\n  }\n\n  return ret;\n}\n\nfunction latin1Slice(buf, start, end) {\n  var ret = '';\n  end = Math.min(buf.length, end);\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i]);\n  }\n\n  return ret;\n}\n\nfunction hexSlice(buf, start, end) {\n  var len = buf.length;\n  if (!start || start < 0) start = 0;\n  if (!end || end < 0 || end > len) end = len;\n  var out = '';\n\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i]);\n  }\n\n  return out;\n}\n\nfunction utf16leSlice(buf, start, end) {\n  var bytes = buf.slice(start, end);\n  var res = '';\n\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);\n  }\n\n  return res;\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n  var len = this.length;\n  start = ~~start;\n  end = end === undefined ? len : ~~end;\n\n  if (start < 0) {\n    start += len;\n    if (start < 0) start = 0;\n  } else if (start > len) {\n    start = len;\n  }\n\n  if (end < 0) {\n    end += len;\n    if (end < 0) end = 0;\n  } else if (end > len) {\n    end = len;\n  }\n\n  if (end < start) end = start;\n  var newBuf;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end);\n    newBuf.__proto__ = Buffer.prototype;\n  } else {\n    var sliceLen = end - start;\n    newBuf = new Buffer(sliceLen, undefined);\n\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start];\n    }\n  }\n\n  return newBuf;\n};\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\n\n\nfunction checkOffset(offset, ext, length) {\n  if (offset % 1 !== 0 || offset < 0) throw new RangeError('offset is not uint');\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length');\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUIntBE = function readUIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length);\n  }\n\n  var val = this[offset + --byteLength];\n  var mul = 1;\n\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul;\n  }\n\n  return val;\n};\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  return this[offset];\n};\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] | this[offset + 1] << 8;\n};\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  return this[offset] << 8 | this[offset + 1];\n};\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 0x1000000;\n};\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] * 0x1000000 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n};\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var val = this[offset];\n  var mul = 1;\n  var i = 0;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n  if (!noAssert) checkOffset(offset, byteLength, this.length);\n  var i = byteLength;\n  var mul = 1;\n  var val = this[offset + --i];\n\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul;\n  }\n\n  mul *= 0x80;\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength);\n  return val;\n};\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length);\n  if (!(this[offset] & 0x80)) return this[offset];\n  return (0xff - this[offset] + 1) * -1;\n};\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset] | this[offset + 1] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length);\n  var val = this[offset + 1] | this[offset] << 8;\n  return val & 0x8000 ? val | 0xFFFF0000 : val;\n};\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n};\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n};\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, true, 23, 4);\n};\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length);\n  return ieee754.read(this, offset, false, 23, 4);\n};\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, true, 52, 8);\n};\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length);\n  return ieee754.read(this, offset, false, 52, 8);\n};\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var mul = 1;\n  var i = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  byteLength = byteLength | 0;\n\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1;\n    checkInt(this, value, offset, byteLength, maxBytes, 0);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = value / mul & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & 0xff << 8 * (littleEndian ? i : 1 - i)) >>> (littleEndian ? i : 1 - i) * 8;\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = value >>> (littleEndian ? i : 3 - i) * 8 & 0xff;\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeIntLE = function writeIntLE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = 0;\n  var mul = 1;\n  var sub = 0;\n  this[offset] = value & 0xFF;\n\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeIntBE = function writeIntBE(value, offset, byteLength, noAssert) {\n  value = +value;\n  offset = offset | 0;\n\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1);\n    checkInt(this, value, offset, byteLength, limit - 1, -limit);\n  }\n\n  var i = byteLength - 1;\n  var mul = 1;\n  var sub = 0;\n  this[offset + i] = value & 0xFF;\n\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1;\n    }\n\n    this[offset + i] = (value / mul >> 0) - sub & 0xFF;\n  }\n\n  return offset + byteLength;\n};\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80);\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value);\n  if (value < 0) value = 0xff + value + 1;\n  this[offset] = value & 0xff;\n  return offset + 1;\n};\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n  } else {\n    objectWriteUInt16(this, value, offset, true);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 0xff;\n  } else {\n    objectWriteUInt16(this, value, offset, false);\n  }\n\n  return offset + 2;\n};\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value & 0xff;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n  } else {\n    objectWriteUInt32(this, value, offset, true);\n  }\n\n  return offset + 4;\n};\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n  value = +value;\n  offset = offset | 0;\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000);\n  if (value < 0) value = 0xffffffff + value + 1;\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 0xff;\n  } else {\n    objectWriteUInt32(this, value, offset, false);\n  }\n\n  return offset + 4;\n};\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range');\n  if (offset < 0) throw new RangeError('Index out of range');\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 23, 4);\n  return offset + 4;\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert);\n};\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308);\n  }\n\n  ieee754.write(buf, value, offset, littleEndian, 52, 8);\n  return offset + 8;\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert);\n};\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert);\n}; // copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\n\n\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n  if (!start) start = 0;\n  if (!end && end !== 0) end = this.length;\n  if (targetStart >= target.length) targetStart = target.length;\n  if (!targetStart) targetStart = 0;\n  if (end > 0 && end < start) end = start; // Copy 0 bytes; we're done\n\n  if (end === start) return 0;\n  if (target.length === 0 || this.length === 0) return 0; // Fatal error conditions\n\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds');\n  }\n\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds');\n  if (end < 0) throw new RangeError('sourceEnd out of bounds'); // Are we oob?\n\n  if (end > this.length) end = this.length;\n\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start;\n  }\n\n  var len = end - start;\n  var i;\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start];\n    }\n  } else {\n    Uint8Array.prototype.set.call(target, this.subarray(start, start + len), targetStart);\n  }\n\n  return len;\n}; // Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\n\n\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start;\n      start = 0;\n      end = this.length;\n    } else if (typeof end === 'string') {\n      encoding = end;\n      end = this.length;\n    }\n\n    if (val.length === 1) {\n      var code = val.charCodeAt(0);\n\n      if (code < 256) {\n        val = code;\n      }\n    }\n\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string');\n    }\n\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding);\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255;\n  } // Invalid ranges are not set to a default, so can range check early.\n\n\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index');\n  }\n\n  if (end <= start) {\n    return this;\n  }\n\n  start = start >>> 0;\n  end = end === undefined ? this.length : end >>> 0;\n  if (!val) val = 0;\n  var i;\n\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val;\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val) ? val : utf8ToBytes(new Buffer(val, encoding).toString());\n    var len = bytes.length;\n\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len];\n    }\n  }\n\n  return this;\n}; // HELPER FUNCTIONS\n// ================\n\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g;\n\nfunction base64clean(str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, ''); // Node converts strings with length < 2 to ''\n\n  if (str.length < 2) return ''; // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n\n  while (str.length % 4 !== 0) {\n    str = str + '=';\n  }\n\n  return str;\n}\n\nfunction stringtrim(str) {\n  if (str.trim) return str.trim();\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction toHex(n) {\n  if (n < 16) return '0' + n.toString(16);\n  return n.toString(16);\n}\n\nfunction utf8ToBytes(string, units) {\n  units = units || Infinity;\n  var codePoint;\n  var length = string.length;\n  var leadSurrogate = null;\n  var bytes = [];\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i); // is surrogate component\n\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n          continue;\n        } // valid lead\n\n\n        leadSurrogate = codePoint;\n        continue;\n      } // 2 leads in a row\n\n\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n        leadSurrogate = codePoint;\n        continue;\n      } // valid surrogate pair\n\n\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000;\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD);\n    }\n\n    leadSurrogate = null; // encode utf8\n\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break;\n      bytes.push(codePoint);\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break;\n      bytes.push(codePoint >> 0x6 | 0xC0, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break;\n      bytes.push(codePoint >> 0xC | 0xE0, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break;\n      bytes.push(codePoint >> 0x12 | 0xF0, codePoint >> 0xC & 0x3F | 0x80, codePoint >> 0x6 & 0x3F | 0x80, codePoint & 0x3F | 0x80);\n    } else {\n      throw new Error('Invalid code point');\n    }\n  }\n\n  return bytes;\n}\n\nfunction asciiToBytes(str) {\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF);\n  }\n\n  return byteArray;\n}\n\nfunction utf16leToBytes(str, units) {\n  var c, hi, lo;\n  var byteArray = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break;\n    c = str.charCodeAt(i);\n    hi = c >> 8;\n    lo = c % 256;\n    byteArray.push(lo);\n    byteArray.push(hi);\n  }\n\n  return byteArray;\n}\n\nfunction base64ToBytes(str) {\n  return base64.toByteArray(base64clean(str));\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if (i + offset >= dst.length || i >= src.length) break;\n    dst[i + offset] = src[i];\n  }\n\n  return i;\n}\n\nfunction isnan(val) {\n  return val !== val; // eslint-disable-line no-self-compare\n}","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\n\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n","'use strict';\nvar global = require('./_global');\nvar has = require('./_has');\nvar cof = require('./_cof');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar toPrimitive = require('./_to-primitive');\nvar fails = require('./_fails');\nvar gOPN = require('./_object-gopn').f;\nvar gOPD = require('./_object-gopd').f;\nvar dP = require('./_object-dp').f;\nvar $trim = require('./_string-trim').trim;\nvar NUMBER = 'Number';\nvar $Number = global[NUMBER];\nvar Base = $Number;\nvar proto = $Number.prototype;\n// Opera ~12 has broken Object#toString\nvar BROKEN_COF = cof(require('./_object-create')(proto)) == NUMBER;\nvar TRIM = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  if (typeof it == 'string' && it.length > 2) {\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0);\n    var third, radix, maxCode;\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default: return +it;\n      }\n      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {\n  $Number = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for (var keys = require('./_descriptors') ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(Base, key = keys[j]) && !has($Number, key)) {\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  require('./_redefine')(global, NUMBER, $Number);\n}\n","var g; // This works in non-strict mode\n\ng = function () {\n  return this;\n}();\n\ntry {\n  // This works if eval is allowed (see CSP)\n  g = g || new Function(\"return this\")();\n} catch (e) {\n  // This works if the window reference is available\n  if (typeof window === \"object\") g = window;\n} // g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\n\nmodule.exports = g;","export interface LogicProof {\n  readonly statements: LogicStatement[];\n}\n\nexport interface LogicStatement {\n  readonly expression: LogicExpression;\n  readonly method: LogicMethod;\n}\n\nexport type LogicExpression =\n  | LogicPropositionExpression\n  | LogicReferenceExpression\n  | LogicUnaryExpression\n  | LogicBinaryExpression\n;\n\nexport interface LogicPropositionExpression extends BaseLogicExpression {\n  readonly logicExpressionType: LogicExpressionTypes.LOGIC_PROPOSITION;\n  readonly identifier: string;\n}\n\nexport interface LogicReferenceExpression extends BaseLogicExpression {\n  readonly logicExpressionType: LogicExpressionTypes.LOGIC_REFERENCE;\n  readonly lineNumber: number;\n}\n\nexport interface LogicUnaryExpression extends BaseLogicExpression {\n  readonly logicExpressionType: LogicExpressionTypes.LOGIC_UNARY;\n  readonly operator: LogicUnaryOperator;\n  readonly operand: LogicExpression;\n}\n\nexport interface LogicBinaryExpression extends BaseLogicExpression {\n  readonly logicExpressionType: LogicExpressionTypes.LOGIC_BINARY;\n  readonly operator: LogicBinaryOperator;\n  readonly operands: [LogicExpression, LogicExpression];\n}\n\ninterface BaseLogicExpression {\n  readonly logicExpressionType: LogicExpressionTypes;\n}\n\nexport enum LogicExpressionTypes {\n  LOGIC_PROPOSITION = 'LOGIC_PROPOSITION',\n  LOGIC_REFERENCE = 'LOGIC_REFERENCE',\n  LOGIC_UNARY = 'LOGIC_UNARY',\n  LOGIC_BINARY = 'LOGIC_BINARY',\n}\n\nexport type LogicUnaryOperator = '~';\n\nexport type LogicBinaryOperator = '/\\\\' | '\\\\/' | '->';\n\nexport type LogicMethod =\n  | string\n;\n","import Parsimmon from 'parsimmon';\n\nimport {\n  LogicBinaryExpression,\n  LogicBinaryOperator,\n  LogicExpression,\n  LogicExpressionTypes,\n  LogicProof,\n  LogicPropositionExpression,\n  LogicReferenceExpression,\n  LogicStatement,\n  LogicUnaryExpression,\n  LogicUnaryOperator,\n} from './types';\n\nconst expressionToken = <T>(p: Parsimmon.Parser<T>): Parsimmon.Parser<T> => {\n  return p.skip(Parsimmon.regexp(/ */));\n};\n\nconst unaryOperator = (Parsimmon.string('~') as Parsimmon.Parser<LogicUnaryOperator>)\n  .thru(expressionToken)\n  .desc('unary operator');\nconst binaryOperator = (Parsimmon.regexp(/\\/\\\\|\\\\\\/|->/) as Parsimmon.Parser<LogicBinaryOperator>)\n  .thru(expressionToken)\n  .desc('binary operators');\n\nconst propositionExpression = Parsimmon.regexp(/[a-zA-Z_'][a-zA-Z0-9_']*/)\n  .map((identifier): LogicPropositionExpression => ({\n    logicExpressionType: LogicExpressionTypes.LOGIC_PROPOSITION,\n    identifier,\n  }))\n  .thru(expressionToken)\n  .desc('proposition');\n\nconst referenceExpression = Parsimmon.digit.atLeast(1).tie()\n  .map((lineNumberString): LogicReferenceExpression => ({\n    logicExpressionType: LogicExpressionTypes.LOGIC_REFERENCE,\n    lineNumber: parseInt(lineNumberString, 10),\n  }))\n  .thru(expressionToken)\n  .desc('line reference');\n\nconst atomicExpression = Parsimmon.lazy(() => {\n  return Parsimmon.alt(\n    propositionExpression,\n    referenceExpression,\n    expression.wrap(Parsimmon.string('('), Parsimmon.string(')')),\n  );\n});\n\nconst unaryExpression = Parsimmon.alt(\n  Parsimmon.seqMap(\n    unaryOperator,\n    atomicExpression,\n    (operator, operand): LogicUnaryExpression => ({\n      logicExpressionType: LogicExpressionTypes.LOGIC_UNARY,\n      operator,\n      operand,\n    }),\n  ),\n  atomicExpression\n)\n  .thru(expressionToken);\n\nconst binaryExpression = Parsimmon.alt(\n  Parsimmon.seqMap(\n    unaryExpression,\n    binaryOperator,\n    unaryExpression,\n    (operand0, operator, operand1): LogicBinaryExpression => ({\n      logicExpressionType: LogicExpressionTypes.LOGIC_BINARY,\n      operator,\n      operands: [operand0, operand1],\n    }),\n  ),\n  unaryExpression,\n)\n  .thru(expressionToken);\n\nconst expression: Parsimmon.Parser<LogicExpression> = Parsimmon.alt(\n  binaryExpression,\n)\n  .thru(expressionToken);\n\nconst separator = Parsimmon.string('|')\n  .thru(expressionToken);\n\nconst method = Parsimmon.regexp(/[^\\s].*/m)\n  .desc('method');\n\nconst statement = Parsimmon.seqMap(\n  expression.skip(separator),\n  method,\n  (expression, method): LogicStatement => ({\n    expression,\n    method,\n  }),\n)\n  .thru(expressionToken);\n\nconst proof = Parsimmon.sepBy(statement, Parsimmon.newline.many())\n  .map((statements): LogicProof => ({\n    statements,\n  }))\n  .skip(Parsimmon.optWhitespace);\n\nexport const parse = (text: string): LogicProof | Error => {\n  const result = proof.parse(text);\n\n  if (!result.status) {\n    return new Error(`${result.index.line}, ${result.index.column}: Expected one of the follows:\n  ${result.expected.join('\\n  ')}`);\n  }\n\n  return result.value;\n};\n","import { Global, css } from '@emotion/core';\nimport styled from '@emotion/styled';\nimport Codemirror from 'codemirror';\nimport React, { useCallback, useEffect, useState, useRef } from 'react';\n\nimport { parse } from '../logic/parser';\n\nexport interface Props {\n  readonly initialContent: string;\n}\nconst PredicateLogic: React.FC<Props> = ({ initialContent }) => {\n  const [content, setContent] = useState(initialContent ?? '');\n  const handleContentChange = useCallback((newContent) => {\n    setContent(newContent);\n  }, []);\n\n  return (\n    <Wrapper>\n      <EditablePanel\n        initialContent={initialContent}\n        onContentChange={handleContentChange}\n      />\n      <ResultPanel content={content} />\n    </Wrapper>\n  );\n};\nexport default PredicateLogic;\n\nconst Wrapper = styled.div({\n  display: 'flex',\n\n  width: '100vw',\n  height: '100vh',\n  minHeight: '1em',\n\n  alignItems: 'flex-start',\n});\n\ninterface EditablePanelProps {\n  readonly initialContent: string;\n  onContentChange(newContent: string): void;\n}\nconst EditablePanel: React.FC<EditablePanelProps> = ({ initialContent, onContentChange }) => {\n  const editorRef = useRef<Codemirror.Editor>();\n  const domRef = useRef<HTMLPreElement>(null);\n\n  const updatePropNumber = useCallback((editor: Codemirror.Editor) => {\n    let propNumber = 1;\n\n    editor.eachLine((line) => {\n      const propNumberElement = document.createElement('div');\n      propNumberElement.className = 'CodeMirror-linenumber';\n\n      const lineNumber = editor.getLineNumber(line);\n      if (lineNumber !== null && editor.getLine(lineNumber) !== '') {\n        propNumberElement.innerHTML = String(propNumber);\n        propNumber++;\n      } else {\n        propNumberElement.innerHTML = ' ';\n      }\n\n      editor.setGutterMarker(line, 'CodeMirror-linenumbers', propNumberElement);\n    });\n  }, []);\n\n  useEffect(() => {\n    if (domRef.current !== null) {\n      const editor = editorRef.current = Codemirror(domRef.current, {\n        value: initialContent,\n        mode: null,\n        lineNumbers: true,\n      });\n      editor.refresh();\n\n      updatePropNumber(editor);\n      onContentChange(initialContent);\n      editor.on('change', (eventEditor) => {\n        updatePropNumber(eventEditor);\n        onContentChange(eventEditor.getValue());\n      });\n    }\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, []);\n\n  return (\n    <>\n      <EditablePanelWrapper ref={domRef} />\n      <Global styles={editablePanelStyle} />\n    </>\n  );\n};\n\nconst EditablePanelWrapper = styled.pre({\n  display: 'block',\n  alignSelf: 'stretch',\n\n  flexBasis: '50%',\n  flexShrink: 1,\n  flexGrow: 0,\n  minHeight: '1em',\n});\n\nconst editablePanelStyle = css({\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  [EditablePanelWrapper as any]: {\n    '.CodeMirror': {\n      height: '100%',\n\n      backgroundColor: 'rgba(0,0,0,0)',\n    },\n\n    '.CodeMirror-gutters': {\n      backgroundColor: 'rgba(0,0,0,0)',\n    },\n  },\n});\n\ninterface ResultPanelProps {\n  readonly content: string;\n}\nconst ResultPanel: React.FC<ResultPanelProps> = ({ content }) => {\n  const parseResult = parse(content);\n\n  if (parseResult instanceof Error) {\n    return (\n      <ResultPanelWrapper>\n        {parseResult.message}\n      </ResultPanelWrapper>\n    );\n  }\n\n  return (\n    <ResultPanelWrapper>\n      {JSON.stringify(parseResult, undefined, 2)}\n    </ResultPanelWrapper>\n  );\n};\n\nconst ResultPanelWrapper = styled.div({\n  display: 'block',\n  alignSelf: 'stretch',\n\n  flexBasis: '50%',\n  flexShrink: 1,\n  flexGrow: 0,\n  minHeight: '1em',\n\n  overflowY: 'scroll',\n\n  overflowWrap: 'break-word',\n  whiteSpace: 'pre-wrap',\n});\n","require(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.date.to-json\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\n!function (n, t) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define([], t) : \"object\" == typeof exports ? exports.Parsimmon = t() : n.Parsimmon = t();\n}(\"undefined\" != typeof self ? self : this, function () {\n  return function (n) {\n    var t = {};\n\n    function r(e) {\n      if (t[e]) return t[e].exports;\n      var u = t[e] = {\n        i: e,\n        l: !1,\n        exports: {}\n      };\n      return n[e].call(u.exports, u, u.exports, r), u.l = !0, u.exports;\n    }\n\n    return r.m = n, r.c = t, r.d = function (n, t, e) {\n      r.o(n, t) || Object.defineProperty(n, t, {\n        configurable: !1,\n        enumerable: !0,\n        get: e\n      });\n    }, r.r = function (n) {\n      Object.defineProperty(n, \"__esModule\", {\n        value: !0\n      });\n    }, r.n = function (n) {\n      var t = n && n.__esModule ? function () {\n        return n[\"default\"];\n      } : function () {\n        return n;\n      };\n      return r.d(t, \"a\", t), t;\n    }, r.o = function (n, t) {\n      return Object.prototype.hasOwnProperty.call(n, t);\n    }, r.p = \"\", r(r.s = 0);\n  }([function (n, t, r) {\n    \"use strict\";\n\n    function e(n) {\n      if (!(this instanceof e)) return new e(n);\n      this._ = n;\n    }\n\n    var u = e.prototype;\n\n    function o(n, t) {\n      for (var r = 0; r < n; r++) {\n        t(r);\n      }\n    }\n\n    function i(n, t, r) {\n      return function (n, t) {\n        o(t.length, function (r) {\n          n(t[r], r, t);\n        });\n      }(function (r, e, u) {\n        t = n(t, r, e, u);\n      }, r), t;\n    }\n\n    function f(n, t) {\n      return i(function (t, r, e, u) {\n        return t.concat([n(r, e, u)]);\n      }, [], t);\n    }\n\n    function a(n, t) {\n      var r = {\n        v: 0,\n        buf: t\n      };\n      return o(n, function () {\n        var n;\n        r = {\n          v: r.v << 1 | (n = r.buf, n[0] >> 7),\n          buf: function (n) {\n            var t = i(function (n, t, r, e) {\n              return n.concat(r === e.length - 1 ? Buffer.from([t, 0]).readUInt16BE(0) : e.readUInt16BE(r));\n            }, [], n);\n            return Buffer.from(f(function (n) {\n              return (n << 1 & 65535) >> 8;\n            }, t));\n          }(r.buf)\n        };\n      }), r;\n    }\n\n    function c() {\n      return \"undefined\" != typeof Buffer;\n    }\n\n    function s() {\n      if (!c()) throw new Error(\"Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.\");\n    }\n\n    function l(n) {\n      s();\n      var t = i(function (n, t) {\n        return n + t;\n      }, 0, n);\n      if (t % 8 != 0) throw new Error(\"The bits [\" + n.join(\", \") + \"] add up to \" + t + \" which is not an even number of bytes; the total should be divisible by 8\");\n      var r,\n          u = t / 8,\n          o = (r = function r(n) {\n        return n > 48;\n      }, i(function (n, t) {\n        return n || (r(t) ? t : n);\n      }, null, n));\n      if (o) throw new Error(o + \" bit range requested exceeds 48 bit (6 byte) Number max.\");\n      return new e(function (t, r) {\n        var e = u + r;\n        return e > t.length ? x(r, u.toString() + \" bytes\") : b(e, i(function (n, t) {\n          var r = a(t, n.buf);\n          return {\n            coll: n.coll.concat(r.v),\n            buf: r.buf\n          };\n        }, {\n          coll: [],\n          buf: t.slice(r, e)\n        }, n).coll);\n      });\n    }\n\n    function h(n, t) {\n      return new e(function (r, e) {\n        return s(), e + t > r.length ? x(e, t + \" bytes for \" + n) : b(e + t, r.slice(e, e + t));\n      });\n    }\n\n    function p(n, t) {\n      if (\"number\" != typeof (r = t) || Math.floor(r) !== r || t < 0 || t > 6) throw new Error(n + \" requires integer length in range [0, 6].\");\n      var r;\n    }\n\n    function d(n) {\n      return p(\"uintBE\", n), h(\"uintBE(\" + n + \")\", n).map(function (t) {\n        return t.readUIntBE(0, n);\n      });\n    }\n\n    function v(n) {\n      return p(\"uintLE\", n), h(\"uintLE(\" + n + \")\", n).map(function (t) {\n        return t.readUIntLE(0, n);\n      });\n    }\n\n    function g(n) {\n      return p(\"intBE\", n), h(\"intBE(\" + n + \")\", n).map(function (t) {\n        return t.readIntBE(0, n);\n      });\n    }\n\n    function m(n) {\n      return p(\"intLE\", n), h(\"intLE(\" + n + \")\", n).map(function (t) {\n        return t.readIntLE(0, n);\n      });\n    }\n\n    function y(n) {\n      return n instanceof e;\n    }\n\n    function E(n) {\n      return \"[object Array]\" === {}.toString.call(n);\n    }\n\n    function w(n) {\n      return c() && Buffer.isBuffer(n);\n    }\n\n    function b(n, t) {\n      return {\n        status: !0,\n        index: n,\n        value: t,\n        furthest: -1,\n        expected: []\n      };\n    }\n\n    function x(n, t) {\n      return E(t) || (t = [t]), {\n        status: !1,\n        index: -1,\n        value: null,\n        furthest: n,\n        expected: t\n      };\n    }\n\n    function B(n, t) {\n      if (!t) return n;\n      if (n.furthest > t.furthest) return n;\n      var r = n.furthest === t.furthest ? function (n, t) {\n        for (var r = {}, e = 0; e < n.length; e++) {\n          r[n[e]] = !0;\n        }\n\n        for (var u = 0; u < t.length; u++) {\n          r[t[u]] = !0;\n        }\n\n        var o = [];\n\n        for (var i in r) {\n          ({}).hasOwnProperty.call(r, i) && o.push(i);\n        }\n\n        return o.sort(), o;\n      }(n.expected, t.expected) : t.expected;\n      return {\n        status: n.status,\n        index: n.index,\n        value: n.value,\n        furthest: t.furthest,\n        expected: r\n      };\n    }\n\n    function j(n, t) {\n      if (w(n)) return {\n        offset: t,\n        line: -1,\n        column: -1\n      };\n      var r = n.slice(0, t).split(\"\\n\");\n      return {\n        offset: t,\n        line: r.length,\n        column: r[r.length - 1].length + 1\n      };\n    }\n\n    function O(n) {\n      if (!y(n)) throw new Error(\"not a parser: \" + n);\n    }\n\n    function L(n, t) {\n      return \"string\" == typeof n ? n.charAt(t) : n[t];\n    }\n\n    function _(n) {\n      if (\"number\" != typeof n) throw new Error(\"not a number: \" + n);\n    }\n\n    function S(n) {\n      if (\"function\" != typeof n) throw new Error(\"not a function: \" + n);\n    }\n\n    function k(n) {\n      if (\"string\" != typeof n) throw new Error(\"not a string: \" + n);\n    }\n\n    var P = 2,\n        q = 3,\n        I = 8,\n        A = 5 * I,\n        F = 4 * I,\n        M = \"  \";\n\n    function z(n, t) {\n      return new Array(t + 1).join(n);\n    }\n\n    function R(n, t, r) {\n      var e = t - n.length;\n      return e <= 0 ? n : z(r, e) + n;\n    }\n\n    function U(n, t, r, e) {\n      return {\n        from: n - t > 0 ? n - t : 0,\n        to: n + r > e ? e : n + r\n      };\n    }\n\n    function W(n, t) {\n      var r,\n          e,\n          u,\n          o,\n          a,\n          c = t.index,\n          s = c.offset,\n          l = 1;\n      if (s === n.length) return \"Got the end of the input\";\n\n      if (w(n)) {\n        var h = s - s % I,\n            p = s - h,\n            d = U(h, A, F + I, n.length),\n            v = f(function (n) {\n          return f(function (n) {\n            return R(n.toString(16), 2, \"0\");\n          }, n);\n        }, function (n, t) {\n          var r = n.length,\n              e = [],\n              u = 0;\n          if (r <= t) return [n.slice()];\n\n          for (var o = 0; o < r; o++) {\n            e[u] || e.push([]), e[u].push(n[o]), (o + 1) % t == 0 && u++;\n          }\n\n          return e;\n        }(n.slice(d.from, d.to).toJSON().data, I));\n        o = function (n) {\n          return 0 === n.from && 1 === n.to ? {\n            from: n.from,\n            to: n.to\n          } : {\n            from: n.from / I,\n            to: Math.floor(n.to / I)\n          };\n        }(d), e = h / I, r = 3 * p, p >= 4 && (r += 1), l = 2, u = f(function (n) {\n          return n.length <= 4 ? n.join(\" \") : n.slice(0, 4).join(\" \") + \"  \" + n.slice(4).join(\" \");\n        }, v), (a = (8 * (o.to > 0 ? o.to - 1 : o.to)).toString(16).length) < 2 && (a = 2);\n      } else {\n        var g = n.split(/\\r\\n|[\\n\\r\\u2028\\u2029]/);\n        r = c.column - 1, e = c.line - 1, o = U(e, P, q, g.length), u = g.slice(o.from, o.to), a = o.to.toString().length;\n      }\n\n      var m = e - o.from;\n      return w(n) && (a = (8 * (o.to > 0 ? o.to - 1 : o.to)).toString(16).length) < 2 && (a = 2), i(function (t, e, u) {\n        var i,\n            f = u === m,\n            c = f ? \"> \" : M;\n        return i = w(n) ? R((8 * (o.from + u)).toString(16), a, \"0\") : R((o.from + u + 1).toString(), a, \" \"), [].concat(t, [c + i + \" | \" + e], f ? [M + z(\" \", a) + \" | \" + R(\"\", r, \" \") + z(\"^\", l)] : []);\n      }, [], u).join(\"\\n\");\n    }\n\n    function D(n, t) {\n      return [\"\\n\", \"-- PARSING FAILED \" + z(\"-\", 50), \"\\n\\n\", W(n, t), \"\\n\\n\", (r = t.expected, 1 === r.length ? \"Expected:\\n\\n\" + r[0] : \"Expected one of the following: \\n\\n\" + r.join(\", \")), \"\\n\"].join(\"\");\n      var r;\n    }\n\n    function N(n) {\n      var t = \"\" + n;\n      return t.slice(t.lastIndexOf(\"/\") + 1);\n    }\n\n    function G() {\n      for (var n = [].slice.call(arguments), t = n.length, r = 0; r < t; r += 1) {\n        O(n[r]);\n      }\n\n      return e(function (r, e) {\n        for (var u, o = new Array(t), i = 0; i < t; i += 1) {\n          if (!(u = B(n[i]._(r, e), u)).status) return u;\n          o[i] = u.value, e = u.index;\n        }\n\n        return B(b(e, o), u);\n      });\n    }\n\n    function J() {\n      var n = [].slice.call(arguments);\n      if (0 === n.length) throw new Error(\"seqMap needs at least one argument\");\n      var t = n.pop();\n      return S(t), G.apply(null, n).map(function (n) {\n        return t.apply(null, n);\n      });\n    }\n\n    function T() {\n      var n = [].slice.call(arguments),\n          t = n.length;\n      if (0 === t) return X(\"zero alternates\");\n\n      for (var r = 0; r < t; r += 1) {\n        O(n[r]);\n      }\n\n      return e(function (t, r) {\n        for (var e, u = 0; u < n.length; u += 1) {\n          if ((e = B(n[u]._(t, r), e)).status) return e;\n        }\n\n        return e;\n      });\n    }\n\n    function V(n, t) {\n      return C(n, t).or(Q([]));\n    }\n\n    function C(n, t) {\n      return O(n), O(t), J(n, t.then(n).many(), function (n, t) {\n        return [n].concat(t);\n      });\n    }\n\n    function H(n) {\n      k(n);\n      var t = \"'\" + n + \"'\";\n      return e(function (r, e) {\n        var u = e + n.length,\n            o = r.slice(e, u);\n        return o === n ? b(u, o) : x(e, t);\n      });\n    }\n\n    function K(n, t) {\n      !function (n) {\n        if (!(n instanceof RegExp)) throw new Error(\"not a regexp: \" + n);\n\n        for (var t = N(n), r = 0; r < t.length; r++) {\n          var e = t.charAt(r);\n          if (\"i\" !== e && \"m\" !== e && \"u\" !== e) throw new Error('unsupported regexp flag \"' + e + '\": ' + n);\n        }\n      }(n), arguments.length >= 2 ? _(t) : t = 0;\n\n      var r = function (n) {\n        return RegExp(\"^(?:\" + n.source + \")\", N(n));\n      }(n),\n          u = \"\" + n;\n\n      return e(function (n, e) {\n        var o = r.exec(n.slice(e));\n\n        if (o) {\n          if (0 <= t && t <= o.length) {\n            var i = o[0],\n                f = o[t];\n            return b(e + i.length, f);\n          }\n\n          return x(e, \"valid match group (0 to \" + o.length + \") in \" + u);\n        }\n\n        return x(e, u);\n      });\n    }\n\n    function Q(n) {\n      return e(function (t, r) {\n        return b(r, n);\n      });\n    }\n\n    function X(n) {\n      return e(function (t, r) {\n        return x(r, n);\n      });\n    }\n\n    function Y(n) {\n      if (y(n)) return e(function (t, r) {\n        var e = n._(t, r);\n\n        return e.index = r, e.value = \"\", e;\n      });\n      if (\"string\" == typeof n) return Y(H(n));\n      if (n instanceof RegExp) return Y(K(n));\n      throw new Error(\"not a string, regexp, or parser: \" + n);\n    }\n\n    function Z(n) {\n      return O(n), e(function (t, r) {\n        var e = n._(t, r),\n            u = t.slice(r, e.index);\n\n        return e.status ? x(r, 'not \"' + u + '\"') : b(r, null);\n      });\n    }\n\n    function $(n) {\n      return S(n), e(function (t, r) {\n        var e = L(t, r);\n        return r < t.length && n(e) ? b(r + 1, e) : x(r, \"a character/byte matching \" + n);\n      });\n    }\n\n    function nn(n, t) {\n      arguments.length < 2 && (t = n, n = void 0);\n      var r = e(function (n, e) {\n        return r._ = t()._, r._(n, e);\n      });\n      return n ? r.desc(n) : r;\n    }\n\n    function tn() {\n      return X(\"fantasy-land/empty\");\n    }\n\n    u.parse = function (n) {\n      if (\"string\" != typeof n && !w(n)) throw new Error(\".parse must be called with a string or Buffer as its argument\");\n\n      var t = this.skip(on)._(n, 0);\n\n      return t.status ? {\n        status: !0,\n        value: t.value\n      } : {\n        status: !1,\n        index: j(n, t.furthest),\n        expected: t.expected\n      };\n    }, u.tryParse = function (n) {\n      var t = this.parse(n);\n      if (t.status) return t.value;\n      var r = D(n, t),\n          e = new Error(r);\n      throw e.type = \"ParsimmonError\", e.result = t, e;\n    }, u.assert = function (n, t) {\n      return this.chain(function (r) {\n        return n(r) ? Q(r) : X(t);\n      });\n    }, u.or = function (n) {\n      return T(this, n);\n    }, u.trim = function (n) {\n      return this.wrap(n, n);\n    }, u.wrap = function (n, t) {\n      return J(n, this, t, function (n, t) {\n        return t;\n      });\n    }, u.thru = function (n) {\n      return n(this);\n    }, u.then = function (n) {\n      return O(n), G(this, n).map(function (n) {\n        return n[1];\n      });\n    }, u.many = function () {\n      var n = this;\n      return e(function (t, r) {\n        for (var e = [], u = void 0;;) {\n          if (!(u = B(n._(t, r), u)).status) return B(b(r, e), u);\n          if (r === u.index) throw new Error(\"infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause\");\n          r = u.index, e.push(u.value);\n        }\n      });\n    }, u.tieWith = function (n) {\n      return k(n), this.map(function (t) {\n        if (function (n) {\n          if (!E(n)) throw new Error(\"not an array: \" + n);\n        }(t), t.length) {\n          k(t[0]);\n\n          for (var r = t[0], e = 1; e < t.length; e++) {\n            k(t[e]), r += n + t[e];\n          }\n\n          return r;\n        }\n\n        return \"\";\n      });\n    }, u.tie = function () {\n      return this.tieWith(\"\");\n    }, u.times = function (n, t) {\n      var r = this;\n      return arguments.length < 2 && (t = n), _(n), _(t), e(function (e, u) {\n        for (var o = [], i = void 0, f = void 0, a = 0; a < n; a += 1) {\n          if (f = B(i = r._(e, u), f), !i.status) return f;\n          u = i.index, o.push(i.value);\n        }\n\n        for (; a < t && (f = B(i = r._(e, u), f), i.status); a += 1) {\n          u = i.index, o.push(i.value);\n        }\n\n        return B(b(u, o), f);\n      });\n    }, u.result = function (n) {\n      return this.map(function () {\n        return n;\n      });\n    }, u.atMost = function (n) {\n      return this.times(0, n);\n    }, u.atLeast = function (n) {\n      return J(this.times(n), this.many(), function (n, t) {\n        return n.concat(t);\n      });\n    }, u.map = function (n) {\n      S(n);\n      var t = this;\n      return e(function (r, e) {\n        var u = t._(r, e);\n\n        return u.status ? B(b(u.index, n(u.value)), u) : u;\n      });\n    }, u.contramap = function (n) {\n      S(n);\n      var t = this;\n      return e(function (r, e) {\n        var u = t.parse(n(r.slice(e)));\n        return u.status ? b(e + r.length, u.value) : u;\n      });\n    }, u.promap = function (n, t) {\n      return S(n), S(t), this.contramap(n).map(t);\n    }, u.skip = function (n) {\n      return G(this, n).map(function (n) {\n        return n[0];\n      });\n    }, u.mark = function () {\n      return J(rn, this, rn, function (n, t, r) {\n        return {\n          start: n,\n          value: t,\n          end: r\n        };\n      });\n    }, u.node = function (n) {\n      return J(rn, this, rn, function (t, r, e) {\n        return {\n          name: n,\n          value: r,\n          start: t,\n          end: e\n        };\n      });\n    }, u.sepBy = function (n) {\n      return V(this, n);\n    }, u.sepBy1 = function (n) {\n      return C(this, n);\n    }, u.lookahead = function (n) {\n      return this.skip(Y(n));\n    }, u.notFollowedBy = function (n) {\n      return this.skip(Z(n));\n    }, u.desc = function (n) {\n      E(n) || (n = [n]);\n      var t = this;\n      return e(function (r, e) {\n        var u = t._(r, e);\n\n        return u.status || (u.expected = n), u;\n      });\n    }, u.fallback = function (n) {\n      return this.or(Q(n));\n    }, u.ap = function (n) {\n      return J(n, this, function (n, t) {\n        return n(t);\n      });\n    }, u.chain = function (n) {\n      var t = this;\n      return e(function (r, e) {\n        var u = t._(r, e);\n\n        return u.status ? B(n(u.value)._(r, u.index), u) : u;\n      });\n    }, u.concat = u.or, u.empty = tn, u.of = Q, u[\"fantasy-land/ap\"] = u.ap, u[\"fantasy-land/chain\"] = u.chain, u[\"fantasy-land/concat\"] = u.concat, u[\"fantasy-land/empty\"] = u.empty, u[\"fantasy-land/of\"] = u.of, u[\"fantasy-land/map\"] = u.map;\n    var rn = e(function (n, t) {\n      return b(t, j(n, t));\n    }),\n        en = e(function (n, t) {\n      return t >= n.length ? x(t, \"any character/byte\") : b(t + 1, L(n, t));\n    }),\n        un = e(function (n, t) {\n      return b(n.length, n.slice(t));\n    }),\n        on = e(function (n, t) {\n      return t < n.length ? x(t, \"EOF\") : b(t, null);\n    }),\n        fn = K(/[0-9]/).desc(\"a digit\"),\n        an = K(/[0-9]*/).desc(\"optional digits\"),\n        cn = K(/[a-z]/i).desc(\"a letter\"),\n        sn = K(/[a-z]*/i).desc(\"optional letters\"),\n        ln = K(/\\s*/).desc(\"optional whitespace\"),\n        hn = K(/\\s+/).desc(\"whitespace\"),\n        pn = H(\"\\r\"),\n        dn = H(\"\\n\"),\n        vn = H(\"\\r\\n\"),\n        gn = T(vn, dn, pn).desc(\"newline\"),\n        mn = T(gn, on);\n    e.all = un, e.alt = T, e.any = en, e.cr = pn, e.createLanguage = function (n) {\n      var t = {};\n\n      for (var r in n) {\n        ({}).hasOwnProperty.call(n, r) && function (r) {\n          t[r] = nn(function () {\n            return n[r](t);\n          });\n        }(r);\n      }\n\n      return t;\n    }, e.crlf = vn, e.custom = function (n) {\n      return e(n(b, x));\n    }, e.digit = fn, e.digits = an, e.empty = tn, e.end = mn, e.eof = on, e.fail = X, e.formatError = D, e.index = rn, e.isParser = y, e.lazy = nn, e.letter = cn, e.letters = sn, e.lf = dn, e.lookahead = Y, e.makeFailure = x, e.makeSuccess = b, e.newline = gn, e.noneOf = function (n) {\n      return $(function (t) {\n        return n.indexOf(t) < 0;\n      }).desc(\"none of '\" + n + \"'\");\n    }, e.notFollowedBy = Z, e.of = Q, e.oneOf = function (n) {\n      for (var t = n.split(\"\"), r = 0; r < t.length; r++) {\n        t[r] = \"'\" + t[r] + \"'\";\n      }\n\n      return $(function (t) {\n        return n.indexOf(t) >= 0;\n      }).desc(t);\n    }, e.optWhitespace = ln, e.Parser = e, e.range = function (n, t) {\n      return $(function (r) {\n        return n <= r && r <= t;\n      }).desc(n + \"-\" + t);\n    }, e.regex = K, e.regexp = K, e.sepBy = V, e.sepBy1 = C, e.seq = G, e.seqMap = J, e.seqObj = function () {\n      for (var n, t = {}, r = 0, u = (n = arguments, Array.prototype.slice.call(n)), o = u.length, i = 0; i < o; i += 1) {\n        var f = u[i];\n\n        if (!y(f)) {\n          if (E(f) && 2 === f.length && \"string\" == typeof f[0] && y(f[1])) {\n            var a = f[0];\n            if (Object.prototype.hasOwnProperty.call(t, a)) throw new Error(\"seqObj: duplicate key \" + a);\n            t[a] = !0, r++;\n            continue;\n          }\n\n          throw new Error(\"seqObj arguments must be parsers or [string, parser] array pairs.\");\n        }\n      }\n\n      if (0 === r) throw new Error(\"seqObj expects at least one named parser, found zero\");\n      return e(function (n, t) {\n        for (var r, e = {}, i = 0; i < o; i += 1) {\n          var f, a;\n          if (E(u[i]) ? (f = u[i][0], a = u[i][1]) : (f = null, a = u[i]), !(r = B(a._(n, t), r)).status) return r;\n          f && (e[f] = r.value), t = r.index;\n        }\n\n        return B(b(t, e), r);\n      });\n    }, e.string = H, e.succeed = Q, e.takeWhile = function (n) {\n      return S(n), e(function (t, r) {\n        for (var e = r; e < t.length && n(L(t, e));) {\n          e++;\n        }\n\n        return b(e, t.slice(r, e));\n      });\n    }, e.test = $, e.whitespace = hn, e[\"fantasy-land/empty\"] = tn, e[\"fantasy-land/of\"] = Q, e.Binary = {\n      bitSeq: l,\n      bitSeqObj: function bitSeqObj(n) {\n        s();\n        var t = {},\n            r = 0,\n            e = f(function (n) {\n          if (E(n)) {\n            var e = n;\n            if (2 !== e.length) throw new Error(\"[\" + e.join(\", \") + \"] should be length 2, got length \" + e.length);\n            if (k(e[0]), _(e[1]), Object.prototype.hasOwnProperty.call(t, e[0])) throw new Error(\"duplicate key in bitSeqObj: \" + e[0]);\n            return t[e[0]] = !0, r++, e;\n          }\n\n          return _(n), [null, n];\n        }, n);\n        if (r < 1) throw new Error(\"bitSeqObj expects at least one named pair, got [\" + n.join(\", \") + \"]\");\n        var u = f(function (n) {\n          return n[0];\n        }, e);\n        return l(f(function (n) {\n          return n[1];\n        }, e)).map(function (n) {\n          return i(function (n, t) {\n            return null !== t[0] && (n[t[0]] = t[1]), n;\n          }, {}, f(function (t, r) {\n            return [t, n[r]];\n          }, u));\n        });\n      },\n      \"byte\": function byte(n) {\n        if (s(), _(n), n > 255) throw new Error(\"Value specified to byte constructor (\" + n + \"=0x\" + n.toString(16) + \") is larger in value than a single byte.\");\n        var t = (n > 15 ? \"0x\" : \"0x0\") + n.toString(16);\n        return e(function (r, e) {\n          var u = L(r, e);\n          return u === n ? b(e + 1, u) : x(e, t);\n        });\n      },\n      buffer: function buffer(n) {\n        return h(\"buffer\", n).map(function (n) {\n          return Buffer.from(n);\n        });\n      },\n      encodedString: function encodedString(n, t) {\n        return h(\"string\", t).map(function (t) {\n          return t.toString(n);\n        });\n      },\n      uintBE: d,\n      uint8BE: d(1),\n      uint16BE: d(2),\n      uint32BE: d(4),\n      uintLE: v,\n      uint8LE: v(1),\n      uint16LE: v(2),\n      uint32LE: v(4),\n      intBE: g,\n      int8BE: g(1),\n      int16BE: g(2),\n      int32BE: g(4),\n      intLE: m,\n      int8LE: m(1),\n      int16LE: m(2),\n      int32LE: m(4),\n      floatBE: h(\"floatBE\", 4).map(function (n) {\n        return n.readFloatBE(0);\n      }),\n      floatLE: h(\"floatLE\", 4).map(function (n) {\n        return n.readFloatLE(0);\n      }),\n      doubleBE: h(\"doubleBE\", 8).map(function (n) {\n        return n.readDoubleBE(0);\n      }),\n      doubleLE: h(\"doubleLE\", 8).map(function (n) {\n        return n.readDoubleLE(0);\n      })\n    }, n.exports = e;\n  }]);\n});"],"sourceRoot":""}